{"version":3,"sources":["kendo.scheduler.js"],"names":["f","define","$","normalizeText","text","String","replace","REPLACE_REGEX","SPACE","objectKey","object","key","parts","push","sort","join","hashKey","str","i","hash","length","charCodeAt","zeroSize","width","height","baseline","measureText","style","measureBox","TextMetrics","current","measure","LRUCache","DEFAULT_OPTIONS","defaultMeasureBox","window","kendo","util","Class","extend","init","size","this","_size","_length","_map","put","value","map","entry","_head","_tail","newer","older","get","baselineMarkerSize","document","createElement","cssText","options","_cache","styleKey","cacheKey","cachedResult","baselineMarker","textStr","box","_baselineMarker","cloneNode","textContent","appendChild","body","offsetWidth","offsetHeight","offsetTop","parentNode","removeChild","marker","deepExtend","jQuery","amd","a1","a2","a3","undefined","timezoneButtonText","model","message","startTimezone","endTimezone","appendTimezoneAttr","attrs","timezone","attr","appendDateCompareValidator","dateCompareRule","validationRules","fields","field","validation","dateCompare","isPlainObject","wrapDataAccess","originalFunction","data","convertData","wrapDataSerialization","toString","call","ObservableArray","method","removeUid","event","idx","start","convert","end","uid","getOccurrenceByUid","applyZone","date","fromZone","toZone","remove","dateCompareValidator","input","container","startInput","endInput","startPicker","endPicker","editable","filter","closest","find","widgetInstance","ui","parseDate","val","expandAll","events","zone","concat","expand","trimOptions","name","prefix","edit","add","navigate","createValidationAttributes","ruleName","rule","modelField","specialRules","datatype","inArray","isFunction","dropDownResourceEditor","resource","format","title","ns","appendTo","kendoDropDownList","dataTextField","dataValueField","dataSource","valuePrimitive","optionLabel","template","dataColorField","descriptionEditor","multiSelectResourceEditor","kendoMultiSelect","itemTemplate","tagTemplate","multiSelectResourceEditorMobile","view","getter","moveEventRange","distance","duration","getTime","Date","setTime","defaultCommands","editors","Editor","MobileEditor","PopupEditor","Scheduler","defaultViews","SCHEDULER_EXPORT","TimezoneEditor","ZONETITLEOPTIONTEMPLATE","ZONEOPTIONTEMPLATE","MobileTimezoneEditor","input_support","support","MS_PER_DAY","getDate","getMilliseconds","recurrence","keys","F10","Widget","DataBoundWidget","STRING","Popup","Calendar","DataSource","proxy","Object","prototype","isArray","NS","CLICK","MOUSEDOWN","TOUCHSTART","pointers","TOUCHMOVE","TOUCHEND","MOUSEMOVE","mousemove","CHANGE","CANCEL","REMOVE","RESET","SAVE","ADD","EDIT","FOCUSEDSTATE","EXPANDEDSTATE","VIEWSSELECTOR","INVERSECOLORCLASS","valueStartEndBoundRegex","TODAY","EXCEPTION_SEPARATOR","OLD_EXCEPTION_SEPARATOR_REGEXP","RECURRENCE_EXCEPTION","DELETECONFIRM","DELETERECURRING","EDITRECURRING","DELETERECURRINGCONFIRM","RESETSERIESCONFIRM","DELETESERIESCONFIRM","COMMANDBUTTONTMPL","VIEWBUTTONTEMPLATE","TOOLBARTEMPLATE","MOBILETOOLBARTEMPLATE","MOBILEDATERANGEEDITOR","datepicker_role","datetimepicker_role","isAllDay","dateTimeValidate","dateValidate","hide","DATERANGEEDITOR","RECURRENCEEDITOR","kendoRecurrenceEditor","messages","MOBILERECURRENCEEDITOR","kendoMobileRecurrenceEditor","pane","MOBILETIMEZONEPOPUP","noTimezone","click","TIMEZONEPOPUP","timezoneEditorButton","MOBILETIMEZONEEDITOR","toggle","visible","kendoMobileTimezoneEditor","TIMEZONEEDITOR","kendoTimezoneEditor","SchedulerDataReader","schema","reader","serialize","errors","parse","total","groups","aggregates","SchedulerEvent","Model","that","fn","_defaultId","defaults","idField","_time","fieldTime","toUtcTime","_date","clone","updateUid","constructor","toJSON","offset","getTimezoneOffset","MS_PER_MINUTE","update","eventInfo","set","_startTime","_endTime","isMultiDay","isException","isNew","recurrenceId","isOccurrence","isRecurring","recurrenceRule","isRecurrenceHead","id","toOccurrence","recurrenceException","obj","shouldSerialize","milliseconds","type","defaultValue","required","description","SchedulerDataSource","modelBase","endOffset","apply","logic","filters","operator","Query","toArray","cancelChanges","_removeExceptionDate","insert","index","_createNewModel","accept","_pushCreated","_addExceptionDate","pushCreate","items","_removeExceptions","slice","item","shift","head","replaceRegExp","RegExp","toExceptionString","test","newException","create","Error","className","canceledit","destroy","imageClass","iconClass","mobile","dateRange","timezonePopUp","multipleResources","resources","desktop","Observable","element","createButton","toggleDateValidationHandler","_toggleDateValidation","e","isDateTimeInput","shouldValidate","bindAttribute","each","is","resourceIndex","preventDefault","_initTimezoneEditor","editor","allDayEvent","windows_zones","repeat","recurrenceEditor","multiple","_buildEditTemplate","editableFields","tmpl","settings","Template","templateSettings","paramName","html","unescape","separateTimezones","expr","_createEndTimezoneButton","_revertTimezones","_startTimezone","_endTimezone","arguments","Pane","wrap","parent","css","_actionSheetButtonTemplate","_actionSheetPopupOptions","documentElement","hasClass","modal","align","position","effect","animations","left","right","close","unbind","timezoneView","checkbox","endTimezoneRow","startTimezoneChange","prop","cancel","timezoneTitle","save","append","contentElement","show","on","editView","stopPropagation","bind","_createActionSheetButton","showDialog","buttonIndex","actionSheet","target","buttons","kendoMobileActionSheet","cancelTemplate","command","currentTarget","popup","open","editEvent","updateText","removeText","cancelText","titleText","editorTitle","resetSeries","kendoEditable","clearContainer","validateOnBlur","addClass","prev","next","children","trigger","button","_views","roleSelector","not","views","eq","purge","deleteText","kendoWindow","resizable","draggable","userTriggered","center","cycleForm","_timezonePopup","wrapper","focus","getKendoWindow","activator","wnd","saveButton","cancelButton","timezonePopup","timezoneEditorTitle","_initModel","_wrapper","_toolbar","_dataSource","_resources","_resizeHandler","resize","_resizable","_movable","_bindResize","_selectable","_touchHandlers","_ariaId","guid","_createEditor","_unbindResize","off","dataItems","eventsCount","sortedData","_data","eventsUids","dict","eventsUidsLength","_isMobile","mobileOS","_isTouch","originalEvent","pointerType","_isInverseColor","eventElement","_isMobilePhoneView","tablet","_groupsByResource","groupIndex","groupsArray","parentFieldValue","parentField","group","prevIndex","dataIndex","fieldValue","currentGroupIndex","select","selectedGroups","selectedEvents","slots","fieldName","groupsByResource","rangeStart","rangeEnd","ranges","selection","_selection","_selectedSlots","_selectedEvents","_resourceBySlot","_old","clearSelection","splice","groupedResources","_selectEvents","_select","_startDate","addDays","_endDate","toLocalDate","isDaySlot","currentGroup","timeSlotCollectionCount","daySlotCollectionCount","collIdx","dayCollIdx","eventsLength","isGrouped","getTimeSlotCollection","getDaySlotCollection","_createSelection","startX","startY","endX","endY","timeStamp","touchMoveHandler","_touchMove","content","stop","_touchPosX","_tapPosition","_touchPosY","_userTouched","_scrolling","now","delta","amplitude","_amplitude","_dragging","selectable","Math","abs","_mouseDownSelection","kineticScrollNeeded","animate","scrollTop","mouseMoveHandler","_tabindex","_mouseMove","which","isRight","_selectFirstSlot","_ctrlKey","_shiftKey","toolbar","removeClass","relatedTarget","_keydown","ctrlKey","shiftKey","browser","msie","version","setTimeout","currentUid","labelFormat","oldSelection","oldEventsLength","removeAttribute","removeAttr","ariaEventLabel","ariaSlotLabel","setAttribute","uids","occurrenceByUid","coordinate","changedTouches","verticalScroll","scrollHeight","clientHeight","horizontalScroll","scrollWidth","clientWidth","round","scrollLeft","applyVerticalScroll","applyhorizontalScroll","clearTimeout","_moveTimer","slot","startDate","endDate","selectionByElement","backward","_viewByIndex","selectedIndex","itemToFocus","focusedViewName","viewByIndex","action","keyCode","prevSelection","isModifier","focusableToolBarSelector","focusableItems","viewsWrapper","shouldNavigate","focusedViewIndex","isRtl","direction","TAB","_focusedView","ENTER","SPACEBAR","activeElement","blur","altKey","DOWN","RIGHT","LEFT","UP","_showCalendar","ESC","moveToEvent","addEvent","DELETE","removeEvent","move","inRange","_selectedViewName","_adjustSelectedDate","indexOf","_updateSelection","dataItem","indexOfEvent","_updateEventForSelection","_timeSlotInterval","autoBind","snap","allDaySlot","min","max","footer","today","pdf","deleteWindowTitle","previous","day","week","workWeek","agenda","month","timeline","timelineWeek","timelineWorkWeek","timelineMonth","recurrenceMessages","resetSeriesWindowTitle","deleteWindowOccurrence","deleteWindowSeries","editWindowTitle","editWindowOccurrence","editWindowSeries","confirmation","orientation","_refreshHandler","_progressHandler","_errorHandler","calendar","_editor","_moveDraggable","_resizeDraggable","_model","setDataSource","fetch","_selectedView","siblings","startSlot","endSlot","startResources","startTime","endTime","clonedEvent","originSlot","originStartTime","clonedEvents","cachedEvents","isMobile","movable","android","Draggable","ignore","holdToDrag","autoScroll","evtClone","evtCloneElement","isTouch","_eventOptionsForMove","inverseColor","_slotByPosition","x","startLocation","y","startOffset","range","slotIndex","targetSlotElement","location","top","_updateMoveHint","endResources","prevented","evt","updatedEventOptions","eventOptions","_removeMoveHint","stringify","_isMultiDrag","_updateEvent","sync","cancelHold","handle","directions","k-resize-e","k-resize-w","k-resize-n","k-resize-s","dragstart","dragHandle","_updateEventForResize","drag","dir","currentSlot","originalStart","originalEnd","_updateResizeHint","dragend","_removeResizeHint","setHours","setMinutes","dragcancel","updateEvent","callback","_preventRefresh","_convertDates","recurrenceHead","getByUid","updateSeries","updateOccurrence","eventUid","exception","_showRecurringDialog","editRecurring","occurrenceText","seriesText","_modelForContainer","_confirmation","isResetSeries","_isEditorOpened","deleteRecurringConfirmation","deleteSeriesConfirmation","resetSeriesConfirmation","cancelEvent","_editEvent","saveEvent","dirty","_editRecurringDialog","_createPopupEditor","editOccurrence","editSeries","editRecurringMode","_createButton","commandName","_set","_deleteRecurringDialog","_removeEvent","occurrence","occurrencesInRange","deleteOccurrenceConfirmation","seriesCallback","occurrenceCallback","currentModel","deleteOccurrence","deleteSeries","deleteRecurring","_unbindView","angular","elements","_bindView","_viewRemoveHandler","_viewAddHandler","_viewEditHandler","_viewNavigateHandler","switchWorkDay","isWorkDay","_workDayMode","_selectView","_viewActivateHandler","constrainSelection","viewButton","firstButton","viewButtons","_renderView","_viewsCount","replaceWith","prepend","toLowerCase","rebind","viewName","_initializeView","mouseAndTouchPresent","dateForTitle","shortDateForTitle","force","getSize","currentSize","refresh","selectedDate","isInDateRange","setFullYear","getFullYear","getMonth","isSettings","showWorkHours","defaultView","selected","hasType","allDay","time","_requestStart","_error","_progress","progress","promises","when","then","observable","formattedDate","formattedShortDate","commands","grep","viewsCount","saveAsPDF","timezoneOffset","li","currentDate","nextDate","previousDate","toggleClass","hover","anchor","activate","_toggleResize","change","copyAnchorStyles","visibleEndDate","refreshLayout","render","slotByPosition","slotByElement","resourcesBySlot","plugin","PDFMixin","_drawPDF","scheduler","promise","table","styles","Deferred","_drawPDFShadow","avoidLinks","done","args","page","pageNumber","totalPages","notify","resolve","fail","err","reject","always","zones","zones_titles","_zonesQuery","_zoneTitleId","_zoneTitlePicker","_zonePicker","_zoneTitle","_zone","_value","zoneTitle","DropDownList","cascadeFrom","dataBound","other_zone","_bindZones","_filter","_options","zonePicker","zone_value"],"mappings":"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","file":"kendo.scheduler.min.js","sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function (f, define) {\n    define('util/text-metrics', ['kendo.core'], f);\n}(function () {\n    (function ($) {\n        window.kendo.util = window.kendo.util || {};\n        var LRUCache = kendo.Class.extend({\n            init: function (size) {\n                this._size = size;\n                this._length = 0;\n                this._map = {};\n            },\n            put: function (key, value) {\n                var map = this._map;\n                var entry = {\n                    key: key,\n                    value: value\n                };\n                map[key] = entry;\n                if (!this._head) {\n                    this._head = this._tail = entry;\n                } else {\n                    this._tail.newer = entry;\n                    entry.older = this._tail;\n                    this._tail = entry;\n                }\n                if (this._length >= this._size) {\n                    map[this._head.key] = null;\n                    this._head = this._head.newer;\n                    this._head.older = null;\n                } else {\n                    this._length++;\n                }\n            },\n            get: function (key) {\n                var entry = this._map[key];\n                if (entry) {\n                    if (entry === this._head && entry !== this._tail) {\n                        this._head = entry.newer;\n                        this._head.older = null;\n                    }\n                    if (entry !== this._tail) {\n                        if (entry.older) {\n                            entry.older.newer = entry.newer;\n                            entry.newer.older = entry.older;\n                        }\n                        entry.older = this._tail;\n                        entry.newer = null;\n                        this._tail.newer = entry;\n                        this._tail = entry;\n                    }\n                    return entry.value;\n                }\n            }\n        });\n        var REPLACE_REGEX = /\\r?\\n|\\r|\\t/g;\n        var SPACE = ' ';\n        function normalizeText(text) {\n            return String(text).replace(REPLACE_REGEX, SPACE);\n        }\n        function objectKey(object) {\n            var parts = [];\n            for (var key in object) {\n                parts.push(key + object[key]);\n            }\n            return parts.sort().join('');\n        }\n        function hashKey(str) {\n            var hash = 2166136261;\n            for (var i = 0; i < str.length; ++i) {\n                hash += (hash << 1) + (hash << 4) + (hash << 7) + (hash << 8) + (hash << 24);\n                hash ^= str.charCodeAt(i);\n            }\n            return hash >>> 0;\n        }\n        function zeroSize() {\n            return {\n                width: 0,\n                height: 0,\n                baseline: 0\n            };\n        }\n        var DEFAULT_OPTIONS = { baselineMarkerSize: 1 };\n        var defaultMeasureBox;\n        if (typeof document !== 'undefined') {\n            defaultMeasureBox = document.createElement('div');\n            defaultMeasureBox.style.cssText = 'position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;' + 'padding: 0 !important; margin: 0 !important; border: 0 !important;' + 'line-height: normal !important; visibility: hidden !important; white-space: pre!important;';\n        }\n        var TextMetrics = kendo.Class.extend({\n            init: function (options) {\n                this._cache = new LRUCache(1000);\n                this.options = $.extend({}, DEFAULT_OPTIONS, options);\n            },\n            measure: function (text, style, options) {\n                if (options === void 0) {\n                    options = {};\n                }\n                if (!text) {\n                    return zeroSize();\n                }\n                var styleKey = objectKey(style);\n                var cacheKey = hashKey(text + styleKey);\n                var cachedResult = this._cache.get(cacheKey);\n                if (cachedResult) {\n                    return cachedResult;\n                }\n                var size = zeroSize();\n                var measureBox = options.box || defaultMeasureBox;\n                var baselineMarker = this._baselineMarker().cloneNode(false);\n                for (var key in style) {\n                    var value = style[key];\n                    if (typeof value !== 'undefined') {\n                        measureBox.style[key] = value;\n                    }\n                }\n                var textStr = options.normalizeText !== false ? normalizeText(text) : String(text);\n                measureBox.textContent = textStr;\n                measureBox.appendChild(baselineMarker);\n                document.body.appendChild(measureBox);\n                if (textStr.length) {\n                    size.width = measureBox.offsetWidth - this.options.baselineMarkerSize;\n                    size.height = measureBox.offsetHeight;\n                    size.baseline = baselineMarker.offsetTop + this.options.baselineMarkerSize;\n                }\n                if (size.width > 0 && size.height > 0) {\n                    this._cache.put(cacheKey, size);\n                }\n                measureBox.parentNode.removeChild(measureBox);\n                return size;\n            },\n            _baselineMarker: function () {\n                var marker = document.createElement('div');\n                marker.style.cssText = 'display: inline-block; vertical-align: baseline;width: ' + this.options.baselineMarkerSize + 'px; height: ' + this.options.baselineMarkerSize + 'px;overflow: hidden;';\n                return marker;\n            }\n        });\n        TextMetrics.current = new TextMetrics();\n        function measureText(text, style, measureBox) {\n            return TextMetrics.current.measure(text, style, measureBox);\n        }\n        kendo.deepExtend(kendo.util, {\n            LRUCache: LRUCache,\n            TextMetrics: TextMetrics,\n            measureText: measureText,\n            objectKey: objectKey,\n            hashKey: hashKey,\n            normalizeText: normalizeText\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('kendo.scheduler', [\n        'kendo.dropdownlist',\n        'kendo.editable',\n        'kendo.multiselect',\n        'kendo.window',\n        'kendo.datetimepicker',\n        'kendo.scheduler.recurrence',\n        'kendo.scheduler.view',\n        'kendo.scheduler.dayview',\n        'kendo.scheduler.agendaview',\n        'kendo.scheduler.monthview',\n        'kendo.scheduler.timelineview',\n        'kendo.mobile.actionsheet',\n        'kendo.mobile.pane',\n        'kendo.pdf'\n    ], f);\n}(function () {\n    var __meta__ = {\n        id: 'scheduler',\n        name: 'Scheduler',\n        category: 'web',\n        description: 'The Scheduler is an event calendar.',\n        depends: [\n            'dropdownlist',\n            'editable',\n            'multiselect',\n            'window',\n            'datepicker',\n            'datetimepicker',\n            'scheduler.recurrence',\n            'scheduler.view'\n        ],\n        features: [\n            {\n                id: 'scheduler-dayview',\n                name: 'Scheduler Day View',\n                description: 'Scheduler Day View',\n                depends: ['scheduler.dayview']\n            },\n            {\n                id: 'scheduler-agendaview',\n                name: 'Scheduler Agenda View',\n                description: 'Scheduler Agenda View',\n                depends: ['scheduler.agendaview']\n            },\n            {\n                id: 'scheduler-monthview',\n                name: 'Scheduler Month View',\n                description: 'Scheduler Month View',\n                depends: ['scheduler.monthview']\n            },\n            {\n                id: 'scheduler-timelineview',\n                name: 'Scheduler Timeline View',\n                description: 'Scheduler Timeline View',\n                depends: ['scheduler.timelineview']\n            },\n            {\n                id: 'scheduler-mobile',\n                name: 'Scheduler adaptive rendering',\n                description: 'Support for adaptive rendering',\n                depends: [\n                    'mobile.actionsheet',\n                    'mobile.pane'\n                ]\n            },\n            {\n                id: 'scheduler-pdf-export',\n                name: 'PDF export',\n                description: 'Export the scheduler events as PDF',\n                depends: [\n                    'pdf',\n                    'drawing'\n                ]\n            },\n            {\n                id: 'scheduler-timezones',\n                name: 'Timezones',\n                description: 'Allow selecting timezones different than Etc/UTC',\n                depends: ['timezones']\n            }\n        ]\n    };\n    (function ($, undefined) {\n        var kendo = window.kendo, date = kendo.date, input_support = kendo.support.input, MS_PER_DAY = date.MS_PER_DAY, getDate = date.getDate, getMilliseconds = kendo.date.getMilliseconds, recurrence = kendo.recurrence, keys = $.extend({ F10: 121 }, kendo.keys), ui = kendo.ui, Widget = ui.Widget, DataBoundWidget = ui.DataBoundWidget, STRING = 'string', Popup = ui.Popup, Calendar = ui.Calendar, DataSource = kendo.data.DataSource, isPlainObject = $.isPlainObject, extend = $.extend, proxy = $.proxy, toString = Object.prototype.toString, isArray = $.isArray, NS = '.kendoScheduler', CLICK = 'click', MOUSEDOWN = 'mousedown', TOUCHSTART = kendo.support.pointers ? 'pointerdown' : 'touchstart', TOUCHMOVE = kendo.support.pointers ? 'pointermove' : 'touchmove', TOUCHEND = kendo.support.pointers ? 'pointerup' : 'touchend', MOUSEMOVE = kendo.support.mousemove, CHANGE = 'change', CANCEL = 'cancel', REMOVE = 'remove', RESET = 'resetSeries', SAVE = 'save', ADD = 'add', EDIT = 'edit', FOCUSEDSTATE = 'k-state-focused', EXPANDEDSTATE = 'k-state-expanded', VIEWSSELECTOR = '.k-scheduler-views', INVERSECOLORCLASS = 'k-event-inverse', valueStartEndBoundRegex = /(?:value:start|value:end)(?:,|$)/, TODAY = getDate(new Date()), EXCEPTION_SEPARATOR = ',', OLD_EXCEPTION_SEPARATOR_REGEXP = /\\;/g, RECURRENCE_EXCEPTION = 'recurrenceException', DELETECONFIRM = 'Are you sure you want to delete this event?', DELETERECURRING = 'Do you want to delete only this event occurrence or the whole series?', EDITRECURRING = 'Do you want to edit only this event occurrence or the whole series?', DELETERECURRINGCONFIRM = 'Are you sure you want to delete this event occurrence?', RESETSERIESCONFIRM = 'Are you sure you want to reset the whole series?', DELETESERIESCONFIRM = 'Are you sure you want to delete the whole series?', COMMANDBUTTONTMPL = '<a class=\"k-button #=className#\" #=attr# href=\"\\\\#\">#=text#</a>', VIEWBUTTONTEMPLATE = kendo.template('<li class=\"k-current-view\" data-#=ns#name=\"#=view#\"><a role=\"button\" href=\"\\\\#\" class=\"k-link\">${views[view].title}</a></li>'), TOOLBARTEMPLATE = kendo.template('<div class=\"k-floatwrap k-header k-scheduler-toolbar\">' + '# if (pdf) { #' + '<ul class=\"k-reset k-scheduler-tools\">' + '<li><a role=\"button\" href=\"\\\\#\" class=\"k-button k-pdf\"><span class=\"k-icon k-i-file-pdf\"></span>${messages.pdf}</a></li>' + '</ul>' + '# } #' + '<ul class=\"k-reset k-scheduler-navigation\">' + '<li class=\"k-state-default k-header k-nav-today\"><a role=\"button\" href=\"\\\\#\" class=\"k-link\" title=\"${messages.today}\">${messages.today}</a></li>' + '<li class=\"k-state-default k-header k-nav-prev\"><a role=\"button\" href=\"\\\\#\" class=\"k-link\" title=\"${messages.previous}\" aria-label=\"${messages.previous}\"><span class=\"k-icon k-i-arrow-60-left\" style=\"pointer-events: none\"></span></a></li>' + '<li class=\"k-state-default k-header k-nav-next\"><a role=\"button\" href=\"\\\\#\" class=\"k-link\" title=\"${messages.next}\" aria-label=\"${messages.next}\"><span class=\"k-icon k-i-arrow-60-right\" style=\"pointer-events: none\"></span></a></li>' + '<li class=\"k-state-default k-nav-current\">' + '<a role=\"button\" href=\"\\\\#\" class=\"k-link\">' + '<span class=\"k-icon k-i-calendar\"></span>' + '<span class=\"k-sm-date-format\" data-#=ns#bind=\"text: formattedShortDate\"></span>' + '<span class=\"k-lg-date-format\" data-#=ns#bind=\"text: formattedDate\"></span>' + '</a>' + '</li>' + '</ul>' + '#if(viewsCount === 1){#' + '<a role=\"button\" data-#=ns#name=\"#=view#\" href=\"\\\\#\" class=\"k-link k-scheduler-refresh\">' + '<span class=\"k-icon k-i-reload\"></span>' + '</a>' + '#}else{#' + '<ul class=\"k-reset k-header k-scheduler-views\">' + '#for(var view in views){#' + '<li class=\"k-state-default k-view-#= view.toLowerCase() #\" data-#=ns#name=\"#=view#\"><a role=\"button\" href=\"\\\\#\" class=\"k-link\">${views[view].title}</a></li>' + '#}#' + '</ul>' + '#}#' + '</div>'), MOBILETOOLBARTEMPLATE = kendo.template('<div class=\"k-floatwrap k-header k-scheduler-toolbar\">' + '# if (pdf) { #' + '<ul class=\"k-reset k-scheduler-tools\">' + '<li><a role=\"button\" href=\"\\\\#\" class=\"k-button k-pdf\"><span class=\"k-icon k-i-file-pdf\"></span>${messages.pdf}</a></li>' + '</ul>' + '# } #' + '<ul class=\"k-reset k-header k-scheduler-navigation\">' + '<li class=\"k-state-default k-nav-today\"><a role=\"button\" href=\"\\\\#\" class=\"k-link\">${messages.today}</a></li>' + '</ul>' + '#if(viewsCount === 1){#' + '<a role=\"button\" data-#=ns#name=\"#=view#\" href=\"\\\\#\" class=\"k-link k-scheduler-refresh\">' + '<span class=\"k-icon k-i-reload\"></span>' + '</a>' + '#}else{#' + '<ul class=\"k-reset k-header k-scheduler-views\">' + '#for(var view in views){#' + '<li class=\"k-state-default k-view-#= view.toLowerCase() #\" data-#=ns#name=\"#=view#\"><a role=\"button\" href=\"\\\\#\" class=\"k-link\">${views[view].title}</a></li>' + '#}#' + '</ul>' + '#}#' + '</div>' + '<div class=\"k-floatwrap k-header k-scheduler-toolbar\">' + '<ul class=\"k-reset k-header k-scheduler-navigation\">' + '<li class=\"k-state-default k-nav-prev\"><a role=\"button\" href=\"\\\\#\" class=\"k-link\"><span class=\"k-icon k-i-arrow-60-left\"></span></a></li>' + '<li class=\"k-state-default k-nav-current\">' + '<span class=\"k-sm-date-format\" data-#=ns#bind=\"text: formattedShortDate\"></span>' + '<span class=\"k-lg-date-format\" data-#=ns#bind=\"text: formattedDate\"></span>' + '</li>' + '<li class=\"k-state-default k-nav-next\"><a role=\"button\" href=\"\\\\#\" class=\"k-link\"><span class=\"k-icon k-i-arrow-60-right\"></span></a></li>' + '</ul>' + '</div>'), MOBILEDATERANGEEDITOR = function (container, options) {\n                var attr = {\n                    name: options.field,\n                    title: options.title\n                };\n                var datepicker_role = !input_support.date ? kendo.attr('role') + '=\"datepicker\" ' : '';\n                var datetimepicker_role = kendo.attr('role') + '=\"datetimepicker\" ';\n                var isAllDay = options.model.isAllDay;\n                var dateTimeValidate = kendo.attr('validate') + '=\\'' + !isAllDay + '\\'';\n                var dateValidate = kendo.attr('validate') + '=\\'' + isAllDay + '\\'';\n                appendTimezoneAttr(attr, options);\n                appendDateCompareValidator(attr, options);\n                $('<input type=\"datetime-local\" required ' + kendo.attr('type') + '=\"date\" ' + datetimepicker_role + kendo.attr('bind') + '=\"value:' + options.field + ',invisible:isAllDay\" ' + dateTimeValidate + '/>').attr(attr).appendTo(container);\n                $('<input type=\"date\" required ' + kendo.attr('type') + '=\"date\" ' + datepicker_role + kendo.attr('bind') + '=\"value:' + options.field + ',visible:isAllDay\" ' + dateValidate + '/>').attr(attr).appendTo(container);\n                $('<span ' + kendo.attr('for') + '=\"' + options.field + '\" class=\"k-invalid-msg\"/>').hide().appendTo(container);\n            }, DATERANGEEDITOR = function (container, options) {\n                var attr = {\n                        name: options.field,\n                        title: options.title\n                    }, isAllDay = options.model.isAllDay, dateTimeValidate = kendo.attr('validate') + '=\\'' + !isAllDay + '\\' ', dateValidate = kendo.attr('validate') + '=\\'' + isAllDay + '\\' ';\n                appendTimezoneAttr(attr, options);\n                appendDateCompareValidator(attr, options);\n                $('<input type=\"text\" required ' + kendo.attr('type') + '=\"date\"' + ' ' + kendo.attr('role') + '=\"datetimepicker\" ' + kendo.attr('bind') + '=\"value:' + options.field + ',invisible:isAllDay\" ' + dateTimeValidate + '/>').attr(attr).appendTo(container);\n                $('<input type=\"text\" required ' + kendo.attr('type') + '=\"date\"' + ' ' + kendo.attr('role') + '=\"datepicker\" ' + kendo.attr('bind') + '=\"value:' + options.field + ',visible:isAllDay\" ' + dateValidate + '/>').attr(attr).appendTo(container);\n                $('<span ' + kendo.attr('bind') + '=\"text: ' + options.field + 'Timezone\"></span>').appendTo(container);\n                if (options.field === 'end') {\n                    $('<span ' + kendo.attr('bind') + '=\"text: startTimezone, invisible: endTimezone\"></span>').appendTo(container);\n                }\n                $('<span ' + kendo.attr('for') + '=\"' + options.field + '\" class=\"k-invalid-msg\"/>').hide().appendTo(container);\n            }, RECURRENCEEDITOR = function (container, options) {\n                $('<div ' + kendo.attr('bind') + '=\"value:' + options.field + '\" />').attr({ name: options.field }).appendTo(container).kendoRecurrenceEditor({\n                    start: options.model.start,\n                    timezone: options.timezone,\n                    messages: options.messages\n                });\n            }, MOBILERECURRENCEEDITOR = function (container, options) {\n                $('<div ' + kendo.attr('bind') + '=\"value:' + options.field + '\" />').attr({ name: options.field }).appendTo(container).kendoMobileRecurrenceEditor({\n                    start: options.model.start,\n                    timezone: options.timezone,\n                    messages: options.messages,\n                    pane: options.pane,\n                    value: options.model[options.field]\n                });\n            }, MOBILETIMEZONEPOPUP = function (container, options) {\n                var text = timezoneButtonText(options.model, options.messages.noTimezone);\n                $('<a href=\"#\" class=\"k-button k-timezone-button\" data-bind=\"invisible:isAllDay\">' + text + '</a>').click(options.click).appendTo(container);\n            }, TIMEZONEPOPUP = function (container, options) {\n                $('<a href=\"#\" class=\"k-button\" data-bind=\"invisible:isAllDay\">' + options.messages.timezoneEditorButton + '</a>').click(options.click).appendTo(container);\n            }, MOBILETIMEZONEEDITOR = function (container, options) {\n                $('<div ' + kendo.attr('bind') + '=\"value:' + options.field + '\" />').attr({ name: options.field }).toggle(options.visible).appendTo(container).kendoMobileTimezoneEditor({ optionLabel: options.noTimezone });\n            }, TIMEZONEEDITOR = function (container, options) {\n                var visible = options.visible || options.visible === undefined;\n                $('<div ' + kendo.attr('bind') + '=\"value:' + options.field + '\" />').attr({ name: options.field }).toggle(visible).appendTo(container).kendoTimezoneEditor({\n                    optionLabel: options.noTimezone,\n                    title: options.title\n                });\n            };\n        function timezoneButtonText(model, message) {\n            message = message || '';\n            if (model.startTimezone) {\n                message = model.startTimezone;\n                if (model.endTimezone) {\n                    message += ' | ' + model.endTimezone;\n                }\n            }\n            return message;\n        }\n        function appendTimezoneAttr(attrs, options) {\n            var timezone = options.timezone;\n            if (timezone) {\n                attrs[kendo.attr('timezone')] = timezone;\n            }\n        }\n        function appendDateCompareValidator(attrs, options) {\n            var validationRules = options.model.fields[options.field].validation;\n            if (validationRules) {\n                var dateCompareRule = validationRules.dateCompare;\n                if (dateCompareRule && isPlainObject(dateCompareRule) && dateCompareRule.message) {\n                    attrs[kendo.attr('dateCompare-msg')] = dateCompareRule.message;\n                }\n            }\n        }\n        function wrapDataAccess(originalFunction, timezone) {\n            return function (data) {\n                data = originalFunction(data);\n                convertData(data, 'apply', timezone);\n                return data || [];\n            };\n        }\n        function wrapDataSerialization(originalFunction, timezone) {\n            return function (data) {\n                if (data) {\n                    if (toString.call(data) !== '[object Array]' && !(data instanceof kendo.data.ObservableArray)) {\n                        data = [data];\n                    }\n                }\n                convertData(data, 'remove', timezone, true);\n                data = originalFunction(data);\n                return data || [];\n            };\n        }\n        function convertData(data, method, timezone, removeUid) {\n            var event, idx, length;\n            data = data || [];\n            for (idx = 0, length = data.length; idx < length; idx++) {\n                event = data[idx];\n                if (removeUid) {\n                    if (event.startTimezone || event.endTimezone) {\n                        if (timezone) {\n                            event.start = kendo.timezone.convert(event.start, event.startTimezone || event.endTimezone, timezone);\n                            event.end = kendo.timezone.convert(event.end, event.endTimezone || event.startTimezone, timezone);\n                            event.start = kendo.timezone[method](event.start, timezone);\n                            event.end = kendo.timezone[method](event.end, timezone);\n                        } else {\n                            event.start = kendo.timezone[method](event.start, event.startTimezone || event.endTimezone);\n                            event.end = kendo.timezone[method](event.end, event.endTimezone || event.startTimezone);\n                        }\n                    } else if (timezone) {\n                        event.start = kendo.timezone[method](event.start, timezone);\n                        event.end = kendo.timezone[method](event.end, timezone);\n                    }\n                } else {\n                    if (event.startTimezone || event.endTimezone) {\n                        event.start = kendo.timezone[method](event.start, event.startTimezone || event.endTimezone);\n                        event.end = kendo.timezone[method](event.end, event.endTimezone || event.startTimezone);\n                        if (timezone) {\n                            event.start = kendo.timezone.convert(event.start, event.startTimezone || event.endTimezone, timezone);\n                            event.end = kendo.timezone.convert(event.end, event.endTimezone || event.startTimezone, timezone);\n                        }\n                    } else if (timezone) {\n                        event.start = kendo.timezone[method](event.start, timezone);\n                        event.end = kendo.timezone[method](event.end, timezone);\n                    }\n                }\n                if (removeUid) {\n                    delete event.uid;\n                }\n            }\n            return data;\n        }\n        function getOccurrenceByUid(data, uid) {\n            var length = data.length, idx = 0, event;\n            for (; idx < length; idx++) {\n                event = data[idx];\n                if (event.uid === uid) {\n                    return event;\n                }\n            }\n        }\n        var SchedulerDataReader = kendo.Class.extend({\n            init: function (schema, reader) {\n                var timezone = schema.timezone;\n                this.reader = reader;\n                if (reader.model) {\n                    this.model = reader.model;\n                }\n                this.timezone = timezone;\n                this.data = wrapDataAccess($.proxy(this.data, this), timezone);\n                this.serialize = wrapDataSerialization($.proxy(this.serialize, this), timezone);\n            },\n            errors: function (data) {\n                return this.reader.errors(data);\n            },\n            parse: function (data) {\n                return this.reader.parse(data);\n            },\n            data: function (data) {\n                return this.reader.data(data);\n            },\n            total: function (data) {\n                return this.reader.total(data);\n            },\n            groups: function (data) {\n                return this.reader.groups(data);\n            },\n            aggregates: function (data) {\n                return this.reader.aggregates(data);\n            },\n            serialize: function (data) {\n                return this.reader.serialize(data);\n            }\n        });\n        function applyZone(date, fromZone, toZone) {\n            if (toZone) {\n                date = kendo.timezone.convert(date, fromZone, toZone);\n            } else {\n                date = kendo.timezone.remove(date, fromZone);\n            }\n            return date;\n        }\n        function dateCompareValidator(input) {\n            if (input.filter('[name=end]').length) {\n                var container = input.closest('.k-scheduler-edit-form');\n                var startInput = container.find('[name=start]:visible');\n                var endInput = container.find('[name=end]:visible');\n                if (endInput[0] && startInput[0]) {\n                    var start, end;\n                    var startPicker = kendo.widgetInstance(startInput, kendo.ui);\n                    var endPicker = kendo.widgetInstance(endInput, kendo.ui);\n                    var editable = container.data('kendoEditable');\n                    var model = editable ? editable.options.model : null;\n                    if (startPicker && endPicker) {\n                        start = startPicker.value();\n                        end = endPicker.value();\n                    } else {\n                        start = kendo.parseDate(startInput.val());\n                        end = kendo.parseDate(endInput.val());\n                    }\n                    if (start && end) {\n                        if (model) {\n                            var timezone = startInput.attr(kendo.attr('timezone'));\n                            var startTimezone = model.startTimezone;\n                            var endTimezone = model.endTimezone;\n                            startTimezone = startTimezone || endTimezone;\n                            endTimezone = endTimezone || startTimezone;\n                            if (startTimezone) {\n                                start = applyZone(start, startTimezone, timezone);\n                                end = applyZone(end, endTimezone, timezone);\n                            }\n                        }\n                        return start <= end;\n                    }\n                }\n            }\n            return true;\n        }\n        var SchedulerEvent = kendo.data.Model.define({\n            init: function (value) {\n                var that = this;\n                kendo.data.Model.fn.init.call(that, value);\n                that._defaultId = that.defaults[that.idField];\n            },\n            _time: function (field) {\n                var date = this[field];\n                var fieldTime = '_' + field + 'Time';\n                if (this[fieldTime]) {\n                    return this[fieldTime] - kendo.date.toUtcTime(kendo.date.getDate(date));\n                }\n                return getMilliseconds(date);\n            },\n            _date: function (field) {\n                var fieldTime = '_' + field + 'Time';\n                if (this[fieldTime]) {\n                    return this[fieldTime] - this._time(field);\n                }\n                return kendo.date.getDate(this[field]);\n            },\n            clone: function (options, updateUid) {\n                var uid = this.uid, event = new this.constructor($.extend({}, this.toJSON(), options));\n                if (!updateUid) {\n                    event.uid = uid;\n                }\n                return event;\n            },\n            duration: function () {\n                var end = this.end;\n                var start = this.start;\n                var offset = (end.getTimezoneOffset() - start.getTimezoneOffset()) * kendo.date.MS_PER_MINUTE;\n                return end - start - offset;\n            },\n            expand: function (start, end, zone) {\n                return recurrence ? recurrence.expand(this, start, end, zone) : [this];\n            },\n            update: function (eventInfo) {\n                for (var field in eventInfo) {\n                    this.set(field, eventInfo[field]);\n                }\n                if (this._startTime) {\n                    this.set('_startTime', kendo.date.toUtcTime(this.start));\n                }\n                if (this._endTime) {\n                    this.set('_endTime', kendo.date.toUtcTime(this.end));\n                }\n            },\n            isMultiDay: function () {\n                return this.isAllDay || this.duration() >= kendo.date.MS_PER_DAY;\n            },\n            isException: function () {\n                return !this.isNew() && this.recurrenceId;\n            },\n            isOccurrence: function () {\n                return this.isNew() && this.recurrenceId;\n            },\n            isRecurring: function () {\n                return !!(this.recurrenceRule || this.recurrenceId);\n            },\n            isRecurrenceHead: function () {\n                return !!(this.id && this.recurrenceRule);\n            },\n            toOccurrence: function (options) {\n                options = $.extend(options, {\n                    recurrenceException: null,\n                    recurrenceRule: null,\n                    recurrenceId: this.id || this.recurrenceId\n                });\n                options[this.idField] = this.defaults[this.idField];\n                return this.clone(options, true);\n            },\n            toJSON: function () {\n                var obj = kendo.data.Model.fn.toJSON.call(this);\n                obj.uid = this.uid;\n                delete obj._startTime;\n                delete obj._endTime;\n                return obj;\n            },\n            shouldSerialize: function (field) {\n                return kendo.data.Model.fn.shouldSerialize.call(this, field) && field !== '_defaultId';\n            },\n            set: function (key, value) {\n                var isAllDay = this.isAllDay || false;\n                kendo.data.Model.fn.set.call(this, key, value);\n                if (key == 'isAllDay' && value != isAllDay) {\n                    var start = kendo.date.getDate(this.start);\n                    var end = new Date(this.end);\n                    var milliseconds = kendo.date.getMilliseconds(end);\n                    if (milliseconds === 0 && value) {\n                        milliseconds = MS_PER_DAY;\n                    }\n                    this.set('start', start);\n                    if (value === true) {\n                        kendo.date.setTime(end, -milliseconds);\n                        if (end < start) {\n                            end = start;\n                        }\n                    } else {\n                        kendo.date.setTime(end, MS_PER_DAY - milliseconds);\n                    }\n                    this.set('end', end);\n                }\n            },\n            id: 'id',\n            fields: {\n                id: { type: 'number' },\n                title: {\n                    defaultValue: '',\n                    type: 'string'\n                },\n                start: {\n                    type: 'date',\n                    validation: { required: true }\n                },\n                startTimezone: { type: 'string' },\n                end: {\n                    type: 'date',\n                    validation: {\n                        required: true,\n                        dateCompare: { value: dateCompareValidator }\n                    }\n                },\n                endTimezone: { type: 'string' },\n                recurrenceRule: {\n                    defaultValue: '',\n                    type: 'string'\n                },\n                recurrenceException: {\n                    defaultValue: '',\n                    type: 'string'\n                },\n                isAllDay: {\n                    type: 'boolean',\n                    defaultValue: false\n                },\n                description: { type: 'string' }\n            }\n        });\n        var SchedulerDataSource = DataSource.extend({\n            init: function (options) {\n                DataSource.fn.init.call(this, extend(true, {}, {\n                    schema: {\n                        modelBase: SchedulerEvent,\n                        model: SchedulerEvent\n                    }\n                }, options));\n                this.reader = new SchedulerDataReader(this.options.schema, this.reader);\n            },\n            expand: function (start, end) {\n                var data = this.view(), filter = {}, endOffset;\n                if (start && end) {\n                    endOffset = end.getTimezoneOffset();\n                    end = new Date(end.getTime() + MS_PER_DAY - 1);\n                    if (end.getTimezoneOffset() !== endOffset) {\n                        end = kendo.timezone.apply(end, endOffset);\n                    }\n                    filter = {\n                        logic: 'or',\n                        filters: [\n                            {\n                                logic: 'and',\n                                filters: [\n                                    {\n                                        field: 'start',\n                                        operator: 'gte',\n                                        value: start\n                                    },\n                                    {\n                                        field: 'end',\n                                        operator: 'gte',\n                                        value: start\n                                    },\n                                    {\n                                        field: 'start',\n                                        operator: 'lte',\n                                        value: end\n                                    }\n                                ]\n                            },\n                            {\n                                logic: 'and',\n                                filters: [\n                                    {\n                                        field: 'start',\n                                        operator: 'lte',\n                                        value: new Date(start.getTime() + MS_PER_DAY - 1)\n                                    },\n                                    {\n                                        field: 'end',\n                                        operator: 'gte',\n                                        value: start\n                                    }\n                                ]\n                            }\n                        ]\n                    };\n                    data = new kendo.data.Query(expandAll(data, start, end, this.reader.timezone)).filter(filter).toArray();\n                }\n                return data;\n            },\n            cancelChanges: function (model) {\n                if (model && model.isOccurrence()) {\n                    this._removeExceptionDate(model);\n                }\n                DataSource.fn.cancelChanges.call(this, model);\n            },\n            insert: function (index, model) {\n                if (!model) {\n                    return;\n                }\n                if (!(model instanceof SchedulerEvent)) {\n                    var eventInfo = model;\n                    model = this._createNewModel();\n                    model.accept(eventInfo);\n                }\n                if (!this._pushCreated && model.isRecurrenceHead() || model.recurrenceId) {\n                    model = model.recurrenceId ? model : model.toOccurrence();\n                    this._addExceptionDate(model);\n                }\n                return DataSource.fn.insert.call(this, index, model);\n            },\n            pushCreate: function (items) {\n                this._pushCreated = true;\n                DataSource.fn.pushCreate.call(this, items);\n                this._pushCreated = false;\n            },\n            remove: function (model) {\n                if (model.isRecurrenceHead()) {\n                    this._removeExceptions(model);\n                } else if (model.isRecurring()) {\n                    this._addExceptionDate(model);\n                }\n                return DataSource.fn.remove.call(this, model);\n            },\n            _removeExceptions: function (model) {\n                var data = this.data().slice(0), item = data.shift(), id = model.id;\n                while (item) {\n                    if (item.recurrenceId === id) {\n                        DataSource.fn.remove.call(this, item);\n                    }\n                    item = data.shift();\n                }\n                model.set(RECURRENCE_EXCEPTION, '');\n            },\n            _removeExceptionDate: function (model) {\n                if (model.recurrenceId) {\n                    var head = this.get(model.recurrenceId);\n                    if (head) {\n                        var start = model.defaults.start;\n                        var replaceRegExp = new RegExp('(\\\\' + EXCEPTION_SEPARATOR + '?)' + recurrence.toExceptionString(start, this.reader.timezone));\n                        var recurrenceException = (head.recurrenceException || '').replace(OLD_EXCEPTION_SEPARATOR_REGEXP, EXCEPTION_SEPARATOR).replace(/\\,$/, '');\n                        if (replaceRegExp.test(recurrenceException)) {\n                            head.set(RECURRENCE_EXCEPTION, recurrenceException.replace(replaceRegExp, ''));\n                        } else {\n                            start = model.start;\n                            replaceRegExp = new RegExp('(\\\\' + EXCEPTION_SEPARATOR + '?)' + recurrence.toExceptionString(start, this.reader.timezone));\n                            head.set(RECURRENCE_EXCEPTION, recurrenceException.replace(replaceRegExp, ''));\n                        }\n                    }\n                }\n            },\n            _addExceptionDate: function (model) {\n                var start = model.start;\n                var zone = this.reader.timezone;\n                var head = this.get(model.recurrenceId);\n                var recurrenceException = (head.recurrenceException || '').replace(OLD_EXCEPTION_SEPARATOR_REGEXP, EXCEPTION_SEPARATOR).replace(/\\,$/, '');\n                if (!recurrence.isException(recurrenceException, start, zone)) {\n                    var newException = recurrence.toExceptionString(start, zone);\n                    model.defaults.start = start;\n                    head.set(RECURRENCE_EXCEPTION, recurrenceException + (recurrenceException && newException ? EXCEPTION_SEPARATOR : '') + newException);\n                }\n            }\n        });\n        function expandAll(events, start, end, zone) {\n            var length = events.length, data = [], idx = 0;\n            for (; idx < length; idx++) {\n                data = data.concat(events[idx].expand(start, end, zone));\n            }\n            return data;\n        }\n        SchedulerDataSource.create = function (options) {\n            if (isArray(options) || options instanceof kendo.data.ObservableArray) {\n                options = { data: options };\n            }\n            var dataSource = options || {}, data = dataSource.data;\n            dataSource.data = data;\n            if (!(dataSource instanceof SchedulerDataSource) && dataSource instanceof kendo.data.DataSource) {\n                throw new Error('Incorrect DataSource type. Only SchedulerDataSource instances are supported');\n            }\n            return dataSource instanceof SchedulerDataSource ? dataSource : new SchedulerDataSource(dataSource);\n        };\n        extend(true, kendo.data, {\n            SchedulerDataSource: SchedulerDataSource,\n            SchedulerDataReader: SchedulerDataReader,\n            SchedulerEvent: SchedulerEvent\n        });\n        var defaultCommands = {\n            update: {\n                text: 'Save',\n                className: 'k-primary k-scheduler-update'\n            },\n            canceledit: {\n                text: 'Cancel',\n                className: 'k-scheduler-cancel'\n            },\n            destroy: {\n                text: 'Delete',\n                imageClass: 'k-i-close',\n                className: 'k-primary k-scheduler-delete',\n                iconClass: 'k-icon'\n            }\n        };\n        function trimOptions(options) {\n            delete options.name;\n            delete options.prefix;\n            delete options.remove;\n            delete options.edit;\n            delete options.add;\n            delete options.navigate;\n            return options;\n        }\n        function createValidationAttributes(model, field) {\n            var modelField = (model.fields || model)[field];\n            var specialRules = [\n                'url',\n                'email',\n                'number',\n                'date',\n                'boolean'\n            ];\n            var validation = modelField ? modelField.validation : {};\n            var datatype = kendo.attr('type');\n            var inArray = $.inArray;\n            var ruleName;\n            var rule;\n            var attr = {};\n            for (ruleName in validation) {\n                rule = validation[ruleName];\n                if (inArray(ruleName, specialRules) >= 0) {\n                    attr[datatype] = ruleName;\n                } else if (!kendo.isFunction(rule)) {\n                    attr[ruleName] = isPlainObject(rule) ? rule.value || ruleName : rule;\n                }\n                attr[kendo.attr(ruleName + '-msg')] = rule.message;\n            }\n            return attr;\n        }\n        function dropDownResourceEditor(resource, model) {\n            var attr = createValidationAttributes(model, resource.field);\n            return function (container) {\n                $(kendo.format('<select data-{0}bind=\"value:{1}\" title=\"' + model.title + '\">', kendo.ns, resource.field)).appendTo(container).attr(attr).kendoDropDownList({\n                    dataTextField: resource.dataTextField,\n                    dataValueField: resource.dataValueField,\n                    dataSource: resource.dataSource,\n                    valuePrimitive: resource.valuePrimitive,\n                    optionLabel: 'None',\n                    template: kendo.format('<span class=\"k-scheduler-mark\" style=\"background-color:#= data.{0}?{0}:\"none\" #\"></span>#={1}#', resource.dataColorField, resource.dataTextField)\n                });\n            };\n        }\n        function descriptionEditor(options) {\n            var attr = createValidationAttributes(options.model, options.field);\n            return function (container, model) {\n                $('<textarea name=\"description\" class=\"k-textbox\" title=\"' + model.title + '\"/>').attr(attr).appendTo(container);\n            };\n        }\n        function multiSelectResourceEditor(resource, model) {\n            var attr = createValidationAttributes(model, resource.field);\n            return function (container) {\n                $(kendo.format('<select data-{0}bind=\"value:{1}\">', kendo.ns, resource.field)).appendTo(container).attr(attr).kendoMultiSelect({\n                    dataTextField: resource.dataTextField,\n                    dataValueField: resource.dataValueField,\n                    dataSource: resource.dataSource,\n                    valuePrimitive: resource.valuePrimitive,\n                    itemTemplate: kendo.format('<span class=\"k-scheduler-mark\" style=\"background-color:#= data.{0}?{0}:\"none\" #\"></span>#={1}#', resource.dataColorField, resource.dataTextField),\n                    tagTemplate: kendo.format('<span class=\"k-scheduler-mark\" style=\"background-color:#= data.{0}?{0}:\"none\" #\"></span>#={1}#', resource.dataColorField, resource.dataTextField)\n                });\n            };\n        }\n        function multiSelectResourceEditorMobile(resource, model) {\n            var attr = createValidationAttributes(model, resource.field);\n            return function (container) {\n                var options = '';\n                var view = resource.dataSource.view();\n                for (var idx = 0, length = view.length; idx < length; idx++) {\n                    options += kendo.format('<option value=\"{0}\">{1}</option>', kendo.getter(resource.dataValueField)(view[idx]), kendo.getter(resource.dataTextField)(view[idx]));\n                }\n                $(kendo.format('<select data-{0}bind=\"value:{1}\" multiple=\"multiple\" data-{0}value-primitive=\"{3}\">{2}</select>', kendo.ns, resource.field, options, resource.valuePrimitive)).appendTo(container).attr(attr);\n            };\n        }\n        function moveEventRange(event, distance) {\n            var duration = event.end.getTime() - event.start.getTime();\n            var start = new Date(event.start.getTime());\n            kendo.date.setTime(start, distance);\n            var end = new Date(start.getTime());\n            kendo.date.setTime(end, duration, true);\n            return {\n                start: start,\n                end: end\n            };\n        }\n        var editors = {\n            mobile: {\n                dateRange: MOBILEDATERANGEEDITOR,\n                timezonePopUp: MOBILETIMEZONEPOPUP,\n                timezone: MOBILETIMEZONEEDITOR,\n                recurrence: MOBILERECURRENCEEDITOR,\n                description: descriptionEditor,\n                multipleResources: multiSelectResourceEditorMobile,\n                resources: dropDownResourceEditor\n            },\n            desktop: {\n                dateRange: DATERANGEEDITOR,\n                timezonePopUp: TIMEZONEPOPUP,\n                timezone: TIMEZONEEDITOR,\n                recurrence: RECURRENCEEDITOR,\n                description: descriptionEditor,\n                multipleResources: multiSelectResourceEditor,\n                resources: dropDownResourceEditor\n            }\n        };\n        var Editor = kendo.Observable.extend({\n            init: function (element, options) {\n                kendo.Observable.fn.init.call(this);\n                this.element = element;\n                this.options = extend(true, {}, this.options, options);\n                this.createButton = this.options.createButton;\n                this.toggleDateValidationHandler = proxy(this._toggleDateValidation, this);\n            },\n            _toggleDateValidation: function (e) {\n                if (e.field == 'isAllDay') {\n                    var container = this.container, isAllDay = this.editable.options.model.isAllDay, bindAttribute = kendo.attr('bind'), element, isDateTimeInput, shouldValidate;\n                    container.find('[' + bindAttribute + '*=end],[' + bindAttribute + '*=start]').each(function () {\n                        element = $(this);\n                        if (valueStartEndBoundRegex.test(element.attr(bindAttribute))) {\n                            isDateTimeInput = element.is('[' + kendo.attr('role') + '=datetimepicker],[type*=datetime]');\n                            shouldValidate = isAllDay !== isDateTimeInput;\n                            element.attr(kendo.attr('validate'), shouldValidate);\n                        }\n                    });\n                }\n            },\n            fields: function (editors, model) {\n                var that = this;\n                var messages = that.options.messages;\n                var timezone = that.options.timezone;\n                var click = function (e) {\n                    e.preventDefault();\n                    that._initTimezoneEditor(model, this);\n                };\n                var fields = [\n                    {\n                        field: 'title',\n                        title: messages.editor.title\n                    },\n                    {\n                        field: 'start',\n                        title: messages.editor.start,\n                        editor: editors.dateRange,\n                        timezone: timezone\n                    },\n                    {\n                        field: 'end',\n                        title: messages.editor.end,\n                        editor: editors.dateRange,\n                        timezone: timezone\n                    },\n                    {\n                        field: 'isAllDay',\n                        title: messages.editor.allDayEvent\n                    }\n                ];\n                if (kendo.timezone.windows_zones) {\n                    fields.push({\n                        field: 'timezone',\n                        title: messages.editor.timezone,\n                        editor: editors.timezonePopUp,\n                        click: click,\n                        messages: messages.editor,\n                        model: model\n                    });\n                    fields.push({\n                        field: 'startTimezone',\n                        title: messages.editor.startTimezone,\n                        editor: editors.timezone,\n                        noTimezone: messages.editor.noTimezone\n                    });\n                    fields.push({\n                        field: 'endTimezone',\n                        title: messages.editor.endTimezone,\n                        editor: editors.timezone,\n                        noTimezone: messages.editor.noTimezone\n                    });\n                }\n                if (!model.recurrenceId) {\n                    fields.push({\n                        field: 'recurrenceRule',\n                        title: messages.editor.repeat,\n                        editor: editors.recurrence,\n                        timezone: timezone,\n                        messages: messages.recurrenceEditor,\n                        pane: this.pane\n                    });\n                }\n                if ('description' in model) {\n                    fields.push({\n                        field: 'description',\n                        title: messages.editor.description,\n                        editor: editors.description({\n                            model: model,\n                            field: 'description'\n                        })\n                    });\n                }\n                for (var resourceIndex = 0; resourceIndex < this.options.resources.length; resourceIndex++) {\n                    var resource = this.options.resources[resourceIndex];\n                    fields.push({\n                        field: resource.field,\n                        title: resource.title,\n                        editor: resource.multiple ? editors.multipleResources(resource, model) : editors.resources(resource, model)\n                    });\n                }\n                return fields;\n            },\n            end: function () {\n                return this.editable.end();\n            },\n            _buildEditTemplate: function (model, fields, editableFields) {\n                var messages = this.options.messages;\n                var settings = extend({}, kendo.Template, this.options.templateSettings);\n                var paramName = settings.paramName;\n                var template = this.options.editable.template;\n                var html = '';\n                if (template) {\n                    if (typeof template === STRING) {\n                        template = window.unescape(template);\n                    }\n                    html += kendo.template(template, settings)(model);\n                } else {\n                    for (var idx = 0, length = fields.length; idx < length; idx++) {\n                        var field = fields[idx];\n                        if (field.field === 'startTimezone') {\n                            html += '<div class=\"k-popup-edit-form k-scheduler-edit-form k-scheduler-timezones\" style=\"display:none\">';\n                            html += '<div class=\"k-edit-form-container\">';\n                            html += '<div class=\"k-edit-label\"></div>';\n                            html += '<div class=\"k-edit-field\"><label class=\"k-check\"><input class=\"k-timezone-toggle\" type=\"checkbox\" />' + messages.editor.separateTimezones + '</label></div>';\n                        }\n                        html += '<div class=\"k-edit-label\"><label for=\"' + field.field + '\">' + (field.title || field.field || '') + '</label></div>';\n                        if (!model.editable || model.editable(field.field)) {\n                            editableFields.push(field);\n                            html += '<div ' + kendo.attr('container-for') + '=\"' + field.field + '\" class=\"k-edit-field\"></div>';\n                        } else {\n                            var tmpl = '#:';\n                            if (field.field) {\n                                field = kendo.expr(field.field, paramName);\n                                tmpl += field + '==null?\\'\\':' + field;\n                            } else {\n                                tmpl += '\\'\\'';\n                            }\n                            tmpl += '#';\n                            tmpl = kendo.template(tmpl, settings);\n                            html += '<div class=\"k-edit-field\">' + tmpl(model) + '</div>';\n                        }\n                        if (field.field === 'endTimezone') {\n                            html += this._createEndTimezoneButton();\n                        }\n                    }\n                }\n                return html;\n            },\n            _createEndTimezoneButton: function () {\n                return '</div></div>';\n            },\n            _revertTimezones: function (model) {\n                model.set('startTimezone', this._startTimezone);\n                model.set('endTimezone', this._endTimezone);\n                delete this._startTimezone;\n                delete this._endTimezone;\n            }\n        });\n        var MobileEditor = Editor.extend({\n            init: function () {\n                Editor.fn.init.apply(this, arguments);\n                this.pane = kendo.mobile.ui.Pane.wrap(this.element);\n                this.pane.element.parent().css('height', this.options.height);\n                this.view = this.pane.view();\n                this._actionSheetButtonTemplate = kendo.template('<li><a #=attr# class=\"k-button #=className#\" href=\"\\\\#\">#:text#</a></li>');\n                this._actionSheetPopupOptions = $(document.documentElement).hasClass('km-root') ? { modal: false } : {\n                    align: 'bottom center',\n                    position: 'bottom center',\n                    effect: 'slideIn:up'\n                };\n            },\n            options: {\n                animations: {\n                    left: 'slide',\n                    right: 'slide:right'\n                }\n            },\n            destroy: function () {\n                this.close();\n                this.unbind();\n                this.pane.destroy();\n            },\n            _initTimezoneEditor: function (model) {\n                var that = this;\n                var pane = that.pane;\n                var messages = that.options.messages;\n                var timezoneView = that.timezoneView;\n                var container = that.container.find('.k-scheduler-timezones');\n                var checkbox = container.find('.k-timezone-toggle');\n                var endTimezoneRow = container.find('.k-edit-label:last').add(container.find('.k-edit-field:last'));\n                var startTimezoneChange = function (e) {\n                    if (e.field === 'startTimezone') {\n                        var value = model.startTimezone;\n                        checkbox.prop('disabled', !value);\n                        if (!value) {\n                            endTimezoneRow.hide();\n                            model.set('endTimezone', '');\n                            checkbox.prop('checked', false);\n                        }\n                    }\n                };\n                that._startTimezone = model.startTimezone || '';\n                that._endTimezone = model.endTimezone || '';\n                if (!timezoneView) {\n                    var html = '<div data-role=\"view\" class=\"k-popup-edit-form k-scheduler-edit-form k-mobile-list\">' + '<div data-role=\"header\" class=\"k-header\"><a href=\"#\" class=\"k-button k-scheduler-cancel\">' + messages.cancel + '</a>' + messages.editor.timezoneTitle + '<a href=\"#\" class=\"k-button k-scheduler-update\">' + messages.save + '</a></div></div>';\n                    this.timezoneView = timezoneView = pane.append(html);\n                    timezoneView.contentElement().append(container.show());\n                    timezoneView.element.on(CLICK + NS, '.k-scheduler-cancel, .k-scheduler-update', function (e) {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        if ($(this).hasClass('k-scheduler-cancel')) {\n                            that._revertTimezones(model);\n                        }\n                        model.unbind('change', startTimezoneChange);\n                        var editView = pane.element.find('#edit').data('kendoMobileView');\n                        var text = timezoneButtonText(model, messages.editor.noTimezone);\n                        editView.contentElement().find('.k-timezone-button').text(text);\n                        pane.navigate(editView, that.options.animations.right);\n                    });\n                    checkbox.click(function () {\n                        endTimezoneRow.toggle(checkbox.prop('checked'));\n                        model.set('endTimezone', '');\n                    });\n                    model.bind('change', startTimezoneChange);\n                }\n                checkbox.prop('checked', model.endTimezone).prop('disabled', !model.startTimezone);\n                if (model.endTimezone) {\n                    endTimezoneRow.show();\n                } else {\n                    endTimezoneRow.hide();\n                }\n                pane.navigate(timezoneView, that.options.animations.left);\n            },\n            _createActionSheetButton: function (options) {\n                options.template = this._actionSheetButtonTemplate;\n                return this.createButton(options);\n            },\n            showDialog: function (options) {\n                var type = '';\n                var html = '<ul><li class=\"km-actionsheet-title\">' + options.title + '</li>';\n                var target = this.element.find('.k-event[' + kendo.attr('uid') + '=\\'' + options.model.uid + '\\']');\n                if (this.container) {\n                    target = this.container.find('.k-scheduler-delete');\n                    if (target[0]) {\n                        type = 'phone';\n                    }\n                }\n                for (var buttonIndex = 0; buttonIndex < options.buttons.length; buttonIndex++) {\n                    html += this._createActionSheetButton(options.buttons[buttonIndex]);\n                }\n                html += '</ul>';\n                var actionSheet = $(html).appendTo(this.pane.view().element).kendoMobileActionSheet({\n                    type: type,\n                    cancel: this.options.messages.cancel,\n                    cancelTemplate: '<li class=\"km-actionsheet-cancel\"><a class=\"k-button\" href=\"\\\\#\">#:cancel#</a></li>',\n                    close: function () {\n                        this.destroy();\n                    },\n                    command: function (e) {\n                        var buttonIndex = actionSheet.element.find('li:not(.km-actionsheet-cancel) > .k-button').index($(e.currentTarget));\n                        if (buttonIndex > -1) {\n                            actionSheet.close();\n                            options.buttons[buttonIndex].click();\n                        }\n                    },\n                    popup: this._actionSheetPopupOptions\n                }).data('kendoMobileActionSheet');\n                actionSheet.open(target);\n            },\n            editEvent: function (model) {\n                var pane = this.pane;\n                var html = '';\n                var messages = this.options.messages;\n                var updateText = messages.save;\n                var removeText = messages.destroy;\n                var cancelText = messages.cancel;\n                var titleText = messages.editor.editorTitle;\n                var resetSeries = messages.resetSeries;\n                html += '<div data-role=\"view\" class=\"k-popup-edit-form k-scheduler-edit-form k-mobile-list\" id=\"edit\" ' + kendo.attr('uid') + '=\"' + model.uid + '\">' + '<div data-role=\"header\" class=\"k-header\"><a href=\"#\" class=\"k-button k-scheduler-cancel\">' + cancelText + '</a>' + titleText + '<a href=\"#\" class=\"k-button k-scheduler-update\">' + updateText + '</a></div>';\n                var fields = this.fields(editors.mobile, model);\n                var that = this;\n                var editableFields = [];\n                html += this._buildEditTemplate(model, fields, editableFields);\n                if (!model.isNew() && this.options.editable && this.options.editable.destroy !== false && model.isRecurrenceHead() && model.recurrenceException) {\n                    html += '<div class=\"k-edit-buttons\"><a href=\"#\" class=\"k-scheduler-resetSeries k-button\">' + resetSeries + '</a></div>';\n                }\n                if (!model.isNew() && this.options.editable && this.options.editable.destroy !== false) {\n                    html += '<div class=\"k-edit-buttons\"><a href=\"#\" class=\"k-scheduler-delete k-button\">' + removeText + '</a></div>';\n                }\n                html += '</div>';\n                var view = pane.append(html);\n                var container = this.container = view.element;\n                this.editable = container.kendoEditable({\n                    fields: editableFields,\n                    model: model,\n                    clearContainer: false,\n                    target: that.options.target,\n                    validateOnBlur: true\n                }).data('kendoEditable');\n                container.find('input[type=checkbox],input[type=radio]').parent('.k-edit-field').addClass('k-check').prev('.k-edit-label').addClass('k-check').click(function () {\n                    $(this).next().children('input').click();\n                });\n                if (!this.trigger('edit', {\n                        container: container,\n                        model: model\n                    })) {\n                    container.on(CLICK + NS, 'a.k-scheduler-edit, a.k-scheduler-cancel, a.k-scheduler-update, a.k-scheduler-delete, a.k-scheduler-resetSeries', function (e) {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        var button = $(this);\n                        if (!button.hasClass('k-scheduler-edit')) {\n                            var name = 'cancel';\n                            if (button.hasClass('k-scheduler-update')) {\n                                name = 'save';\n                            } else if (button.hasClass('k-scheduler-delete')) {\n                                name = 'remove';\n                            } else if (button.hasClass('k-scheduler-resetSeries')) {\n                                name = RESET;\n                            }\n                            that.trigger(name, {\n                                container: container,\n                                model: model\n                            });\n                        } else {\n                            pane.navigate('#edit', that.options.animations.right);\n                        }\n                    });\n                    pane.navigate(view, that.options.animations.left);\n                    model.bind('change', that.toggleDateValidationHandler);\n                } else {\n                    this.trigger('cancel', {\n                        container: container,\n                        model: model\n                    });\n                }\n                return this.editable;\n            },\n            _views: function () {\n                return this.pane.element.find(kendo.roleSelector('view')).not(this.view.element);\n            },\n            close: function () {\n                if (this.container) {\n                    this.pane.navigate('', this.options.animations.right);\n                    var views = this._views();\n                    var view;\n                    for (var idx = 0, length = views.length; idx < length; idx++) {\n                        view = views.eq(idx).data('kendoMobileView');\n                        if (view) {\n                            view.purge();\n                        }\n                    }\n                    views.remove();\n                    this.container = null;\n                    if (this.editable) {\n                        this.editable.options.model.unbind('change', this.toggleDateValidationHandler);\n                        this.editable.destroy();\n                        this.editable = null;\n                    }\n                    this.timezoneView = null;\n                }\n            }\n        });\n        var PopupEditor = Editor.extend({\n            destroy: function () {\n                this.close();\n                this.unbind();\n            },\n            editEvent: function (model) {\n                var that = this;\n                var editable = that.options.editable;\n                var html = '<div ' + kendo.attr('uid') + '=\"' + model.uid + '\" class=\"k-popup-edit-form k-scheduler-edit-form\"><div class=\"k-edit-form-container\">';\n                var messages = that.options.messages;\n                var updateText = messages.save;\n                var cancelText = messages.cancel;\n                var deleteText = messages.destroy;\n                var resetSeries = messages.resetSeries;\n                var fields = this.fields(editors.desktop, model);\n                var editableFields = [];\n                html += this._buildEditTemplate(model, fields, editableFields);\n                var attr;\n                var options = isPlainObject(editable) ? editable.window : {};\n                html += '<div class=\"k-edit-buttons k-state-default\">';\n                html += this.createButton({\n                    name: 'update',\n                    text: updateText,\n                    attr: attr\n                }) + this.createButton({\n                    name: 'canceledit',\n                    text: cancelText,\n                    attr: attr\n                });\n                if (!model.isNew() && editable.destroy !== false && model.isRecurrenceHead() && model.recurrenceException) {\n                    html += this.createButton({\n                        name: 'resetSeries',\n                        text: resetSeries,\n                        attr: attr\n                    });\n                }\n                if (!model.isNew() && editable.destroy !== false) {\n                    html += this.createButton({\n                        name: 'delete',\n                        text: deleteText,\n                        attr: attr\n                    });\n                }\n                html += '</div></div></div>';\n                var container = this.container = $(html).appendTo(that.element).eq(0).kendoWindow(extend({\n                    modal: true,\n                    resizable: false,\n                    draggable: true,\n                    title: messages.editor.editorTitle,\n                    visible: false,\n                    close: function (e) {\n                        if (e.userTriggered) {\n                            if (that.trigger(CANCEL, {\n                                    container: container,\n                                    model: model\n                                })) {\n                                e.preventDefault();\n                            }\n                        }\n                    }\n                }, options));\n                that.editable = container.kendoEditable({\n                    fields: editableFields,\n                    model: model,\n                    clearContainer: false,\n                    validateOnBlur: true,\n                    target: that.options.target\n                }).data('kendoEditable');\n                if (!that.trigger(EDIT, {\n                        container: container,\n                        model: model\n                    })) {\n                    container.data('kendoWindow').center().open();\n                    container.on(CLICK + NS, 'a.k-scheduler-cancel', function (e) {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        that.trigger(CANCEL, {\n                            container: container,\n                            model: model\n                        });\n                    });\n                    container.on(CLICK + NS, 'a.k-scheduler-update', function (e) {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        that.trigger('save', {\n                            container: container,\n                            model: model\n                        });\n                    });\n                    container.on(CLICK + NS, 'a.k-scheduler-delete', function (e) {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        that.trigger(REMOVE, {\n                            container: container,\n                            model: model\n                        });\n                    });\n                    container.on(CLICK + NS, 'a.k-scheduler-resetSeries', function (e) {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        that.trigger(RESET, {\n                            container: container,\n                            model: model\n                        });\n                    });\n                    kendo.cycleForm(container);\n                    model.bind('change', that.toggleDateValidationHandler);\n                } else {\n                    that.trigger(CANCEL, {\n                        container: container,\n                        model: model\n                    });\n                }\n                return that.editable;\n            },\n            close: function () {\n                var that = this;\n                var destroy = function () {\n                    if (that.editable) {\n                        that.editable.options.model.unbind('change', that.toggleDateValidationHandler);\n                        that.editable.destroy();\n                        that.editable = null;\n                        that.container = null;\n                    }\n                    if (that.popup) {\n                        that.popup.destroy();\n                        that.popup = null;\n                    }\n                };\n                if (that.editable) {\n                    if (that._timezonePopup && that._timezonePopup.data('kendoWindow')) {\n                        that._timezonePopup.data('kendoWindow').destroy();\n                        that._timezonePopup = null;\n                    }\n                    if (that.container.is(':visible')) {\n                        that.container.data('kendoWindow').bind('deactivate', destroy).close();\n                    } else {\n                        destroy();\n                    }\n                } else {\n                    destroy();\n                }\n            },\n            _createEndTimezoneButton: function () {\n                var messages = this.options.messages;\n                var html = '';\n                html += '<div class=\"k-edit-buttons k-state-default\">';\n                html += this.createButton({\n                    name: 'savetimezone',\n                    text: messages.save\n                }) + this.createButton({\n                    name: 'canceltimezone',\n                    text: messages.cancel\n                });\n                html += '</div></div></div>';\n                return html;\n            },\n            showDialog: function (options) {\n                var html = kendo.format('<div class=\\'k-popup-edit-form\\'><div class=\\'k-edit-form-container\\'><p class=\\'k-popup-message\\'>{0}</p>', options.text);\n                html += '<div class=\"k-edit-buttons k-state-default\">';\n                for (var buttonIndex = 0; buttonIndex < options.buttons.length; buttonIndex++) {\n                    html += this.createButton(options.buttons[buttonIndex]);\n                }\n                html += '</div></div></div>';\n                var wrapper = this.element;\n                if (this.popup) {\n                    this.popup.destroy();\n                }\n                var popup = this.popup = $(html).appendTo(wrapper).eq(0).on(CLICK, '.k-button', function (e) {\n                    e.preventDefault();\n                    popup.close();\n                    var buttonIndex = $(e.currentTarget).index();\n                    options.buttons[buttonIndex].click();\n                }).kendoWindow({\n                    modal: true,\n                    resizable: false,\n                    draggable: false,\n                    title: options.title,\n                    visible: false,\n                    close: function () {\n                        this.destroy();\n                        wrapper.focus();\n                    }\n                }).getKendoWindow();\n                popup.center().open();\n            },\n            _initTimezoneEditor: function (model, activator) {\n                var that = this;\n                var container = that.container.find('.k-scheduler-timezones');\n                var checkbox = container.find('.k-timezone-toggle');\n                var endTimezoneRow = container.find('.k-edit-label:last').add(container.find('.k-edit-field:last'));\n                var saveButton = container.find('.k-scheduler-savetimezone');\n                var cancelButton = container.find('.k-scheduler-canceltimezone');\n                var timezonePopup = that._timezonePopup;\n                var startTimezoneChange = function (e) {\n                    if (e.field === 'startTimezone') {\n                        var value = model.startTimezone;\n                        checkbox.prop('disabled', !value);\n                        if (!value) {\n                            endTimezoneRow.hide();\n                            model.set('endTimezone', '');\n                            checkbox.prop('checked', false);\n                        }\n                    }\n                };\n                var wnd;\n                that._startTimezone = model.startTimezone;\n                that._endTimezone = model.endTimezone;\n                if (!timezonePopup) {\n                    that._timezonePopup = timezonePopup = container.kendoWindow({\n                        modal: true,\n                        resizable: false,\n                        draggable: true,\n                        title: that.options.messages.editor.timezoneEditorTitle,\n                        visible: false,\n                        close: function (e) {\n                            model.unbind('change', startTimezoneChange);\n                            if (e.userTriggered) {\n                                that._revertTimezones(model);\n                            }\n                            if (activator) {\n                                activator.focus();\n                            }\n                        }\n                    });\n                    checkbox.click(function () {\n                        endTimezoneRow.toggle(checkbox.prop('checked'));\n                        model.set('endTimezone', '');\n                    });\n                    saveButton.click(function (e) {\n                        e.preventDefault();\n                        wnd.close();\n                    });\n                    cancelButton.click(function (e) {\n                        e.preventDefault();\n                        that._revertTimezones(model);\n                        wnd.close();\n                    });\n                    model.bind('change', startTimezoneChange);\n                }\n                checkbox.prop('checked', model.endTimezone).prop('disabled', !model.startTimezone);\n                if (model.endTimezone) {\n                    endTimezoneRow.show();\n                } else {\n                    endTimezoneRow.hide();\n                }\n                wnd = timezonePopup.data('kendoWindow');\n                wnd.center().open();\n            }\n        });\n        var Scheduler = DataBoundWidget.extend({\n            init: function (element, options) {\n                var that = this;\n                Widget.fn.init.call(that, element, options);\n                if (!that.options.views || !that.options.views.length) {\n                    that.options.views = [\n                        'day',\n                        'week'\n                    ];\n                }\n                that.resources = [];\n                that._initModel();\n                that._wrapper();\n                that._views();\n                that._toolbar();\n                that._dataSource();\n                that._resources();\n                that._resizeHandler = function () {\n                    that.resize();\n                };\n                that.wrapper.on(MOUSEDOWN + NS + ' selectstart' + NS, function (e) {\n                    if (!$(e.target).is(':kendoFocusable')) {\n                        e.preventDefault();\n                    }\n                });\n                if (that.options.editable && that.options.editable.resize !== false) {\n                    that._resizable();\n                }\n                that._movable();\n                that._bindResize();\n                if (that.options.messages && that.options.messages.recurrence) {\n                    recurrence.options = that.options.messages.recurrence;\n                }\n                that._selectable();\n                that._touchHandlers();\n                that._ariaId = kendo.guid();\n                that._createEditor();\n            },\n            _bindResize: function () {\n                $(window).on('resize' + NS, this._resizeHandler);\n            },\n            _unbindResize: function () {\n                $(window).off('resize' + NS, this._resizeHandler);\n            },\n            dataItems: function () {\n                var that = this;\n                var items = that.items();\n                var events = that._data;\n                var eventsUids = $.map(items, function (item) {\n                    return $(item).attr('data-uid');\n                });\n                var i;\n                var key;\n                var dict = {};\n                var eventsUidsLength = eventsUids.length;\n                for (i = 0; i < eventsUidsLength; i++) {\n                    dict[eventsUids[i]] = null;\n                }\n                var eventsCount = events.length;\n                for (i = 0; i < eventsCount; i++) {\n                    var event = events[i];\n                    if (dict[event.uid] !== undefined) {\n                        dict[event.uid] = event;\n                    }\n                }\n                var sortedData = [];\n                for (key in dict) {\n                    sortedData.push(dict[key]);\n                }\n                return sortedData;\n            },\n            _isMobile: function () {\n                var options = this.options;\n                return options.mobile === true && kendo.support.mobileOS || options.mobile === 'phone' || options.mobile === 'tablet';\n            },\n            _isTouch: function (event) {\n                return /touch/.test(event.type) || event.originalEvent && /touch/.test(event.originalEvent.pointerType);\n            },\n            _isInverseColor: function (eventElement) {\n                return eventElement.hasClass(INVERSECOLORCLASS);\n            },\n            _isMobilePhoneView: function () {\n                var options = this.options;\n                return options.mobile === true && kendo.support.mobileOS && !kendo.support.mobileOS.tablet || options.mobile === 'phone';\n            },\n            _groupsByResource: function (resources, groupIndex, groupsArray, parentFieldValue, parentField) {\n                if (!groupsArray) {\n                    groupsArray = [];\n                }\n                var resource = resources[0];\n                if (resource) {\n                    var group;\n                    var data = resource.dataSource.view();\n                    var prevIndex = 0;\n                    for (var dataIndex = 0; dataIndex < data.length; dataIndex++) {\n                        var fieldValue = kendo.getter(resource.dataValueField)(data[dataIndex]);\n                        var currentGroupIndex = groupIndex + prevIndex + dataIndex;\n                        group = this._groupsByResource(resources.slice(1), currentGroupIndex, groupsArray, fieldValue, resource.field);\n                        group[resource.field] = fieldValue;\n                        prevIndex = group.groupIndex;\n                        if (parentField && parentFieldValue) {\n                            group[parentField] = parentFieldValue;\n                        }\n                        if (resources.length === 1) {\n                            group.groupIndex = groupIndex + dataIndex;\n                            groupsArray.push(group);\n                        }\n                    }\n                    return group;\n                } else {\n                    return {};\n                }\n            },\n            data: function () {\n                return this._data;\n            },\n            select: function (options) {\n                var that = this;\n                var view = that.view();\n                var selection = that._selection;\n                var groups = view.groups;\n                var selectedGroups;\n                if (options === undefined) {\n                    var selectedEvents;\n                    var slots = view._selectedSlots;\n                    if (!selection) {\n                        return [];\n                    }\n                    if (selection && selection.events) {\n                        selectedEvents = that._selectedEvents();\n                    }\n                    return {\n                        start: selection.start,\n                        end: selection.end,\n                        events: selectedEvents,\n                        slots: slots,\n                        resources: view._resourceBySlot(selection)\n                    };\n                }\n                if (!options) {\n                    that._selection = null;\n                    that._old = null;\n                    view.clearSelection();\n                    return;\n                }\n                if ($.isArray(options)) {\n                    options = { events: options.splice(0) };\n                }\n                if (options.resources) {\n                    var fieldName;\n                    var filters = [];\n                    var groupsByResource = [];\n                    if (view.groupedResources) {\n                        that._groupsByResource(view.groupedResources, 0, groupsByResource);\n                    }\n                    for (fieldName in options.resources) {\n                        filters.push({\n                            field: fieldName,\n                            operator: 'eq',\n                            value: options.resources[fieldName]\n                        });\n                    }\n                    selectedGroups = new kendo.data.Query(groupsByResource).filter(filters).toArray();\n                }\n                if (options.events && options.events.length) {\n                    that._selectEvents(options.events, selectedGroups);\n                    that._select();\n                    return;\n                }\n                if (groups && (options.start && options.end)) {\n                    var rangeStart = getDate(view._startDate);\n                    var rangeEnd = kendo.date.addDays(getDate(view._endDate), 1);\n                    var group;\n                    var ranges;\n                    if (options.start < rangeEnd && rangeStart <= options.end) {\n                        if (selectedGroups && selectedGroups.length) {\n                            group = groups[selectedGroups[0].groupIndex];\n                        } else {\n                            group = groups[0];\n                        }\n                        ranges = group.ranges(options.start, options.end, options.isAllDay, false);\n                        if (ranges.length) {\n                            that._selection = {\n                                start: kendo.timezone.toLocalDate(ranges[0].start.start),\n                                end: kendo.timezone.toLocalDate(ranges[ranges.length - 1].end.end),\n                                groupIndex: ranges[0].start.groupIndex,\n                                index: ranges[0].start.index,\n                                isAllDay: ranges[0].start.isDaySlot,\n                                events: []\n                            };\n                            that._select();\n                        }\n                    }\n                }\n            },\n            _selectEvents: function (eventsUids, selectedGroups) {\n                var that = this;\n                var idx;\n                var view = that.view();\n                var groups = view.groups;\n                var eventsLength = eventsUids.length;\n                var isGrouped = selectedGroups && selectedGroups.length;\n                for (idx = 0; idx < eventsLength; idx++) {\n                    if (groups && isGrouped) {\n                        var currentGroup = groups[selectedGroups[0].groupIndex];\n                        var events = [];\n                        var timeSlotCollectionCount = currentGroup.timeSlotCollectionCount();\n                        var daySlotCollectionCount = currentGroup.daySlotCollectionCount();\n                        for (var collIdx = 0; collIdx < timeSlotCollectionCount; collIdx++) {\n                            events = events.concat(currentGroup.getTimeSlotCollection(collIdx).events());\n                        }\n                        for (var dayCollIdx = 0; dayCollIdx < daySlotCollectionCount; dayCollIdx++) {\n                            events = events.concat(currentGroup.getDaySlotCollection(dayCollIdx).events());\n                        }\n                        events = new kendo.data.Query(events).filter({\n                            field: 'element[0].getAttribute(\\'data-uid\\')',\n                            operator: 'eq',\n                            value: eventsUids[idx]\n                        }).toArray();\n                        if (events[0]) {\n                            that._createSelection(events[0].element);\n                        }\n                    } else {\n                        var element = view.element.find(kendo.format('.k-event[data-uid={0}], .k-task[data-uid={0}]', eventsUids[idx]));\n                        if (element.length) {\n                            that._createSelection(element[0]);\n                        }\n                    }\n                }\n            },\n            _touchHandlers: function () {\n                var that = this;\n                var startX;\n                var startY;\n                var endX;\n                var endY;\n                var timeStamp;\n                var wrapper = that.wrapper;\n                var touchMoveHandler = $.proxy(that._touchMove, that);\n                wrapper.on(TOUCHSTART + NS, '.k-scheduler-header-all-day td, .k-scheduler-content td, .k-event', function (e) {\n                    var content = that.wrapper.find('.k-scheduler-content');\n                    if (!that._isTouch(e)) {\n                        return;\n                    }\n                    content.stop(true, false);\n                    that._touchPosX = startX = that._tapPosition(e, 'X');\n                    that._touchPosY = startY = that._tapPosition(e, 'Y');\n                    that._userTouched = true;\n                    that.view()._scrolling = false;\n                    timeStamp = Date.now();\n                    wrapper.on(TOUCHMOVE + NS, '.k-scheduler-header-all-day td, .k-scheduler-content td, .k-event', touchMoveHandler);\n                });\n                wrapper.on(TOUCHEND + NS, '.k-scheduler-header-all-day td, .k-scheduler-content td, .k-event', function (e) {\n                    if (!that._isTouch(e)) {\n                        return;\n                    }\n                    var delta = Date.now() - timeStamp;\n                    var content = that.wrapper.find('.k-scheduler-content');\n                    var amplitude = -that._amplitude * (3000 / delta);\n                    endX = that._tapPosition(e, 'X');\n                    endY = that._tapPosition(e, 'Y');\n                    if (that._dragging) {\n                        return;\n                    }\n                    if (that.options.selectable && (Math.abs(endX - startX) <= 10 || Math.abs(endY - startY) <= 10)) {\n                        that._mouseDownSelection(e);\n                    }\n                    if (!kendo.support.kineticScrollNeeded && delta < 200 && Math.abs(endX - startX) > 10) {\n                        content.animate({ scrollTop: content[0].scrollTop + amplitude });\n                    }\n                    wrapper.off(TOUCHMOVE + NS, '.k-scheduler-header-all-day td, .k-scheduler-content td', touchMoveHandler);\n                });\n            },\n            _selectable: function () {\n                var that = this;\n                var wrapper = that.wrapper;\n                if (!that.options.selectable) {\n                    return;\n                }\n                that._tabindex();\n                wrapper.on(MOUSEDOWN + NS, '.k-scheduler-header-all-day td, .k-scheduler-content td, .k-event', function (e) {\n                    if (that._isTouch(e)) {\n                        return;\n                    }\n                    that._mouseDownSelection(e);\n                });\n                var mouseMoveHandler = $.proxy(that._mouseMove, that);\n                wrapper.on(MOUSEDOWN + NS, '.k-scheduler-header-all-day td, .k-scheduler-content td', function (e) {\n                    var which = e.which;\n                    var button = e.button;\n                    var isRight = which && which === 3 || button && button == 2;\n                    if (that._isTouch(e)) {\n                        return;\n                    }\n                    if (!isRight) {\n                        wrapper.on(MOUSEMOVE + NS, '.k-scheduler-header-all-day td, .k-scheduler-content td', mouseMoveHandler);\n                    }\n                });\n                wrapper.on('mouseup' + NS + ' mousecancel' + NS, function () {\n                    wrapper.off(MOUSEMOVE + NS, '.k-scheduler-header-all-day td, .k-scheduler-content td', mouseMoveHandler);\n                });\n                wrapper.on('focus' + NS, function () {\n                    if (!that._selection && !that._userTouched) {\n                        that._selectFirstSlot();\n                    }\n                    that._select();\n                });\n                wrapper.on('focusout' + NS, function (e) {\n                    that._ctrlKey = that._shiftKey = false;\n                    that.toolbar.find('ul > li').removeClass(FOCUSEDSTATE);\n                    if (!$(e.relatedTarget).closest(VIEWSSELECTOR).length) {\n                        that.toolbar.find(VIEWSSELECTOR).removeClass(EXPANDEDSTATE);\n                    }\n                });\n                wrapper.on('keydown' + NS, proxy(that._keydown, that));\n                wrapper.on('keyup' + NS, function (e) {\n                    that._ctrlKey = e.ctrlKey;\n                    that._shiftKey = e.shiftKey;\n                });\n            },\n            _mouseDownSelection: function (e) {\n                var which = e.which;\n                var button = e.button;\n                var browser = kendo.support.browser;\n                var isRight = which && which === 3 || button && button == 2;\n                if (!isRight) {\n                    if (e.ctrlKey) {\n                        this._ctrlKey = e.ctrlKey;\n                    }\n                    if (e.shiftKey) {\n                        this._shiftKey = e.shiftKey;\n                    }\n                    this._createSelection(e.currentTarget);\n                }\n                this.wrapper.focus();\n                if (browser.msie && browser.version < 9) {\n                    setTimeout(function () {\n                        this.wrapper.focus();\n                    });\n                }\n                this.toolbar.find('ul > li').removeClass(FOCUSEDSTATE);\n            },\n            _selectFirstSlot: function () {\n                this._createSelection(this.wrapper.find('.k-scheduler-content').find('td:first'));\n            },\n            _select: function () {\n                var that = this;\n                var view = that.view();\n                var wrapper = that.wrapper;\n                var current = view.current();\n                var selection = that._selection;\n                var oldSelection = that._old ? that._old.selection : null;\n                var oldEventsLength = that._old ? that._old.eventsLength : null;\n                if (!selection) {\n                    return;\n                }\n                if (current) {\n                    current.removeAttribute('id');\n                    current.removeAttribute('aria-label');\n                    wrapper.removeAttr('aria-activedescendant');\n                }\n                view.select(selection);\n                current = view.current();\n                if (current && (oldSelection !== current || selection.events && oldEventsLength !== selection.events.length)) {\n                    var currentUid = $(current).data('uid');\n                    if (that._old && currentUid && currentUid === $(that._old.selection).data('uid') && (selection.events && that._old.eventsLength === selection.events.length)) {\n                        return;\n                    }\n                    var labelFormat;\n                    var data = selection;\n                    var events = that._selectedEvents();\n                    var slots = view._selectedSlots;\n                    if (events[0]) {\n                        data = events[0] || selection;\n                        labelFormat = kendo.format(that.options.messages.ariaEventLabel, data.title, data.start, data.start);\n                    } else {\n                        labelFormat = kendo.format(that.options.messages.ariaSlotLabel, data.start, data.end);\n                    }\n                    current.setAttribute('id', that._ariaId);\n                    current.setAttribute('aria-label', labelFormat);\n                    wrapper.attr('aria-activedescendant', that._ariaId);\n                    that._old = {\n                        selection: current,\n                        eventsLength: events.length\n                    };\n                    that.trigger('change', {\n                        start: selection.start,\n                        end: selection.end,\n                        events: events,\n                        slots: slots,\n                        resources: view._resourceBySlot(selection)\n                    });\n                }\n            },\n            _selectedEvents: function () {\n                var uids = this._selection.events;\n                var length = uids.length;\n                var idx = 0;\n                var event;\n                var events = [];\n                for (; idx < length; idx++) {\n                    event = this.occurrenceByUid(uids[idx]);\n                    if (event) {\n                        events.push(event);\n                    }\n                }\n                return events;\n            },\n            _tapPosition: function (event, coordinate) {\n                return /touch/.test(event.type) ? (event.originalEvent || event).changedTouches[0]['page' + coordinate] : event['page' + coordinate];\n            },\n            _touchMove: function (e) {\n                var that = this;\n                var content = that.wrapper.find('.k-scheduler-content');\n                var verticalScroll = content[0].scrollHeight > content[0].clientHeight;\n                var horizontalScroll = content[0].scrollWidth > content[0].clientWidth;\n                var endY = that._tapPosition(e, 'Y');\n                var endX = that._tapPosition(e, 'X');\n                var scrollTop = content[0].scrollTop - Math.round(endY - that._touchPosY);\n                var scrollLeft = content[0].scrollLeft - Math.round(endX - that._touchPosX);\n                var applyVerticalScroll = verticalScroll && Math.abs(endY - that._touchPosY) > 10;\n                var applyhorizontalScroll = horizontalScroll && Math.abs(endY - that._touchPosY) > 10;\n                if (that._dragging || kendo.support.kineticScrollNeeded || !that._isTouch(e)) {\n                    return;\n                }\n                if (applyVerticalScroll || applyhorizontalScroll) {\n                    that._amplitude = Math.round(endY - that._touchPosY);\n                    that._touchPosY = endY;\n                    that._touchPosX = endX;\n                    content.animate({\n                        scrollTop: scrollTop,\n                        scrollLeft: scrollLeft\n                    }, 0);\n                    that.view()._scrolling = true;\n                }\n            },\n            _mouseMove: function (e) {\n                var that = this;\n                clearTimeout(that._moveTimer);\n                if (that._isTouch(e)) {\n                    return;\n                }\n                that._moveTimer = setTimeout(function () {\n                    var view = that.view();\n                    var selection = that._selection;\n                    if (selection) {\n                        var slot = view.selectionByElement($(e.currentTarget));\n                        if (slot && selection.groupIndex === slot.groupIndex) {\n                            var startDate = slot.startDate();\n                            var endDate = slot.endDate();\n                            if (startDate >= selection.end) {\n                                selection.backward = false;\n                            } else if (endDate <= selection.start) {\n                                selection.backward = true;\n                            }\n                            if (selection.backward) {\n                                selection.start = startDate;\n                            } else {\n                                selection.end = endDate;\n                            }\n                            that._select();\n                        }\n                    }\n                }, 5);\n            },\n            _viewByIndex: function (index) {\n                var view, views = this.views;\n                for (view in views) {\n                    if (!index) {\n                        return view;\n                    }\n                    index--;\n                }\n            },\n            _keydown: function (e) {\n                var that = this, key = e.keyCode, view = that.view(), editable = view.options.editable, selection = that._selection, prevSelection = $.extend(selection), isModifier = key === 16 || key === 18 || key === 17 || key === 91 || key === 92, focusableToolBarSelector = '.k-scheduler-tools > li,' + '.k-scheduler-navigation > li,' + '.k-scheduler-views > li.k-state-selected:visible, ' + '.k-scheduler-views > li.k-current-view:visible', focusableItems = that.toolbar.find(focusableToolBarSelector), viewsWrapper = that.toolbar.find(VIEWSSELECTOR), shouldNavigate = $(e.target).closest(VIEWSSELECTOR).length || that.toolbar.find('.k-scheduler-views .k-state-focused').length, focusedViewIndex = viewsWrapper.children().index(that.toolbar.find('.' + FOCUSEDSTATE)), selectedIndex, isRtl = kendo.support.isRtl(that.element), direction = isRtl ? -1 : 1;\n                if (focusedViewIndex == -1) {\n                    focusedViewIndex = viewsWrapper.children().index(that.toolbar.find('.k-state-selected'));\n                }\n                that._ctrlKey = e.ctrlKey;\n                that._shiftKey = e.shiftKey;\n                if (key === keys.F10) {\n                    that.toolbar.find('ul > li:first').focus().addClass(FOCUSEDSTATE);\n                    e.preventDefault();\n                    return;\n                } else if (key === keys.TAB) {\n                    if (that.toolbar.find('.' + FOCUSEDSTATE).length) {\n                        var idx = focusableItems.index(that.toolbar.find('.' + FOCUSEDSTATE));\n                        if (idx === -1 && that._focusedView) {\n                            idx = focusableItems.index(that.toolbar.find('.k-scheduler-views > .k-state-selected'));\n                        }\n                        var itemToFocus = e.shiftKey ? focusableItems[idx - 1] : focusableItems[idx + 1];\n                        that.toolbar.find('.' + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n                        if (itemToFocus) {\n                            $(itemToFocus).addClass(FOCUSEDSTATE).focus();\n                            that._focusedView = null;\n                            e.preventDefault();\n                            return;\n                        } else {\n                            that.element.focus();\n                            e.preventDefault();\n                            return;\n                        }\n                    }\n                } else if (key === keys.ENTER || key === keys.SPACEBAR) {\n                    if (shouldNavigate && that._focusedView && !that._focusedView.hasClass('k-state-selected')) {\n                        var focusedViewName = that._focusedView.data().name;\n                        if (!that.trigger('navigate', {\n                                view: focusedViewName,\n                                action: 'changeView',\n                                date: that.date()\n                            })) {\n                            that.view(focusedViewName);\n                            viewsWrapper.removeClass(EXPANDEDSTATE);\n                            if (that.toolbar.find('.k-current-view:visible').length) {\n                                $(document.activeElement).blur();\n                                that.toolbar.find('.k-current-view:visible').addClass(FOCUSEDSTATE).find('.k-link').focus();\n                            }\n                        }\n                        e.preventDefault();\n                        return;\n                    }\n                    if (that.toolbar.find('.' + FOCUSEDSTATE + ':visible').length) {\n                        that.toolbar.find('.' + FOCUSEDSTATE + ':visible').click();\n                        e.preventDefault();\n                        return;\n                    }\n                } else if (e.altKey && key === keys.DOWN) {\n                    if (that.toolbar.find('.' + FOCUSEDSTATE + ':visible').length) {\n                        that.toolbar.find('.' + FOCUSEDSTATE + ':visible').click();\n                        e.preventDefault();\n                        return;\n                    }\n                } else if (key === keys.RIGHT && shouldNavigate) {\n                    $(that.toolbar.find('.' + FOCUSEDSTATE)).removeClass(FOCUSEDSTATE);\n                    if (isRtl) {\n                        that._focusedView = focusedViewIndex - 1 === 0 ? $(viewsWrapper.children(':not(.k-current-view):last')) : $(viewsWrapper.children()[focusedViewIndex + 1 * direction]);\n                    } else {\n                        that._focusedView = focusedViewIndex + 1 === viewsWrapper.children().length ? $(viewsWrapper.children(':not(.k-current-view):first')) : $(viewsWrapper.children()[focusedViewIndex + 1 * direction]);\n                    }\n                    that._focusedView.focus().addClass(FOCUSEDSTATE);\n                    e.preventDefault();\n                    return;\n                } else if (key === keys.LEFT && shouldNavigate) {\n                    $(that.toolbar.find('.' + FOCUSEDSTATE)).removeClass(FOCUSEDSTATE);\n                    if (isRtl) {\n                        that._focusedView = focusedViewIndex + 1 === viewsWrapper.children().length ? $(viewsWrapper.children(':not(.k-current-view):first')) : $(viewsWrapper.children()[focusedViewIndex - 1 * direction]);\n                    } else {\n                        that._focusedView = focusedViewIndex - 1 === 0 ? $(viewsWrapper.children(':not(.k-current-view):last')) : $(viewsWrapper.children()[focusedViewIndex - 1 * direction]);\n                    }\n                    that._focusedView.focus().addClass(FOCUSEDSTATE);\n                    e.preventDefault();\n                    return;\n                } else if (key === keys.DOWN && that.toolbar.find(VIEWSSELECTOR).hasClass(EXPANDEDSTATE)) {\n                    that.toolbar.find('.' + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n                    if (that._focusedView) {\n                        selectedIndex = viewsWrapper.find(that._focusedView).index();\n                    } else {\n                        selectedIndex = viewsWrapper.children('.k-scheduler-views > .k-state-selected').index();\n                    }\n                    that._focusedView = selectedIndex + 1 === viewsWrapper.children().length ? $(viewsWrapper.children(':not(.k-current-view):first')) : $(viewsWrapper.children()[selectedIndex + 1 * direction]);\n                    that._focusedView.focus().addClass(FOCUSEDSTATE);\n                    e.preventDefault();\n                    return;\n                } else if (key === keys.UP && that.toolbar.find(VIEWSSELECTOR).hasClass(EXPANDEDSTATE)) {\n                    that.toolbar.find('.' + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n                    if (that._focusedView) {\n                        selectedIndex = viewsWrapper.find(that._focusedView).index();\n                    } else {\n                        selectedIndex = viewsWrapper.children('.k-scheduler-views > .k-state-selected').index();\n                    }\n                    that._focusedView = selectedIndex - 1 === 0 ? $(viewsWrapper.children(':not(.k-current-view):last')) : $(viewsWrapper.children()[selectedIndex - 1 * direction]);\n                    that._focusedView.focus().addClass(FOCUSEDSTATE);\n                    e.preventDefault();\n                    return;\n                } else if (e.altKey && key === keys.DOWN && that.toolbar.find('.k-nav-current').hasClass(FOCUSEDSTATE)) {\n                    that._showCalendar();\n                    e.preventDefault();\n                    return;\n                } else if (key === keys.ESC && that.popup && that.popup.visible()) {\n                    that.popup.close();\n                    e.preventDefault();\n                    return;\n                } else if (key === keys.ESC && that.toolbar.find(VIEWSSELECTOR).hasClass(EXPANDEDSTATE)) {\n                    that.toolbar.find(VIEWSSELECTOR).removeClass(EXPANDEDSTATE);\n                    that.toolbar.find(VIEWSSELECTOR).children().removeClass(FOCUSEDSTATE);\n                    that._focusedView = null;\n                    that.toolbar.find('.k-current-view').focus().addClass(FOCUSEDSTATE);\n                    e.preventDefault();\n                    return;\n                }\n                if (isModifier) {\n                    return;\n                }\n                if (!selection) {\n                    that._selectFirstSlot();\n                    that._select();\n                    that.element.focus();\n                    return;\n                }\n                if (key === keys.TAB) {\n                    if (view.moveToEvent(selection, e.shiftKey)) {\n                        that._select();\n                        that.element.focus();\n                        e.preventDefault();\n                    }\n                } else if (key === keys.ENTER || key === keys.SPACEBAR) {\n                    if (selection.events.length && editable) {\n                        if (editable.update !== false) {\n                            that.editEvent(selection.events[0]);\n                        }\n                    } else if (editable && editable.create !== false) {\n                        if (selection.isAllDay) {\n                            selection = $.extend({}, selection, { end: kendo.date.addDays(selection.end, -1) });\n                        }\n                        e.preventDefault();\n                        that.addEvent(extend({}, selection, view._resourceBySlot(selection)));\n                    }\n                } else if (key === keys.DELETE && editable !== false && editable.destroy !== false) {\n                    that.removeEvent(selection.events[0]);\n                } else if (key >= 49 && key <= 57) {\n                    var viewByIndex = that._viewByIndex(key - 49);\n                    if (viewByIndex && !that.trigger('navigate', {\n                            view: viewByIndex,\n                            action: 'changeView',\n                            date: that.date()\n                        })) {\n                        that.view(viewByIndex);\n                    }\n                } else if (view.move(selection, key, e.shiftKey)) {\n                    if (view.inRange(selection)) {\n                        that._select();\n                    } else {\n                        var action = that.date().getTime() > selection.start.getTime() ? 'previous' : 'next';\n                        if (!that.trigger('navigate', {\n                                view: that._selectedViewName,\n                                action: action,\n                                date: selection.start\n                            })) {\n                            that.date(selection.start);\n                        } else {\n                            selection.start = prevSelection.start;\n                            selection.end = prevSelection.end;\n                        }\n                    }\n                    that.toolbar.find('ul > li').removeClass(FOCUSEDSTATE);\n                    e.preventDefault();\n                }\n                that._adjustSelectedDate();\n            },\n            _createSelection: function (item) {\n                var selection = this._selection;\n                var uid;\n                var slot;\n                item = $(item);\n                if (item.is('.k-event')) {\n                    uid = item.attr(kendo.attr('uid'));\n                    if (selection && selection.events.indexOf(uid) !== -1 && !this._ctrlKey) {\n                        return;\n                    }\n                }\n                if (!selection || !this._ctrlKey && !this._shiftKey) {\n                    selection = this._selection = {\n                        events: [],\n                        groupIndex: 0\n                    };\n                }\n                slot = this.view().selectionByElement(item);\n                if (slot) {\n                    selection.groupIndex = slot.groupIndex || 0;\n                }\n                if (uid) {\n                    slot = getOccurrenceByUid(this._data, uid);\n                }\n                if (slot && slot.uid) {\n                    uid = [slot.uid];\n                }\n                this._updateSelection(slot, uid);\n                this._adjustSelectedDate();\n            },\n            _updateSelection: function (dataItem, events, groupIndex) {\n                var selection = this._selection;\n                if (dataItem && selection) {\n                    var view = this.view();\n                    if (dataItem.uid) {\n                        dataItem = view._updateEventForSelection(dataItem);\n                    }\n                    if (this._shiftKey && selection.start && selection.end) {\n                        var backward = dataItem.end < selection.end;\n                        selection.end = dataItem.endDate ? dataItem.endDate() : dataItem.end;\n                        if (backward && view._timeSlotInterval) {\n                            kendo.date.setTime(selection.end, -view._timeSlotInterval());\n                        }\n                    } else {\n                        selection.start = dataItem.startDate ? dataItem.startDate() : dataItem.start;\n                        selection.end = dataItem.endDate ? dataItem.endDate() : dataItem.end;\n                    }\n                    if ('isDaySlot' in dataItem) {\n                        selection.isAllDay = dataItem.isDaySlot;\n                    } else {\n                        selection.isAllDay = dataItem.isAllDay;\n                    }\n                    if (groupIndex !== null && groupIndex !== undefined) {\n                        selection.groupIndex = groupIndex;\n                    }\n                    selection.index = dataItem.index;\n                    if (this._ctrlKey) {\n                        var indexOfEvent = events && events.length ? selection.events.indexOf(events[0]) : -1;\n                        if (indexOfEvent > -1) {\n                            selection.events.splice(indexOfEvent, 1);\n                        } else {\n                            selection.events = selection.events.concat(events || []);\n                        }\n                    } else {\n                        selection.events = events || [];\n                    }\n                }\n            },\n            options: {\n                name: 'Scheduler',\n                date: TODAY,\n                editable: true,\n                autoBind: true,\n                snap: true,\n                mobile: false,\n                timezone: '',\n                allDaySlot: true,\n                min: new Date(1900, 0, 1),\n                max: new Date(2099, 11, 31),\n                toolbar: null,\n                footer: {},\n                messages: {\n                    today: 'Today',\n                    pdf: 'Export to PDF',\n                    save: 'Save',\n                    cancel: 'Cancel',\n                    destroy: 'Delete',\n                    resetSeries: 'Reset Series',\n                    deleteWindowTitle: 'Delete event',\n                    next: 'Next',\n                    previous: 'Previous',\n                    ariaSlotLabel: 'Selected from {0:t} to {1:t}',\n                    ariaEventLabel: '{0} on {1:D} at {2:t}',\n                    views: {\n                        day: 'Day',\n                        week: 'Week',\n                        workWeek: 'Work Week',\n                        agenda: 'Agenda',\n                        month: 'Month',\n                        timeline: 'Timeline',\n                        timelineWeek: 'Timeline Week',\n                        timelineWorkWeek: 'Timeline Work Week',\n                        timelineMonth: 'Timeline Month'\n                    },\n                    recurrenceMessages: {\n                        deleteWindowTitle: 'Delete Recurring Item',\n                        resetSeriesWindowTitle: 'Reset Series',\n                        deleteWindowOccurrence: 'Delete current occurrence',\n                        deleteWindowSeries: 'Delete the series',\n                        editWindowTitle: 'Edit Recurring Item',\n                        editWindowOccurrence: 'Edit current occurrence',\n                        editWindowSeries: 'Edit the series'\n                    },\n                    editable: { confirmation: DELETECONFIRM },\n                    editor: {\n                        title: 'Title',\n                        start: 'Start',\n                        end: 'End',\n                        allDayEvent: 'All day event',\n                        description: 'Description',\n                        repeat: 'Repeat',\n                        timezone: 'Timezone',\n                        startTimezone: 'Start timezone',\n                        endTimezone: 'End timezone',\n                        separateTimezones: 'Use separate start and end time zones',\n                        timezoneEditorTitle: 'Timezones',\n                        timezoneEditorButton: 'Time zone',\n                        timezoneTitle: 'Time zones',\n                        noTimezone: 'No timezone',\n                        editorTitle: 'Event'\n                    }\n                },\n                height: null,\n                width: null,\n                resources: [],\n                group: {\n                    resources: [],\n                    orientation: 'horizontal'\n                },\n                views: [],\n                selectable: false\n            },\n            events: [\n                REMOVE,\n                EDIT,\n                CANCEL,\n                SAVE,\n                'add',\n                'dataBinding',\n                'dataBound',\n                'moveStart',\n                'move',\n                'moveEnd',\n                'resizeStart',\n                'resize',\n                'resizeEnd',\n                'navigate',\n                'change'\n            ],\n            destroy: function () {\n                var that = this, element;\n                Widget.fn.destroy.call(that);\n                if (that.dataSource) {\n                    that.dataSource.unbind(CHANGE, that._refreshHandler);\n                    that.dataSource.unbind('progress', that._progressHandler);\n                    that.dataSource.unbind('error', that._errorHandler);\n                }\n                if (that.calendar) {\n                    that.calendar.destroy();\n                    that.popup.destroy();\n                }\n                if (that.view()) {\n                    that.view().destroy();\n                }\n                if (that._editor) {\n                    that._editor.destroy();\n                }\n                if (this._moveDraggable) {\n                    this._moveDraggable.destroy();\n                }\n                if (this._resizeDraggable) {\n                    this._resizeDraggable.destroy();\n                }\n                element = that.element.add(that.wrapper).add(that.toolbar).add(that.popup);\n                element.off(NS);\n                clearTimeout(that._moveTimer);\n                that._model = null;\n                that.toolbar = null;\n                that.element = null;\n                $(window).off('resize' + NS, that._resizeHandler);\n                kendo.destroy(that.wrapper);\n            },\n            setDataSource: function (dataSource) {\n                this.options.dataSource = dataSource;\n                this._dataSource();\n                if (this.options.autoBind && dataSource.fetch) {\n                    dataSource.fetch();\n                } else if (isArray(dataSource)) {\n                    this.view(this._selectedView);\n                }\n            },\n            items: function () {\n                var content = this.wrapper.find('.k-scheduler-content');\n                var view = this.view();\n                if (view && view.options.name === 'agenda') {\n                    return content.find('.k-task');\n                } else {\n                    return content.find('.k-event').add(this.wrapper.find('.k-scheduler-header-wrap').find('.k-scheduler-header-all-day').siblings());\n                }\n            },\n            _movable: function () {\n                var startSlot;\n                var endSlot;\n                var startResources;\n                var startTime;\n                var endTime;\n                var event;\n                var clonedEvent;\n                var that = this;\n                var originSlot;\n                var originStartTime;\n                var originalEvent;\n                var distance = 0;\n                var clonedEvents = [];\n                var cachedEvents = [];\n                var isMobile = that._isMobile();\n                var movable = that.options.editable && that.options.editable.move !== false;\n                var resizable = that.options.editable && that.options.editable.resize !== false;\n                if (movable || resizable && isMobile) {\n                    that._dragging = false;\n                    if (isMobile && kendo.support.mobileOS.android) {\n                        distance = 5;\n                    }\n                    that._moveDraggable = new kendo.ui.Draggable(that.element, {\n                        distance: distance,\n                        filter: '.k-event',\n                        ignore: '.k-resize-handle',\n                        holdToDrag: isMobile,\n                        autoScroll: true\n                    });\n                    if (movable) {\n                        that._moveDraggable.bind('dragstart', function (e) {\n                            var view = that.view();\n                            var eventElement = e.currentTarget;\n                            var isTouch = that._isTouch(e);\n                            that._dragging = true;\n                            if (!view.options.editable || view.options.editable.move === false) {\n                                that._dragging = false;\n                                e.preventDefault();\n                                return;\n                            }\n                            if (isTouch && !eventElement.hasClass('k-event-active')) {\n                                that._dragging = false;\n                                that.element.find('.k-event-active').removeClass('k-event-active');\n                                e.preventDefault();\n                                return;\n                            }\n                            event = that.occurrenceByUid(eventElement.attr(kendo.attr('uid')));\n                            clonedEvent = event.clone();\n                            originalEvent = event.clone();\n                            clonedEvent.update(view._eventOptionsForMove(clonedEvent));\n                            clonedEvent.inverseColor = that._isInverseColor(eventElement);\n                            clonedEvents = [];\n                            if (that._selection) {\n                                var events = that._selection.events;\n                                for (var i = 0; i < events.length; i++) {\n                                    var evtClone = that.occurrenceByUid(events[i]).clone();\n                                    var evtCloneElement = this.element.find('div.k-event[data-uid=\"' + evtClone.uid + '\"]').eq(0);\n                                    evtClone.update(view._eventOptionsForMove(evtClone));\n                                    if (evtCloneElement.length) {\n                                        evtClone.inverseColor = that._isInverseColor(evtCloneElement);\n                                    }\n                                    clonedEvents.push(evtClone);\n                                }\n                            } else {\n                                clonedEvents.push(clonedEvent);\n                            }\n                            startSlot = view._slotByPosition(e.x.startLocation, e.y.startLocation);\n                            startResources = view._resourceBySlot(startSlot);\n                            originStartTime = startTime = startSlot.startOffset(e.x.startLocation, e.y.startLocation, that.options.snap);\n                            endSlot = startSlot;\n                            originSlot = startSlot;\n                            if (!startSlot || that.trigger('moveStart', { event: event })) {\n                                e.preventDefault();\n                            }\n                        }).bind('drag', function (e) {\n                            var view = that.view();\n                            var slot = view._slotByPosition(e.x.location, e.y.location);\n                            var distance;\n                            var range;\n                            var i;\n                            if (!slot) {\n                                return;\n                            }\n                            endTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                            if (slot.isDaySlot !== startSlot.isDaySlot) {\n                                if (slot.isDaySlot !== originSlot.isDaySlot) {\n                                    var slotIndex = $(startSlot.element).index();\n                                    var targetSlotElement = $(slot.element).parent().children().eq(slotIndex);\n                                    startSlot = view._slotByPosition(targetSlotElement.offset().left, targetSlotElement.offset().top);\n                                    startTime = startSlot.startOffset(e.x.location, e.y.location, true);\n                                    cachedEvents = clonedEvents.map(function (event) {\n                                        return event.clone();\n                                    });\n                                    for (i = 0; i < clonedEvents.length; i++) {\n                                        if (clonedEvents[i].isAllDay != slot.isDaySlot) {\n                                            clonedEvents[i].isAllDay = slot.isDaySlot;\n                                            clonedEvents[i].end = kendo.date.getDate(clonedEvents[i].start);\n                                            clonedEvents[i].start = kendo.date.getDate(clonedEvents[i].start);\n                                            if (!slot.isDaySlot) {\n                                                kendo.date.setTime(clonedEvents[i].start, kendo.date.getMilliseconds(view.startTime()));\n                                                kendo.date.setTime(clonedEvents[i].end, kendo.date.getMilliseconds(view.startTime()) + view._timeSlotInterval());\n                                            }\n                                        }\n                                    }\n                                } else {\n                                    startSlot = $.extend(true, {}, originSlot);\n                                    startTime = originStartTime;\n                                    clonedEvents = cachedEvents;\n                                }\n                            }\n                            distance = endTime - startTime;\n                            for (i = 0; i < clonedEvents.length; i++) {\n                                view._updateMoveHint(clonedEvents[i], slot.groupIndex, distance);\n                            }\n                            range = moveEventRange(clonedEvent, distance);\n                            if (!that.trigger('move', {\n                                    event: event,\n                                    slot: {\n                                        element: slot.element,\n                                        start: slot.startDate(),\n                                        end: slot.endDate(),\n                                        isDaySlot: slot.isDaySlot\n                                    },\n                                    resources: view._resourceBySlot(slot),\n                                    start: range.start,\n                                    end: range.end\n                                })) {\n                                endSlot = slot;\n                            } else {\n                                for (i = 0; i < clonedEvents.length; i++) {\n                                    view._updateMoveHint(clonedEvents[i], slot.groupIndex, distance);\n                                }\n                            }\n                        }).bind('dragend', function (e) {\n                            that.view()._removeMoveHint();\n                            var distance = endTime - startTime;\n                            var range = moveEventRange(clonedEvent, distance);\n                            var start = range.start;\n                            var end = range.end;\n                            that._dragging = false;\n                            var endResources = that.view()._resourceBySlot(endSlot);\n                            var prevented = that.trigger('moveEnd', {\n                                event: event,\n                                slot: {\n                                    element: endSlot.element,\n                                    start: endSlot.startDate(),\n                                    end: endSlot.endDate()\n                                },\n                                start: start,\n                                end: end,\n                                resources: endResources\n                            });\n                            if (!prevented && (event.start.getTime() !== start.getTime() || event.end.getTime() !== end.getTime() || originSlot.isDaySlot !== endSlot.isDaySlot || kendo.stringify(endResources) !== kendo.stringify(startResources))) {\n                                that._isMultiDrag = clonedEvents.length > 1;\n                                for (var i = 0; i < clonedEvents.length; i++) {\n                                    var evt = clonedEvents[i];\n                                    range = moveEventRange(evt, distance);\n                                    var updatedEventOptions = that.view()._eventOptionsForMove(evt);\n                                    var eventOptions = $.extend({\n                                        isAllDay: evt.isAllDay,\n                                        start: range.start,\n                                        end: range.end\n                                    }, updatedEventOptions, endResources);\n                                    that._updateEvent(null, evt, eventOptions);\n                                }\n                                if (that._isMultiDrag) {\n                                    that.dataSource.sync();\n                                    that._isMultiDrag = false;\n                                }\n                            }\n                            e.currentTarget.removeClass('k-event-active');\n                            this.cancelHold();\n                            clonedEvents = [];\n                            cachedEvents = [];\n                        }).bind('dragcancel', function () {\n                            that.view()._removeMoveHint();\n                            this.cancelHold();\n                            clonedEvents = [];\n                            cachedEvents = [];\n                        });\n                    }\n                    that._moveDraggable.bind('hold', function (e) {\n                        if (that._isTouch(e)) {\n                            that.element.find('.k-event-active').removeClass('k-event-active');\n                            if (that.options.selectable) {\n                                that._createSelection(e.currentTarget);\n                            }\n                            e.currentTarget.addClass('k-event-active');\n                        }\n                    });\n                }\n            },\n            _resizable: function () {\n                var startTime;\n                var endTime;\n                var event;\n                var clonedEvent;\n                var slot;\n                var that = this;\n                var distance = 0;\n                function direction(handle) {\n                    var directions = {\n                        'k-resize-e': 'east',\n                        'k-resize-w': 'west',\n                        'k-resize-n': 'north',\n                        'k-resize-s': 'south'\n                    };\n                    for (var key in directions) {\n                        if (handle.hasClass(key)) {\n                            return directions[key];\n                        }\n                    }\n                }\n                if (that._isMobile() && kendo.support.mobileOS.android) {\n                    distance = 5;\n                }\n                that._resizeDraggable = new kendo.ui.Draggable(that.element, {\n                    distance: distance,\n                    filter: '.k-resize-handle',\n                    autoScroll: true,\n                    dragstart: function (e) {\n                        var dragHandle = $(e.currentTarget);\n                        var eventElement = dragHandle.closest('.k-event');\n                        var uid = eventElement.attr(kendo.attr('uid'));\n                        var view = that.view();\n                        that._dragging = true;\n                        event = that.occurrenceByUid(uid);\n                        clonedEvent = event.clone();\n                        view._updateEventForResize(clonedEvent);\n                        slot = view._slotByPosition(e.x.startLocation, e.y.startLocation);\n                        if (that.trigger('resizeStart', { event: event })) {\n                            e.preventDefault();\n                        }\n                        startTime = kendo.date.toUtcTime(clonedEvent.start);\n                        endTime = kendo.date.toUtcTime(clonedEvent.end);\n                    },\n                    drag: function (e) {\n                        if (!slot) {\n                            return;\n                        }\n                        var dragHandle = $(e.currentTarget);\n                        var dir = direction(dragHandle);\n                        var view = that.view();\n                        var currentSlot = view._slotByPosition(e.x.location, e.y.location);\n                        if (!currentSlot || slot.groupIndex != currentSlot.groupIndex) {\n                            return;\n                        }\n                        slot = currentSlot;\n                        var originalStart = startTime;\n                        var originalEnd = endTime;\n                        if (dir == 'south') {\n                            if (!slot.isDaySlot && slot.end - kendo.date.toUtcTime(clonedEvent.start) >= view._timeSlotInterval()) {\n                                if (clonedEvent.isAllDay) {\n                                    endTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                                } else {\n                                    endTime = slot.endOffset(e.x.location, e.y.location, that.options.snap);\n                                }\n                            }\n                        } else if (dir == 'north') {\n                            if (!slot.isDaySlot && kendo.date.toUtcTime(clonedEvent.end) - slot.start >= view._timeSlotInterval()) {\n                                startTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                            }\n                        } else if (dir == 'east') {\n                            if (slot.isDaySlot && kendo.date.toUtcTime(kendo.date.getDate(slot.endDate())) >= kendo.date.toUtcTime(kendo.date.getDate(clonedEvent.start))) {\n                                if (clonedEvent.isAllDay) {\n                                    endTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                                } else {\n                                    endTime = slot.endOffset(e.x.location, e.y.location, that.options.snap);\n                                }\n                            } else if (!slot.isDaySlot && slot.end - kendo.date.toUtcTime(clonedEvent.start) >= view._timeSlotInterval()) {\n                                endTime = slot.endOffset(e.x.location, e.y.location, that.options.snap);\n                            }\n                        } else if (dir == 'west') {\n                            if (slot.isDaySlot && kendo.date.toUtcTime(kendo.date.getDate(clonedEvent.end)) >= kendo.date.toUtcTime(kendo.date.getDate(slot.startDate()))) {\n                                startTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                            } else if (!slot.isDaySlot && kendo.date.toUtcTime(clonedEvent.end) - slot.start >= view._timeSlotInterval()) {\n                                startTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                            }\n                        }\n                        if (!that.trigger('resize', {\n                                event: event,\n                                slot: {\n                                    element: slot.element,\n                                    start: slot.startDate(),\n                                    end: slot.endDate()\n                                },\n                                start: kendo.timezone.toLocalDate(startTime),\n                                end: kendo.timezone.toLocalDate(endTime),\n                                resources: view._resourceBySlot(slot)\n                            })) {\n                            view._updateResizeHint(clonedEvent, slot.groupIndex, startTime, endTime);\n                        } else {\n                            startTime = originalStart;\n                            endTime = originalEnd;\n                        }\n                    },\n                    dragend: function (e) {\n                        var dragHandle = $(e.currentTarget);\n                        var start = new Date(clonedEvent.start.getTime());\n                        var end = new Date(clonedEvent.end.getTime());\n                        var dir = direction(dragHandle);\n                        that._dragging = false;\n                        that.view()._removeResizeHint();\n                        if (dir == 'south') {\n                            end = kendo.timezone.toLocalDate(endTime);\n                        } else if (dir == 'north') {\n                            start = kendo.timezone.toLocalDate(startTime);\n                        } else if (dir == 'east') {\n                            if (slot.isDaySlot) {\n                                end = kendo.date.getDate(kendo.timezone.toLocalDate(endTime));\n                            } else {\n                                end = kendo.timezone.toLocalDate(endTime);\n                            }\n                        } else if (dir == 'west') {\n                            if (slot.isDaySlot) {\n                                start = new Date(kendo.timezone.toLocalDate(startTime));\n                                start.setHours(0);\n                                start.setMinutes(0);\n                            } else {\n                                start = kendo.timezone.toLocalDate(startTime);\n                            }\n                        }\n                        var prevented = that.trigger('resizeEnd', {\n                            event: event,\n                            slot: {\n                                element: slot.element,\n                                start: slot.startDate(),\n                                end: slot.endDate()\n                            },\n                            start: start,\n                            end: end,\n                            resources: that.view()._resourceBySlot(slot)\n                        });\n                        if (!prevented && end.getTime() >= start.getTime()) {\n                            if (clonedEvent.start.getTime() != start.getTime() || clonedEvent.end.getTime() != end.getTime()) {\n                                that.view()._updateEventForResize(event);\n                                that._updateEvent(dir, event, {\n                                    start: start,\n                                    end: end\n                                });\n                            }\n                        }\n                        slot = null;\n                        event = null;\n                    },\n                    dragcancel: function () {\n                        that._dragging = false;\n                        that.view()._removeResizeHint();\n                        slot = null;\n                        event = null;\n                    }\n                });\n            },\n            _updateEvent: function (dir, event, eventInfo) {\n                var that = this;\n                var updateEvent = function (event, callback) {\n                    try {\n                        that._preventRefresh = true;\n                        event.update(eventInfo);\n                        that._convertDates(event);\n                    } finally {\n                        that._preventRefresh = false;\n                    }\n                    if (!that.trigger(SAVE, { event: event })) {\n                        if (callback) {\n                            callback();\n                        }\n                        if (!that._isMultiDrag) {\n                            that.dataSource.sync();\n                        }\n                    }\n                };\n                var recurrenceHead = function (event) {\n                    if (event.recurrenceRule) {\n                        return that.dataSource.getByUid(event.uid);\n                    } else {\n                        return that.dataSource.get(event.recurrenceId);\n                    }\n                };\n                var updateSeries = function () {\n                    var head = recurrenceHead(event);\n                    if (dir == 'south' || dir == 'north') {\n                        if (eventInfo.start) {\n                            var start = kendo.date.getDate(head.start);\n                            kendo.date.setTime(start, getMilliseconds(eventInfo.start));\n                            eventInfo.start = start;\n                        }\n                        if (eventInfo.end) {\n                            var end = kendo.date.getDate(head.end);\n                            kendo.date.setTime(end, getMilliseconds(eventInfo.end));\n                            eventInfo.end = end;\n                        }\n                    }\n                    that.dataSource._removeExceptions(head);\n                    updateEvent(head);\n                };\n                var updateOccurrence = function () {\n                    var head = recurrenceHead(event);\n                    var eventUid;\n                    var callback = function () {\n                        that._convertDates(head);\n                        if (that._selection) {\n                            that._selection.events.push(eventUid);\n                        }\n                    };\n                    var exception = head.toOccurrence({\n                        start: event.start,\n                        end: event.end\n                    });\n                    eventUid = exception.uid;\n                    updateEvent(that.dataSource.add(exception), callback);\n                };\n                if (event.recurrenceRule || event.isOccurrence()) {\n                    var recurrenceMessages = that.options.messages.recurrenceMessages;\n                    that._showRecurringDialog(event, updateOccurrence, updateSeries, {\n                        title: recurrenceMessages.editWindowTitle,\n                        text: recurrenceMessages.editRecurring ? recurrenceMessages.editRecurring : EDITRECURRING,\n                        occurrenceText: recurrenceMessages.editWindowOccurrence,\n                        seriesText: recurrenceMessages.editWindowSeries\n                    });\n                } else {\n                    updateEvent(that.dataSource.getByUid(event.uid));\n                }\n            },\n            _modelForContainer: function (container) {\n                container = $(container).closest('[' + kendo.attr('uid') + ']');\n                return this.dataSource.getByUid(container.attr(kendo.attr('uid')));\n            },\n            showDialog: function (options) {\n                this._editor.showDialog(options);\n            },\n            focus: function () {\n                this.wrapper.focus();\n            },\n            _confirmation: function (callback, model, isResetSeries) {\n                var editable = this.options.editable;\n                if (editable === true || editable.confirmation !== false) {\n                    var messages = this.options.messages;\n                    var title = messages.deleteWindowTitle;\n                    var text = typeof editable.confirmation === STRING ? editable.confirmation : messages.editable.confirmation;\n                    if (this._isEditorOpened() && model.isRecurring()) {\n                        var recurrenceMessages = this.options.messages.recurrenceMessages;\n                        title = recurrenceMessages.deleteWindowTitle;\n                        if (model.isException()) {\n                            text = recurrenceMessages.deleteRecurringConfirmation ? recurrenceMessages.deleteRecurringConfirmation : DELETERECURRINGCONFIRM;\n                        } else {\n                            text = recurrenceMessages.deleteSeriesConfirmation ? recurrenceMessages.deleteSeriesConfirmation : DELETESERIESCONFIRM;\n                        }\n                        if (isResetSeries) {\n                            title = recurrenceMessages.resetSeriesWindowTitle;\n                            text = recurrenceMessages.resetSeriesConfirmation ? recurrenceMessages.resetSeriesConfirmation : RESETSERIESCONFIRM;\n                        }\n                    }\n                    var buttons = [{\n                            name: 'destroy',\n                            text: isResetSeries ? messages.resetSeries : messages.destroy,\n                            click: function () {\n                                callback();\n                            }\n                        }];\n                    if (!(this._isMobile() && kendo.mobile.ui.Pane)) {\n                        buttons.push({\n                            name: 'canceledit',\n                            text: messages.cancel,\n                            click: function () {\n                                callback(true);\n                            }\n                        });\n                    }\n                    this._unbindResize();\n                    this.showDialog({\n                        model: model,\n                        text: text,\n                        title: title,\n                        buttons: buttons\n                    });\n                    this._bindResize();\n                } else {\n                    callback();\n                }\n            },\n            addEvent: function (eventInfo) {\n                var editable = this._editor.editable;\n                var dataSource = this.dataSource;\n                var event;\n                eventInfo = eventInfo || {};\n                var prevented = this.trigger('add', { event: eventInfo });\n                if (!prevented && (editable && editable.end() || !editable)) {\n                    this.cancelEvent();\n                    if (eventInfo && eventInfo.toJSON) {\n                        eventInfo = eventInfo.toJSON();\n                    }\n                    event = dataSource.add(eventInfo);\n                    if (event) {\n                        this.cancelEvent();\n                        this._editEvent(event);\n                    }\n                }\n            },\n            saveEvent: function () {\n                var editor = this._editor;\n                if (!editor) {\n                    return;\n                }\n                var editable = editor.editable;\n                var container = editor.container;\n                var model = this._modelForContainer(container);\n                if (container && editable && editable.end() && !this.trigger(SAVE, {\n                        container: container,\n                        event: model\n                    })) {\n                    if (!model.dirty && !model.isOccurrence()) {\n                        this._convertDates(model, 'remove');\n                    }\n                    this.dataSource.sync();\n                }\n            },\n            cancelEvent: function () {\n                var editor = this._editor;\n                var container = editor.container;\n                var model;\n                if (container) {\n                    model = this._modelForContainer(container);\n                    if (model && model.isOccurrence()) {\n                        this._convertDates(model, 'remove');\n                        this._convertDates(this.dataSource.get(model.recurrenceId), 'remove');\n                    }\n                    this.dataSource.cancelChanges(model);\n                    editor.close();\n                }\n            },\n            editEvent: function (uid) {\n                var model = typeof uid == 'string' ? this.occurrenceByUid(uid) : uid;\n                if (!model) {\n                    return;\n                }\n                this.cancelEvent();\n                if (model.isRecurring()) {\n                    this._editRecurringDialog(model);\n                } else {\n                    this._editEvent(model);\n                }\n            },\n            _editEvent: function (model) {\n                this._unbindResize();\n                this._createPopupEditor(model);\n                this._bindResize();\n            },\n            _editRecurringDialog: function (model) {\n                var that = this;\n                var editOccurrence = function () {\n                    if (model.isException()) {\n                        that._editEvent(model);\n                    } else {\n                        that.addEvent(model);\n                    }\n                };\n                var editSeries = function () {\n                    if (model.recurrenceId) {\n                        model = that.dataSource.get(model.recurrenceId);\n                    }\n                    that._editEvent(model);\n                };\n                var recurrenceMessages = that.options.messages.recurrenceMessages;\n                that._showRecurringDialog(model, editOccurrence, editSeries, {\n                    title: recurrenceMessages.editWindowTitle,\n                    text: recurrenceMessages.editRecurring ? recurrenceMessages.editRecurring : EDITRECURRING,\n                    occurrenceText: recurrenceMessages.editWindowOccurrence,\n                    seriesText: recurrenceMessages.editWindowSeries\n                });\n            },\n            _showRecurringDialog: function (model, editOccurrence, editSeries, messages) {\n                var editable = this.options.editable;\n                var editRecurringMode = isPlainObject(editable) ? editable.editRecurringMode : 'dialog';\n                if (editRecurringMode === 'occurrence' || this._isMultiDrag) {\n                    editOccurrence();\n                } else if (editRecurringMode === 'series') {\n                    editSeries();\n                } else {\n                    this._unbindResize();\n                    this.showDialog({\n                        model: model,\n                        title: messages.title,\n                        text: messages.text,\n                        buttons: [\n                            {\n                                text: messages.occurrenceText,\n                                click: editOccurrence\n                            },\n                            {\n                                text: messages.seriesText,\n                                click: editSeries\n                            }\n                        ]\n                    });\n                    this._bindResize();\n                }\n            },\n            _createButton: function (command) {\n                var template = command.template || COMMANDBUTTONTMPL, commandName = typeof command === STRING ? command : command.name || command.text, options = {\n                        className: 'k-scheduler-' + (commandName || '').replace(/\\s/g, ''),\n                        text: commandName,\n                        attr: ''\n                    };\n                if (!commandName && !(isPlainObject(command) && command.template)) {\n                    throw new Error('Custom commands should have name specified');\n                }\n                if (isPlainObject(command)) {\n                    if (command.className) {\n                        command.className += ' ' + options.className;\n                    }\n                    if (commandName === 'edit' && isPlainObject(command.text)) {\n                        command = extend(true, {}, command);\n                        command.text = command.text.edit;\n                    }\n                    options = extend(true, options, defaultCommands[commandName], command);\n                } else {\n                    options = extend(true, options, defaultCommands[commandName]);\n                }\n                return kendo.template(template)(options);\n            },\n            _convertDates: function (model, method) {\n                var timezone = this.dataSource.reader.timezone;\n                var startTimezone = model.startTimezone;\n                var endTimezone = model.endTimezone;\n                var start = model.start;\n                var end = model.start;\n                method = method || 'apply';\n                startTimezone = startTimezone || endTimezone;\n                endTimezone = endTimezone || startTimezone;\n                if (startTimezone) {\n                    if (timezone) {\n                        if (method === 'apply') {\n                            start = kendo.timezone.convert(model.start, timezone, startTimezone);\n                            end = kendo.timezone.convert(model.end, timezone, endTimezone);\n                        } else {\n                            start = kendo.timezone.convert(model.start, startTimezone, timezone);\n                            end = kendo.timezone.convert(model.end, endTimezone, timezone);\n                        }\n                    } else {\n                        start = kendo.timezone[method](model.start, startTimezone);\n                        end = kendo.timezone[method](model.end, endTimezone);\n                    }\n                    model._set('start', start);\n                    model._set('end', end);\n                }\n            },\n            _createEditor: function () {\n                var that = this;\n                var editor;\n                if (this._isMobile() && kendo.mobile.ui.Pane) {\n                    editor = that._editor = new MobileEditor(this.wrapper, extend({}, this.options, {\n                        target: this,\n                        timezone: that.dataSource.reader.timezone,\n                        resources: that.resources,\n                        createButton: proxy(this._createButton, this)\n                    }));\n                } else {\n                    editor = that._editor = new PopupEditor(this.wrapper, extend({}, this.options, {\n                        target: this,\n                        createButton: proxy(this._createButton, this),\n                        timezone: that.dataSource.reader.timezone,\n                        resources: that.resources\n                    }));\n                }\n                editor.bind('cancel', function (e) {\n                    if (that.trigger('cancel', {\n                            container: e.container,\n                            event: e.model\n                        })) {\n                        e.preventDefault();\n                        return;\n                    }\n                    that.cancelEvent();\n                    that.focus();\n                });\n                editor.bind('edit', function (e) {\n                    if (that.trigger(EDIT, {\n                            container: e.container,\n                            event: e.model\n                        })) {\n                        e.preventDefault();\n                    }\n                });\n                editor.bind('save', function () {\n                    that.saveEvent();\n                });\n                editor.bind('remove', function (e) {\n                    that.removeEvent(e.model);\n                });\n                editor.bind('resetSeries', function (e) {\n                    that._confirmation(function (cancel) {\n                        if (!cancel) {\n                            that.dataSource._removeExceptions(e.model);\n                            that.saveEvent();\n                        }\n                    }, e.model, true);\n                });\n            },\n            _createPopupEditor: function (model) {\n                var editor = this._editor;\n                if (!model.isNew() || model.isOccurrence()) {\n                    if (model.isOccurrence()) {\n                        this._convertDates(model.recurrenceId ? this.dataSource.get(model.recurrenceId) : model);\n                    }\n                    this._convertDates(model);\n                }\n                this.editable = editor.editEvent(model);\n            },\n            removeEvent: function (uid) {\n                var that = this, model = typeof uid == 'string' ? that.occurrenceByUid(uid) : uid;\n                if (!model) {\n                    return;\n                }\n                if (model.isRecurring()) {\n                    that._deleteRecurringDialog(model);\n                } else {\n                    that._confirmation(function (cancel) {\n                        if (!cancel) {\n                            that._removeEvent(model);\n                        }\n                    }, model);\n                }\n            },\n            occurrenceByUid: function (uid) {\n                var occurrence = this.dataSource.getByUid(uid);\n                if (!occurrence) {\n                    occurrence = getOccurrenceByUid(this._data, uid);\n                }\n                return occurrence;\n            },\n            occurrencesInRange: function (start, end) {\n                return new kendo.data.Query(this._data).filter({\n                    logic: 'or',\n                    filters: [\n                        {\n                            logic: 'and',\n                            filters: [\n                                {\n                                    field: 'start',\n                                    operator: 'gte',\n                                    value: start\n                                },\n                                {\n                                    field: 'end',\n                                    operator: 'gte',\n                                    value: start\n                                },\n                                {\n                                    field: 'start',\n                                    operator: 'lt',\n                                    value: end\n                                }\n                            ]\n                        },\n                        {\n                            logic: 'and',\n                            filters: [\n                                {\n                                    field: 'start',\n                                    operator: 'lte',\n                                    value: start\n                                },\n                                {\n                                    field: 'end',\n                                    operator: 'gt',\n                                    value: start\n                                }\n                            ]\n                        }\n                    ]\n                }).toArray();\n            },\n            _removeEvent: function (model) {\n                if (!this.trigger(REMOVE, { event: model })) {\n                    if (this.dataSource.remove(model)) {\n                        this.dataSource.sync();\n                    }\n                }\n            },\n            _deleteRecurringDialog: function (model) {\n                var that = this;\n                var currentModel = model;\n                var editable = that.options.editable;\n                var deleteOccurrence;\n                var deleteSeries;\n                var deleteOccurrenceConfirmation;\n                var deleteSeriesConfirmation;\n                var editRecurringMode = isPlainObject(editable) ? editable.editRecurringMode : 'dialog';\n                deleteOccurrence = function () {\n                    var occurrence = currentModel.recurrenceId ? currentModel : currentModel.toOccurrence();\n                    var head = that.dataSource.get(occurrence.recurrenceId);\n                    that._convertDates(head);\n                    that._removeEvent(occurrence);\n                };\n                deleteSeries = function () {\n                    if (currentModel.recurrenceId) {\n                        currentModel = that.dataSource.get(currentModel.recurrenceId);\n                    }\n                    that._removeEvent(currentModel);\n                };\n                if (editRecurringMode != 'dialog' || that._isEditorOpened()) {\n                    deleteOccurrenceConfirmation = function () {\n                        that._confirmation(function (cancel) {\n                            if (!cancel) {\n                                deleteOccurrence();\n                            }\n                        }, currentModel);\n                    };\n                    deleteSeriesConfirmation = function () {\n                        that._confirmation(function (cancel) {\n                            if (!cancel) {\n                                deleteSeries();\n                            }\n                        }, currentModel);\n                    };\n                }\n                var seriesCallback = deleteSeriesConfirmation || deleteSeries;\n                var occurrenceCallback = deleteOccurrenceConfirmation || deleteOccurrence;\n                if (that._isEditorOpened()) {\n                    if (model.isException()) {\n                        occurrenceCallback();\n                    } else {\n                        seriesCallback();\n                    }\n                } else {\n                    var recurrenceMessages = that.options.messages.recurrenceMessages;\n                    that._showRecurringDialog(model, occurrenceCallback, seriesCallback, {\n                        title: recurrenceMessages.deleteWindowTitle,\n                        text: recurrenceMessages.deleteRecurring ? recurrenceMessages.deleteRecurring : DELETERECURRING,\n                        occurrenceText: recurrenceMessages.deleteWindowOccurrence,\n                        seriesText: recurrenceMessages.deleteWindowSeries\n                    });\n                }\n            },\n            _isEditorOpened: function () {\n                return !!this._editor.container;\n            },\n            _unbindView: function (view) {\n                var that = this;\n                that.angular('cleanup', function () {\n                    return { elements: that.items() };\n                });\n                view.destroy();\n            },\n            _bindView: function (view) {\n                var that = this;\n                if (that.options.editable) {\n                    if (that._viewRemoveHandler) {\n                        view.unbind(REMOVE, that._viewRemoveHandler);\n                    }\n                    that._viewRemoveHandler = function (e) {\n                        that.removeEvent(e.uid);\n                    };\n                    view.bind(REMOVE, that._viewRemoveHandler);\n                    if (that._viewAddHandler) {\n                        view.unbind(ADD, that._viewAddHandler);\n                    }\n                    that._viewAddHandler = function (e) {\n                        that.addEvent(e.eventInfo);\n                    };\n                    view.bind(ADD, this._viewAddHandler);\n                    if (that._viewEditHandler) {\n                        view.unbind(EDIT, that._viewEditHandler);\n                    }\n                    that._viewEditHandler = function (e) {\n                        that.editEvent(e.uid);\n                    };\n                    view.bind(EDIT, this._viewEditHandler);\n                }\n                if (that._viewNavigateHandler) {\n                    view.unbind('navigate', that._viewNavigateHandler);\n                }\n                that._viewNavigateHandler = function (e) {\n                    if (e.view) {\n                        var switchWorkDay = 'isWorkDay' in e;\n                        var action = switchWorkDay ? 'changeWorkDay' : 'changeView';\n                        if (!that.trigger('navigate', {\n                                view: e.view,\n                                isWorkDay: e.isWorkDay,\n                                action: action,\n                                date: e.date\n                            })) {\n                            if (switchWorkDay) {\n                                that._workDayMode = e.isWorkDay;\n                            }\n                            that._selectView(e.view);\n                            that.date(e.date);\n                        }\n                    }\n                };\n                view.bind('navigate', that._viewNavigateHandler);\n                if (that._viewActivateHandler) {\n                    view.unbind('activate', that._viewActivateHandler);\n                }\n                that._viewActivateHandler = function () {\n                    var view = this;\n                    if (that._selection) {\n                        view.constrainSelection(that._selection);\n                        that._select();\n                        that._adjustSelectedDate();\n                    }\n                };\n                view.bind('activate', that._viewActivateHandler);\n            },\n            _selectView: function (name) {\n                var that = this;\n                if (name && that.views[name]) {\n                    if (that._selectedView) {\n                        that._unbindView(that._selectedView);\n                    }\n                    that._selectedView = that._renderView(name);\n                    that._selectedViewName = name;\n                    if (that._viewsCount > 1) {\n                        var viewButton = VIEWBUTTONTEMPLATE({\n                            views: that.views,\n                            view: name,\n                            ns: kendo.ns\n                        });\n                        var firstButton = that.toolbar.find('.k-scheduler-views li:first-child');\n                        if (firstButton.is('.k-current-view')) {\n                            firstButton.replaceWith(viewButton);\n                        } else {\n                            that.toolbar.find('.k-scheduler-views').prepend(viewButton);\n                        }\n                        var viewButtons = that.toolbar.find('.k-scheduler-views li').removeClass('k-state-selected');\n                        viewButtons.end().find('.k-view-' + name.replace(/\\./g, '\\\\.').toLowerCase()).addClass('k-state-selected');\n                    }\n                }\n            },\n            view: function (name) {\n                var that = this;\n                if (name) {\n                    that._selectView(name);\n                    that.rebind();\n                    return;\n                }\n                return that._selectedView;\n            },\n            viewName: function () {\n                return this.view().name;\n            },\n            _renderView: function (name) {\n                var view = this._initializeView(name);\n                this._bindView(view);\n                if (kendo.support.mouseAndTouchPresent || kendo.support.pointers) {\n                    view.content.css('-ms-touch-action', 'pinch-zoom');\n                    view.content.css('touch-action', 'pinch-zoom');\n                }\n                this._model.set('formattedDate', view.dateForTitle());\n                this._model.set('formattedShortDate', view.shortDateForTitle());\n                return view;\n            },\n            resize: function (force) {\n                var size = this.getSize();\n                var currentSize = this._size;\n                var view = this.view();\n                if (!view || !view.groups) {\n                    return;\n                }\n                if (force || !currentSize || size.width !== currentSize.width || size.height !== currentSize.height) {\n                    this.refresh({ action: 'resize' });\n                    this._size = size;\n                }\n            },\n            _adjustSelectedDate: function () {\n                var date = this._model.selectedDate, selection = this._selection, start = selection.start;\n                if (start && !kendo.date.isInDateRange(date, getDate(start), getDate(selection.end))) {\n                    date.setFullYear(start.getFullYear(), start.getMonth(), start.getDate());\n                }\n            },\n            _initializeView: function (name) {\n                var view = this.views[name];\n                if (view) {\n                    var isSettings = isPlainObject(view), type = view.type;\n                    if (typeof type === STRING) {\n                        type = kendo.getter(view.type)(window);\n                    }\n                    if (type) {\n                        view = new type(this.wrapper, trimOptions(extend(true, {}, this.options, isSettings ? view : {}, {\n                            resources: this.resources,\n                            date: this.date(),\n                            showWorkHours: this._workDayMode\n                        })));\n                    } else {\n                        throw new Error('There is no such view');\n                    }\n                }\n                return view;\n            },\n            _views: function () {\n                var views = this.options.views;\n                var view;\n                var defaultView;\n                var selected;\n                var isSettings;\n                var name;\n                var type;\n                var idx;\n                var length;\n                this.views = {};\n                this._viewsCount = 0;\n                for (idx = 0, length = views.length; idx < length; idx++) {\n                    var hasType = false;\n                    view = views[idx];\n                    isSettings = isPlainObject(view);\n                    if (isSettings) {\n                        type = name = view.type ? view.type : view;\n                        if (typeof type !== STRING) {\n                            name = view.name || view.title;\n                            hasType = true;\n                        }\n                    } else {\n                        type = name = view;\n                    }\n                    defaultView = defaultViews[name];\n                    if (defaultView && !hasType) {\n                        view.type = defaultView.type;\n                        defaultView.title = this.options.messages.views[name];\n                        if (defaultView.type === 'day') {\n                            defaultView.messages = { allDay: this.options.messages.allDay };\n                        } else if (defaultView.type === 'agenda') {\n                            defaultView.messages = {\n                                event: this.options.messages.event,\n                                date: this.options.messages.date,\n                                time: this.options.messages.time\n                            };\n                        }\n                    }\n                    view = extend({ title: name }, defaultView, isSettings ? view : {});\n                    if (name) {\n                        this.views[name] = view;\n                        this._viewsCount++;\n                        if (!selected || view.selected) {\n                            selected = name;\n                        }\n                    }\n                }\n                if (selected) {\n                    this._selectedViewName = selected;\n                }\n            },\n            rebind: function () {\n                this.dataSource.fetch();\n            },\n            _dataSource: function () {\n                var that = this, options = that.options, dataSource = options.dataSource;\n                dataSource = isArray(dataSource) ? { data: dataSource } : dataSource;\n                if (options.timezone && !(dataSource instanceof SchedulerDataSource)) {\n                    dataSource = extend(true, dataSource, { schema: { timezone: options.timezone } });\n                } else if (dataSource instanceof SchedulerDataSource) {\n                    options.timezone = dataSource.options.schema ? dataSource.options.schema.timezone : '';\n                }\n                if (that.dataSource && that._refreshHandler) {\n                    that.dataSource.unbind(CHANGE, that._refreshHandler).unbind('progress', that._progressHandler).unbind('error', that._errorHandler);\n                } else {\n                    that._refreshHandler = proxy(that.refresh, that);\n                    that._progressHandler = proxy(that._requestStart, that);\n                    that._errorHandler = proxy(that._error, that);\n                }\n                that.dataSource = kendo.data.SchedulerDataSource.create(dataSource).bind(CHANGE, that._refreshHandler).bind('progress', that._progressHandler).bind('error', that._errorHandler);\n                that.options.dataSource = that.dataSource;\n            },\n            _error: function () {\n                this._progress(false);\n            },\n            _requestStart: function () {\n                this._progress(true);\n            },\n            _progress: function (toggle) {\n                var element = this.element.find('.k-scheduler-content');\n                kendo.ui.progress(element, toggle);\n            },\n            _resources: function () {\n                var that = this;\n                var resources = that.options.resources;\n                for (var idx = 0; idx < resources.length; idx++) {\n                    var resource = resources[idx];\n                    var field = resource.field;\n                    var dataSource = resource.dataSource;\n                    if (!field || !dataSource) {\n                        throw new Error('The \"field\" and \"dataSource\" options of the scheduler resource are mandatory.');\n                    }\n                    that.resources.push({\n                        field: field,\n                        name: resource.name || field,\n                        title: resource.title || field,\n                        dataTextField: resource.dataTextField || 'text',\n                        dataValueField: resource.dataValueField || 'value',\n                        dataColorField: resource.dataColorField || 'color',\n                        valuePrimitive: resource.valuePrimitive != null ? resource.valuePrimitive : true,\n                        multiple: resource.multiple || false,\n                        dataSource: kendo.data.DataSource.create(dataSource)\n                    });\n                }\n                var promises = $.map(that.resources, function (resource) {\n                    return resource.dataSource.fetch();\n                });\n                if (!that.options.autoBind) {\n                    that._selectView(that._selectedViewName);\n                } else {\n                    $.when.apply(null, promises).then(function () {\n                        that.view(that._selectedViewName);\n                    });\n                }\n            },\n            _initModel: function () {\n                var that = this;\n                that._model = kendo.observable({\n                    selectedDate: new Date(this.options.date),\n                    formattedDate: '',\n                    formattedShortDate: ''\n                });\n                that._model.bind('change', function (e) {\n                    if (e.field === 'selectedDate') {\n                        that.view(that._selectedViewName);\n                    }\n                });\n            },\n            _wrapper: function () {\n                var that = this;\n                var options = that.options;\n                var height = options.height;\n                var width = options.width;\n                that.wrapper = that.element.addClass('k-widget k-scheduler k-floatwrap').attr('role', 'grid').attr('aria-multiselectable', true);\n                if (that._isMobile()) {\n                    that.wrapper.addClass('k-scheduler-mobile');\n                }\n                if (that._isMobilePhoneView()) {\n                    that.wrapper.addClass('k-scheduler-phone');\n                }\n                if (height) {\n                    that.wrapper.height(height);\n                }\n                if (width) {\n                    that.wrapper.width(width);\n                }\n            },\n            date: function (value) {\n                if (value != null && getDate(value) >= getDate(this.options.min) && getDate(value) <= getDate(this.options.max)) {\n                    this._model.set('selectedDate', value);\n                }\n                return getDate(this._model.get('selectedDate'));\n            },\n            _toolbar: function () {\n                var that = this;\n                var options = that.options;\n                var commands = [];\n                if (options.toolbar) {\n                    commands = $.isArray(options.toolbar) ? options.toolbar : [options.toolbar];\n                }\n                var template = this._isMobilePhoneView() ? MOBILETOOLBARTEMPLATE : TOOLBARTEMPLATE;\n                var toolbar = $(template({\n                    messages: options.messages,\n                    pdf: $.grep(commands, function (item) {\n                        return item == 'pdf' || item.name == 'pdf';\n                    }).length > 0,\n                    ns: kendo.ns,\n                    view: that._selectedViewName,\n                    views: that.views,\n                    viewsCount: that._viewsCount\n                }));\n                that.wrapper.append(toolbar);\n                that.toolbar = toolbar;\n                kendo.bind(that.toolbar, that._model);\n                toolbar.on(CLICK + NS, '.k-pdf', function (e) {\n                    e.preventDefault();\n                    that.saveAsPDF();\n                });\n                toolbar.on(CLICK + NS, '.k-scheduler-navigation li', function (e) {\n                    var li = $(this);\n                    var date = new Date(that.date());\n                    var action = '';\n                    var currentDate = new Date();\n                    var timezone = that.options.timezone;\n                    e.preventDefault();\n                    if (li.hasClass('k-nav-today')) {\n                        action = 'today';\n                        if (timezone) {\n                            var timezoneOffset = kendo.timezone.offset(currentDate, timezone);\n                            date = kendo.timezone.convert(currentDate, currentDate.getTimezoneOffset(), timezoneOffset);\n                        } else {\n                            date = currentDate;\n                        }\n                    } else if (li.hasClass('k-nav-next')) {\n                        action = 'next';\n                        date = that.view().nextDate();\n                    } else if (li.hasClass('k-nav-prev')) {\n                        action = 'previous';\n                        date = that.view().previousDate();\n                    } else if (li.hasClass('k-nav-current') && !that._isMobilePhoneView()) {\n                        that._showCalendar();\n                        return;\n                    }\n                    if (!that.trigger('navigate', {\n                            view: that._selectedViewName,\n                            action: action,\n                            date: date\n                        })) {\n                        that.date(date);\n                    }\n                });\n                toolbar.on(CLICK + NS, '.k-scheduler-views li:not(.k-current-view), .k-scheduler-refresh', function (e) {\n                    e.preventDefault();\n                    var name = $(this).attr(kendo.attr('name'));\n                    if (!that.trigger('navigate', {\n                            view: name,\n                            action: 'changeView',\n                            date: that.date()\n                        })) {\n                        that.view(name);\n                        that.element.find('.' + EXPANDEDSTATE).removeClass(EXPANDEDSTATE);\n                    }\n                });\n                toolbar.on(CLICK + NS, '.k-scheduler-views li.k-current-view', function (e) {\n                    e.preventDefault();\n                    that.element.find('.k-scheduler-views').toggleClass(EXPANDEDSTATE);\n                    $(document).on(MOUSEDOWN + NS, function (e) {\n                        if ($(e.target).closest('.k-scheduler-views').length === 0) {\n                            that.element.find('.' + EXPANDEDSTATE).removeClass(EXPANDEDSTATE);\n                            $(document).off(CLICK + NS);\n                        }\n                    });\n                });\n                toolbar.find('li').hover(function () {\n                    $(this).addClass('k-state-hover');\n                }, function () {\n                    $(this).removeClass('k-state-hover');\n                });\n            },\n            _showCalendar: function () {\n                var that = this, target = that.toolbar.find('.k-nav-current'), html = $('<div class=\"k-calendar-container\"><div class=\"k-scheduler-calendar\"/></div>');\n                if (!that.popup) {\n                    that.popup = new Popup(html, {\n                        anchor: target,\n                        activate: function () {\n                            if (that.popup && that.calendar) {\n                                that.popup._toggleResize(false);\n                                that.calendar.element.find('table').focus();\n                                that.popup._toggleResize(true);\n                            }\n                        },\n                        open: function () {\n                            if (!that.calendar) {\n                                that.calendar = new Calendar(this.element.find('.k-scheduler-calendar'), {\n                                    change: function () {\n                                        var date = this.value();\n                                        if (!that.trigger('navigate', {\n                                                view: that._selectedViewName,\n                                                action: 'changeDate',\n                                                date: date\n                                            })) {\n                                            that.date(date);\n                                            that.popup.close();\n                                        }\n                                        that._selectedView.element.focus();\n                                        that.toolbar.find('.k-nav-current').focus().addClass(FOCUSEDSTATE);\n                                    },\n                                    min: that.options.min,\n                                    max: that.options.max\n                                });\n                            }\n                            that.calendar.element.on('keydown' + NS, function (e) {\n                                if (e.keyCode === keys.ESC || e.keyCode === keys.TAB) {\n                                    that.popup.close();\n                                    that._selectedView.element.focus();\n                                    that.toolbar.find('.k-nav-current').focus().addClass(FOCUSEDSTATE);\n                                }\n                            });\n                            that.calendar.value(that.date());\n                        },\n                        copyAnchorStyles: false\n                    });\n                }\n                that.popup.open();\n            },\n            refresh: function (e) {\n                var that = this;\n                var view = this.view();\n                this._progress(false);\n                this.angular('cleanup', function () {\n                    return { elements: that.items() };\n                });\n                e = e || {};\n                if (!view) {\n                    return;\n                }\n                if (e && e.action === 'itemchange' && (this._editor.editable || this._preventRefresh)) {\n                    return;\n                }\n                if (this.trigger('dataBinding', {\n                        action: e.action || 'rebind',\n                        index: e.index,\n                        items: e.items\n                    })) {\n                    return;\n                }\n                if (!(e && e.action === 'resize') && this._editor) {\n                    this._editor.close();\n                }\n                this._data = this.dataSource.expand(view.startDate(), view.visibleEndDate());\n                view.refreshLayout();\n                view.render(this._data);\n                this.trigger('dataBound');\n            },\n            slotByPosition: function (x, y) {\n                var view = this.view();\n                if (!view._slotByPosition) {\n                    return null;\n                }\n                var slot = view._slotByPosition(x, y);\n                if (!slot) {\n                    return null;\n                }\n                return {\n                    startDate: slot.startDate(),\n                    endDate: slot.endDate(),\n                    groupIndex: slot.groupIndex,\n                    element: slot.element,\n                    isDaySlot: slot.isDaySlot\n                };\n            },\n            slotByElement: function (element) {\n                var offset = $(element).offset();\n                return this.slotByPosition(offset.left, offset.top);\n            },\n            resourcesBySlot: function (slot) {\n                return this.view()._resourceBySlot(slot);\n            }\n        });\n        var defaultViews = {\n            day: { type: 'kendo.ui.DayView' },\n            week: { type: 'kendo.ui.WeekView' },\n            workWeek: { type: 'kendo.ui.WorkWeekView' },\n            agenda: { type: 'kendo.ui.AgendaView' },\n            month: { type: 'kendo.ui.MonthView' },\n            timeline: { type: 'kendo.ui.TimelineView' },\n            timelineWeek: { type: 'kendo.ui.TimelineWeekView' },\n            timelineWorkWeek: { type: 'kendo.ui.TimelineWorkWeekView' },\n            timelineMonth: { type: 'kendo.ui.TimelineMonthView' }\n        };\n        ui.plugin(Scheduler);\n        if (kendo.PDFMixin) {\n            kendo.PDFMixin.extend(Scheduler.prototype);\n            var SCHEDULER_EXPORT = 'k-scheduler-pdf-export';\n            Scheduler.fn._drawPDF = function (progress) {\n                var wrapper = this.wrapper;\n                var styles = wrapper[0].style.cssText;\n                wrapper.css({\n                    width: wrapper.width(),\n                    height: wrapper.height()\n                });\n                wrapper.addClass(SCHEDULER_EXPORT);\n                var scheduler = this;\n                var promise = new $.Deferred();\n                var table = wrapper.find('.k-scheduler-content').find('table').css('table-layout', 'auto');\n                setTimeout(function () {\n                    table.css('table-layout', 'fixed');\n                    scheduler.resize(true);\n                    scheduler._drawPDFShadow({}, { avoidLinks: scheduler.options.pdf.avoidLinks }).done(function (group) {\n                        var args = {\n                            page: group,\n                            pageNumber: 1,\n                            progress: 1,\n                            totalPages: 1\n                        };\n                        progress.notify(args);\n                        promise.resolve(args.page);\n                    }).fail(function (err) {\n                        promise.reject(err);\n                    }).always(function () {\n                        wrapper[0].style.cssText = styles;\n                        wrapper.removeClass(SCHEDULER_EXPORT);\n                        scheduler.resize(true);\n                        scheduler.resize(true);\n                    });\n                });\n                return promise;\n            };\n        }\n        var TimezoneEditor = Widget.extend({\n            init: function (element, options) {\n                var that = this, zones = kendo.timezone.windows_zones;\n                if (!zones || !kendo.timezone.zones_titles) {\n                    throw new Error('kendo.timezones.min.js is not included.');\n                }\n                Widget.fn.init.call(that, element, options);\n                that.wrapper = that.element;\n                that._zonesQuery = new kendo.data.Query(zones);\n                that._zoneTitleId = kendo.guid();\n                that._zoneTitlePicker();\n                that._zonePicker();\n                that._zoneTitle.bind('cascade', function () {\n                    if (!this.value()) {\n                        that._zone.wrapper.hide();\n                    }\n                });\n                that._zone.bind('cascade', function () {\n                    that._value = this.value();\n                    that.trigger('change');\n                });\n                that.value(that.options.value);\n            },\n            options: {\n                name: 'TimezoneEditor',\n                value: '',\n                optionLabel: 'No timezone'\n            },\n            events: ['change'],\n            _zoneTitlePicker: function () {\n                var that = this, zoneTitle = $('<input id=\"' + that._zoneTitleId + '\" aria-label=\"' + that.options.title + '\"/>').appendTo(that.wrapper);\n                that._zoneTitle = new kendo.ui.DropDownList(zoneTitle, {\n                    dataSource: kendo.timezone.zones_titles,\n                    dataValueField: 'other_zone',\n                    dataTextField: 'name',\n                    optionLabel: that.options.optionLabel\n                });\n            },\n            _zonePicker: function () {\n                var that = this, zone = $('<input aria-label=\"' + that.options.title + '\"/>').appendTo(this.wrapper);\n                that._zone = new kendo.ui.DropDownList(zone, {\n                    dataValueField: 'zone',\n                    dataTextField: 'territory',\n                    dataSource: that._zonesQuery.data,\n                    cascadeFrom: that._zoneTitleId,\n                    dataBound: function () {\n                        that._value = this.value();\n                        this.wrapper.toggle(this.dataSource.view().length > 1);\n                    }\n                });\n                that._zone.wrapper.hide();\n            },\n            destroy: function () {\n                Widget.fn.destroy.call(this);\n                kendo.destroy(this.wrapper);\n            },\n            value: function (value) {\n                var that = this, zone;\n                if (value === undefined) {\n                    return that._value;\n                }\n                zone = that._zonesQuery.filter({\n                    field: 'zone',\n                    operator: 'eq',\n                    value: value\n                }).data[0];\n                if (zone) {\n                    that._zoneTitle.value(zone.other_zone);\n                    that._zone.value(zone.zone);\n                } else {\n                    that._zoneTitle.select(0);\n                }\n            }\n        });\n        ui.plugin(TimezoneEditor);\n        var ZONETITLEOPTIONTEMPLATE = kendo.template('<option value=\"#=other_zone#\">#=name#</option>');\n        var ZONEOPTIONTEMPLATE = kendo.template('<option value=\"#=zone#\">#=territory#</option>');\n        var MobileTimezoneEditor = Widget.extend({\n            init: function (element, options) {\n                var that = this, zones = kendo.timezone.windows_zones;\n                if (!zones || !kendo.timezone.zones_titles) {\n                    throw new Error('kendo.timezones.min.js is not included.');\n                }\n                Widget.fn.init.call(that, element, options);\n                that.wrapper = that.element;\n                that._zonesQuery = new kendo.data.Query(zones);\n                that._zoneTitlePicker();\n                that._zonePicker();\n                that.value(that.options.value);\n            },\n            options: {\n                name: 'MobileTimezoneEditor',\n                optionLabel: 'No timezone',\n                value: ''\n            },\n            events: ['change'],\n            _bindZones: function (value) {\n                var data = value ? this._filter(value) : [];\n                this._zone.html(this._options(data, ZONEOPTIONTEMPLATE));\n            },\n            _filter: function (value) {\n                return this._zonesQuery.filter({\n                    field: 'other_zone',\n                    operator: 'eq',\n                    value: value\n                }).data;\n            },\n            _options: function (data, template, optionLabel) {\n                var idx = 0;\n                var html = '';\n                var length = data.length;\n                if (optionLabel) {\n                    html += template({\n                        other_zone: '',\n                        name: optionLabel\n                    });\n                }\n                for (; idx < length; idx++) {\n                    html += template(data[idx]);\n                }\n                return html;\n            },\n            _zoneTitlePicker: function () {\n                var that = this;\n                var options = that._options(kendo.timezone.zones_titles, ZONETITLEOPTIONTEMPLATE, that.options.optionLabel);\n                that._zoneTitle = $('<select>' + options + '</select>').appendTo(that.wrapper).change(function () {\n                    var value = this.value;\n                    var zone = that._zone;\n                    that._bindZones(value);\n                    if (value && zone[0].children.length > 1) {\n                        zone.show();\n                    } else {\n                        zone.hide();\n                    }\n                    that._value = zone[0].value;\n                    that.trigger('change');\n                });\n            },\n            _zonePicker: function () {\n                var that = this;\n                that._zone = $('<select style=\"display:none\"></select>').appendTo(this.wrapper).change(function () {\n                    that._value = this.value;\n                    that.trigger('change');\n                });\n                that._bindZones(that._zoneTitle.val());\n                that._value = that._zone[0].value;\n            },\n            destroy: function () {\n                Widget.fn.destroy.call(this);\n                kendo.destroy(this.wrapper);\n            },\n            value: function (value) {\n                var that = this;\n                var zonePicker = that._zone;\n                var other_zone = '';\n                var zone_value = '';\n                var zone;\n                if (value === undefined) {\n                    return that._value;\n                }\n                zone = that._zonesQuery.filter({\n                    field: 'zone',\n                    operator: 'eq',\n                    value: value\n                }).data[0];\n                if (zone) {\n                    zone_value = zone.zone;\n                    other_zone = zone.other_zone;\n                }\n                that._zoneTitle.val(other_zone);\n                that._bindZones(other_zone);\n                zonePicker.val(zone_value);\n                zone_value = zonePicker[0].value;\n                if (zone_value && zonePicker[0].children.length > 1) {\n                    zonePicker.show();\n                } else {\n                    zonePicker.hide();\n                }\n                that._value = zone_value;\n            }\n        });\n        ui.plugin(MobileTimezoneEditor);\n    }(window.kendo.jQuery));\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));"]}