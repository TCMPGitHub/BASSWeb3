{"version":3,"sources":["kendo.treelist.js"],"names":["f","define","$","undefined","is","field","object","not","func","isCellVisible","this","style","display","sortCells","cells","indexAttr","kendo","attr","sort","a","b","indexA","indexB","index","parseInt","leafDataCells","container","rows","find","filter","el","hasClass","length","rowSpan","add","last","createPlaceholders","options","i","level","spans","className","push","kendoDomElement","columnsWidth","cols","colWidth","idx","width","indexOf","syncTableHeight","table1","table2","lockedHeigth","tableHeigth","row","diff","offsetHeight","height","isInputElement","element","isLocked","column","parentColumn","locked","findParentColumnWithChildren","columns","source","rtl","target","targetLocked","findReorderTarget","before","masterColumns","parent","parentColumns","sourceIndex","targetIndex","columnParent","inArray","leafColumns","result","concat","visibleChildColumns","grep","hidden","isVisible","visibleColumns","normalizeColumns","hide","map","extend","flatColumnsInDomOrder","flatColumns","lockedColumns","nonLockedColumns","targetParentContainerIndex","parentColumnsCells","cell","parentCellsWithChildren","offset","prevCells","parentCell","closest","headerRows","eq","prevAll","colSpan","Math","max","getAttribute","childColumnsCells","child","value","colSpanAttr","next","parents","columnParents","inserted","splice","children","columnPosition","cellCounts","updateCellIndex","thead","position","allColumns","depth","temp","updateRowSpans","containerDOMtree","each","attributes","rowspan","removeEmptyRows","emptyRows","shouldRemove","remove","focusTable","table","direct","scrollTop","scrollLeft","focusElement","one","e","preventDefault","focus","adjustRowHeight","row1","row2","offsetHeight1","offsetHeight2","isColumnEditable","model","selectable","command","editable","isDirtyColumn","dirty","dirtyFields","isUndefined","isNumber","isNaN","TreeListModel","TreeListDataSource","TreeListPager","Editor","PopupEditor","IncellEditor","TreeList","data","kendoDom","dom","kendoTextElement","text","kendoHtmlElement","html","outerWidth","_outerWidth","keys","outerHeight","_outerHeight","ui","DataBoundWidget","DataSource","ObservableArray","Query","Model","browser","support","kendoTemplate","template","activeElement","_activeElement","isArray","proxy","isPlainObject","Array","prototype","STRING","CHANGE","ITEM_CHANGE","ERROR","PROGRESS","DOT","NS","CLICK","MOUSEDOWN","BEFORE_EDIT","EDIT","PAGE","PAGE_CHANGE","SAVE","SAVE_CHANGES","EXPAND","COLLAPSE","CELL_CLOSE","REMOVE","DATA_CELL","DATABINDING","DATABOUND","CANCEL","TABINDEX","FILTERMENUINIT","FILTERMENUOPEN","COLUMNHIDE","COLUMNSHOW","HEADERCELLS","COLUMNREORDER","COLUMNRESIZE","COLUMNMENUINIT","COLUMNMENUOPEN","COLUMNLOCK","COLUMNUNLOCK","PARENTIDFIELD","DRAGSTART","DRAG","DROP","DRAGEND","NAVROW","NAVCELL","NAVHEADER","ITEMROW","FIRSTNAVITEM","LASTITEMROW","isRtl","HEIGHT","INCELL","INLINE","POPUP","TABLE","classNames","wrapper","header","button","alt","editCell","editRow","dirtyCell","group","gridToolbar","gridHeader","gridHeaderWrap","gridContent","gridContentWrap","gridFilter","footerTemplate","focused","loading","refresh","retry","selected","status","link","withIcon","filterable","icon","iconFilter","iconCollapse","iconExpand","iconHidden","iconPlaceHolder","input","dropPositions","dropTop","dropBottom","dropAdd","dropMiddle","dropDenied","dragStatus","dragClue","dragClueText","defaultCommands","create","imageClass","methodName","createchild","destroy","edit","update","canceledit","cancel","save","excel","pdf","TreeView","Class","init","that","defaultParentId","idField","parentIdField","childrenMap","dataItem","dataItemId","dataItemParentId","dataLength","_childrenMap","idsMap","_idMap","dataMaps","_dataMaps","ids","rootNodes","removeCollapsedSubtreesFromRootNodes","prunedTree","maxDepth","Infinity","removeCollapsedSubtrees","rootNode","childIdx","expanded","TreeQuery","constructor","process","inPlace","query","filterCallback","skip","take","total","filteredChildrenMap","view","prunedData","normalizeGroup","normalizeSort","toArray","processFromRootNodes","range","id","parentId","fields","type","nullable","fn","call","_loaded","get","accept","set","initiator","loaded","shouldSerialize","base","_getDataMaps","schema","modelBase","_addRange","_createNewModel","fromModel","_modelParentIdField","_isPageable","_shouldWrap","_push","operation","_readData","_getData","_data","newData","toJSON","_replaceData","sourceLength","_readAggregates","_aggregateResult","reader","aggregates","_defaultParentId","read","root","_removeChildData","_removeFromDataMaps","removePristine","pageable","_getChildrenMap","items","_subtree","shouldRemovePristine","removedItems","_removeItems","pushDestroy","insert","newModel","_insertInDataMaps","_filterCallback","item","_modelIdField","parentSubtree","_parentNode","unshift","parentNode","len","_observeView","_createTreeView","_initIdsMap","_idsMap","_getIdsMap","_getFilteredChildrenMap","filteredChildren","_setFilteredChildrenMap","_initDataMaps","_initChildrenMapForParent","_defaultTreeModelOptions","modelOptions","_modelOptions","_defaultDataItemType","ObservableObject","_calculateAggregates","subtree","pageableChildrenMap","aggregate","_queryProcess","hasLoadedChildren","_processPageableQuery","hasChildren","slice","_processTreeQuery","_replaceWithObservedData","_processDataItemsState","_replaceItemsInDataMaps","dataToAggregate","_dataToAggregate","_replaceInMapWithObservedData","firstDataItem","firstItemParents","_parentNodes","observableArray","directParent","viewIndex","itemType","_insertInIdsMap","_replaceInMap","replacement","itemInArray","itemIndex","dataToReplace","replacementArray","itemToReplace","itemToReplaceId","dataItemIndex","observableItem","_getById","at","key","_insertInChildrenMap","itemId","_removeFromIdsMap","_removeFromChildrenMap","_indexInChildrenMap","_itemIndexInMap","dataMap","uid","_isLastItemInView","_defaultPageableQueryOptions","page","pageSize","serverPaging","_updateTotalForAction","action","_updateCollapsedTotalForAction","_collapsedTotal","_calculateCollapsedTotal","_setFilterTotal","filterTotal","setDefaultValue","_setFilterCollapsedTotal","serverFiltering","collapsedTotal","_dataWithoutCollapsedSubtrees","_removeCollapsedSubtrees","_processDataItemState","_queueRequest","callback","_modelLoaded","childNodes","_modelError","_error","success","requestParams","_observe","_total","load","method","remote","serverSorting","serverGrouping","serverAggregates","defaultPromise","Deferred","resolve","promise","done","fail","contains","rootId","_byParentId","defaultId","current","defaults","_rootNode","_pageableRootNodes","nodesWithoutParentInView","node","_nodesWithoutParentInView","_parentNodesNotInView","parentInView","_parentInView","_pageableModelLevel","baseFilter","_pageableQueryOptions","_flatData","cancelChanges","_restorePageSizeAfterAddChild","_modelCanceled","_changesCanceled","_setAddChildPageSize","queryOptions","_addChildPageSize","_query","sync","then","_syncEnd","Pager","name","totalPages","dataSource","_filter","ceil","_createDataSource","Observable","bind","events","_fields","_initContainer","createEditable","Editable","clearContainer","change","_isEditable","format","editor","end","close","empty","removeAttr","_attachHandlers","cycleForm","open","window","modal","resizable","draggable","title","visible","formContent","append","_appendTemplate","_appendFields","_appendButtons","Tree","render","appendTo","Window","form","unescape","class","fieldRenderer","commandRenderer","closeHandler","_cancelProxy","_cancel","on","_saveProxy","_save","userTriggered","_detachHandlers","off","trigger","center","_dataSource","_aria","_columns","_layout","_navigatable","_selectable","_sortable","_resizable","_filterable","_attachEvents","_toolbar","_scrollable","_reorderable","_columnMenu","_minScreenSupport","_draggable","_pageable","autoBind","fetch","_hasLockedColumns","widget","addClass","_resizeHandler","resize","notify","move","_dragging","HierarchicalDragAndDrop","$angular","autoScroll","itemSelector","allowedContainers","hintText","separator","join","destination","dest","src","itemFromTarget","tr","content","dragstart","drag","drop","removeClass","dragend","isPrevented","originalSrcParentId","originalSrcIndex","reorderable","dropHintContainer","dropPositionFrom","dropHint","itemFor","tbody","_itemFor","lockedContent","lockedTable","scrollables","touchScroller","scrollable","_wheelScroll","movable","_touchScroller","sender","x","y","delta","lockedDiv","ctrlKey","wheelDeltaY","currentTarget","scrollHeight","clientHeight","_progress","messages","_showStatus","_render","error","isCurrentInHeader","currentIndex","_cancelEditor","_adjustHeight","navigatable","_isActiveInTable","cellIndex","_restoreCurrent","_angularFooters","footer","allAggregates","footerRows","_footerItems","_angularFooter","angular","elements","col","_items","dataItems","n","tmp","message","_contentTree","_lockedContentTree","_hideStatus","show","isHeightSet","contentWrap","toolbar","pagerHeight","pager","scrollbar","css","initialHeight","newHeight","offsetWidth","clientWidth","_resize","size","force","_applyLockedContainersWidth","any","hideMinScreenCols","minScreenResizeHandler","_iterateMinScreenCols","screenWidth","minWidth","minScreenWidth","hideColumn","showColumn","innerWidth","screen","unbind","_refreshHandler","_errorHandler","_progressHandler","_navigatableTables","_current","_draggableInstance","_destroyEditor","_destroyPager","_autoExpandable","_dataSourceFetchProxy","lockedHeader","_statusTree","_headerTree","_lockedHeaderColsTree","_lockedContentColsTree","_lockedHeaderTree","sortable","columnMenu","noRows","requestFailed","commands","hierarchy","_toggle","expand","afterModelLoaded","_toggleData","_syncLockedContentHeight","_isIncellEditable","closeCell","always","_togglePageableData","_renderProgress","_refreshPager","collapse","_toggleChildren","event","tables","headerTables","touch","_tableClick","_tableFocus","_tableBlur","_tableKeyDown","td","lockedColumnOffset","active","rowIndex","newCurrent","_updateCurrentAttr","_scrollCurrent","_lastCellIndex","_setCurrent","tableContainer","isInLockedContainer","isInContent","scrollableContainer","_scrollTo","_relatedRow","_findCurrentCell","elementToLowercase","tagName","toLowerCase","isHorizontal","elementOffset","elementOffsetDir","containerScroll","containerOffsetDir","bottomDistance","ieCorrection","firefoxCorrection","msie","offsetLeft","mozilla","abs","_elementId","_currentDataIndex","lockedColumnsCount","_prevVerticalCell","_nextVerticalCell","tmpIndex","currentRowCells","hiddenColumns","_verticalContainer","up","step","floor","headerId","replace","handled","canHandle","isDefaultPrevented","keyCode","UP","_moveUp","shiftKey","DOWN","_moveDown","LEFT","RIGHT","altKey","_handleExpand","_moveRight","_handleCollapse","_moveLeft","PAGEDOWN","_handlePageDown","PAGEUP","_handlePageUp","ENTER","F2","_handleEnterKey","ESC","_handleEscKey","HOME","_handleHome","END","_handleEnd","TAB","_handleTabKey","stopPropagation","ctrl","prev","rowContainer","isInLockedTable","isInBody","currentTable","blur","cancelRow","first","version","document","body","has","focusable","click","_handleEditing","incellEditing","_tabNext","_preventPageSizeRestore","back","switchRow","nextAll","editContainer","isEdited","editedCell","isIE","nextFocusableCellRowIndex","nextFocusableCellIndex","currentFocusedCellRowIndex","currentFocusedCellIndex","opera","triggerHandler","saveRow","isHeader","headerTable","isInput","setTimeout","_setTabIndex","icons","retryButton","_commandClick","_attachCellEditingEventHandlers","multiple","relatedTarget","isLockedCell","clearTimeout","_closeCellTimeout","_commandByName","j","currentName","commandName","parentsUntil","_ensureExpandableColumn","expandableColumns","expandable","lockedCols","encoded","_columnTemplates","_columnAttributes","headerTemplate","convertStyle","properties","declaration","split","trim","camelCase","headerAttributes","layout","addBack","_initVirtualTrees","_renderCols","_renderHeader","_headerColsTree","_contentColsTree","buttons","_buildCommands","_lockedColumns","_nonLockedColumns","_templateColumns","_flushCache","maps","uidAttr","viewChildrenMap","_renderOptions","_dataToRender","_renderedModelLevel","select","_","_absoluteIndex","_angularItems","_clearRenderMap","buttonClass","_viewChildrenMap","_trs","editedColumn","editedColumnIndex","htmlEncode","contentResized","_muteAngularRebind","_togglePagerVisibility","toggle","progress","parentsNotInView","parentNotInView","parentNotInViewId","childId","parentsCopy","parentIndex","_markNodeAsNonRenderable","_skipRenderingMap","nodeId","_adjustRowsHeight","rows2","containers","containersLength","heights","_ths","cellClasses","headerContent","ths","href","data-field","data-title","role","_cols","_clearColsCache","_retrieveFirstColumn","_updateFirstColumnClass","_updateRowSpans","included","_setColumnDataIndexes","_updateColumnCellIndex","_setParentsVisibility","predicate","p","_prepareColumns","parentRow","childRow","totalColSpan","_renderHeaderTree","tree","hasMultiColumnHeaders","rowsToRender","_syncLockedHeaderHeight","lockedWidth","nonLockedWidth","wrapperWidth","modelId","_edit","_tds","_td","_hasFooterTemplate","data-parentId","_footerId","noop","c","renderer","editedColumnField","editColumn","iconClass","columnHasEditCommand","_cellContent","dirtyIndicator","_evalDirtyIndicatorTemplate","_evalColumnTemplate","_evalCustomColumnTemplate","templateSettings","_customTemplateSettings","columnTemplateAlias","paramName","templateString","_dirtyIndicatorTemplate","templateFunction","columnTemplate","dirtyIndicatorTemplate","dirtyField","charAt","expr","Template","_button","data-command","_positionResizeHandle","th","resizeHandle","cellWidth","indicatorWidth","columnResizeHandleWidth","left","top","val","autoFitColumn","contentTable","footerTable","oldColumnWidth","newColumnWidth","totalWidth","visibleLocked","oldWidth","newWidth","_adjustLockedHorizontalScrollBar","treelist","Resizable","handle","start","colSelector","startLocation","location","columnWidth","rtlModifier","minColumnWidth","resizeend","sortableInstance","kendoColumnSorter","filterMenuInstance","filterInit","filterOpen","kendoFilterMenu","_change","_isLocked","useAllItems","multi","Selectable","parseOptions","aria","inputSelectors","continuousItems","_continuousItems","_selectableTarget","SPACEBAR","clear","_lastActive","selectRange","_firstSelectee","lockedItems","nonLockedItems","apply","related","clearSelection","ds","setDataSource","getByUid","_isPopupEditable","_editMode","_createEditor","_cancelEdit","args","addRow","inlineEditing","_isInlineEditable","showNewModelInView","_insertAt","_firstEditableColumnIndex","removeRow","_shouldRestorePageSize","mode","leafCols","_createIncellEditor","_editCell","values","isCancel","ns","saveChanges","valid","_toggleColumnVisibility","_findColumn","_adjustTablesWidth","selector","Draggable","guid","hint","prepend","Reorderable","dragOverContainers","_allowDragOverContainers","inSameContainer","oldIndex","newIndex","reorderColumn","lockable","_reorderTrees","destSources","destContainer","destDomTree","sources","sourcesContainer","sourcesDomTree","destDomChildren","destRow","sourcesLeafs","destLeafs","reorderTaget","destThs","sourceDOM","sourceChildren","destColumn","_insertTree","leafs","domTr","_reorderHeader","rowsToAdd","sourcesDepth","targetDepth","sourceLocked","destLocked","destRows","destIndex","lockChanged","nonLockedColumnsLength","lockColumn","unlockColumn","menu","menuOptions","initHandler","_columnMenuInit","openHandler","_columnMenuOpen","lockedColumnsLength","compare","pane","owner","closeCallback","kendoColumnMenu","_createPager","alwaysVisible","ExcelMixin","PDFMixin","_drawPDF","allPages","startingPage","exportPage","doc","treeList","_drawPDFShadow","avoidLinks","pageNum","pageNumber","err","reject","paperSize","_drawPDF_autoPageBreak","_initPDFProgress","drawing","Group","deferred","progressBar","clone","kendoProgressBar","chunkCount","min","draw","cont","_destructive","drawDOM","renderPage","origBody","overflow","paddingRight","plugin","jQuery","amd","a1","a2","a3"],"mappings":"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","file":"kendo.treelist.min.js","sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function (f, define) {\n    define('kendo.treelist', [\n        'kendo.dom',\n        'kendo.data',\n        'kendo.columnsorter',\n        'kendo.editable',\n        'kendo.window',\n        'kendo.filtermenu',\n        'kendo.selectable',\n        'kendo.resizable',\n        'kendo.treeview.draganddrop',\n        'kendo.pager'\n    ], f);\n}(function () {\n    var __meta__ = {\n        id: 'treelist',\n        name: 'TreeList',\n        category: 'web',\n        description: 'The TreeList widget displays self-referencing data and offers rich support for interacting with data, sorting, filtering, and selection.',\n        depends: [\n            'dom',\n            'data',\n            'pager'\n        ],\n        features: [\n            {\n                id: 'treelist-sorting',\n                name: 'Sorting',\n                description: 'Support for column sorting',\n                depends: ['columnsorter']\n            },\n            {\n                id: 'treelist-filtering',\n                name: 'Filtering',\n                description: 'Support for record filtering',\n                depends: ['filtermenu']\n            },\n            {\n                id: 'treelist-editing',\n                name: 'Editing',\n                description: 'Support for record editing',\n                depends: [\n                    'editable',\n                    'window'\n                ]\n            },\n            {\n                id: 'treelist-selection',\n                name: 'Selection',\n                description: 'Support for row selection',\n                depends: ['selectable']\n            },\n            {\n                id: 'treelist-column-resize',\n                name: 'Column resizing',\n                description: 'Support for column resizing',\n                depends: ['resizable']\n            },\n            {\n                id: 'treelist-dragging',\n                name: 'Drag & Drop',\n                description: 'Support for drag & drop of rows',\n                depends: ['treeview.draganddrop']\n            },\n            {\n                id: 'treelist-excel-export',\n                name: 'Excel export',\n                description: 'Export data as Excel spreadsheet',\n                depends: ['excel']\n            },\n            {\n                id: 'treelist-pdf-export',\n                name: 'PDF export',\n                description: 'Export data as PDF',\n                depends: [\n                    'pdf',\n                    'drawing'\n                ]\n            },\n            {\n                id: 'treelist-paging',\n                name: 'Paging',\n                description: 'Support for treelist paging',\n                depends: ['pager']\n            }\n        ]\n    };\n    (function ($, undefined) {\n        var data = kendo.data;\n        var kendoDom = kendo.dom;\n        var kendoDomElement = kendoDom.element;\n        var kendoTextElement = kendoDom.text;\n        var kendoHtmlElement = kendoDom.html;\n        var outerWidth = kendo._outerWidth;\n        var keys = kendo.keys;\n        var outerHeight = kendo._outerHeight;\n        var ui = kendo.ui;\n        var DataBoundWidget = ui.DataBoundWidget;\n        var DataSource = data.DataSource;\n        var ObservableArray = data.ObservableArray;\n        var Query = data.Query;\n        var Model = data.Model;\n        var browser = kendo.support.browser;\n        var kendoTemplate = kendo.template;\n        var activeElement = kendo._activeElement;\n        var isArray = $.isArray;\n        var extend = $.extend;\n        var proxy = $.proxy;\n        var map = $.map;\n        var grep = $.grep;\n        var inArray = $.inArray;\n        var isPlainObject = $.isPlainObject;\n        var push = Array.prototype.push;\n        var STRING = 'string';\n        var CHANGE = 'change';\n        var ITEM_CHANGE = 'itemChange';\n        var ERROR = 'error';\n        var PROGRESS = 'progress';\n        var DOT = '.';\n        var NS = '.kendoTreeList';\n        var CLICK = 'click';\n        var MOUSEDOWN = 'mousedown';\n        var BEFORE_EDIT = 'beforeEdit';\n        var EDIT = 'edit';\n        var PAGE = 'page';\n        var PAGE_CHANGE = 'pageChange';\n        var SAVE = 'save';\n        var SAVE_CHANGES = 'saveChanges';\n        var EXPAND = 'expand';\n        var COLLAPSE = 'collapse';\n        var CELL_CLOSE = 'cellClose';\n        var REMOVE = 'remove';\n        var DATA_CELL = 'td:not(.k-group-cell):not(.k-hierarchy-cell):visible';\n        var DATABINDING = 'dataBinding';\n        var DATABOUND = 'dataBound';\n        var CANCEL = 'cancel';\n        var TABINDEX = 'tabIndex';\n        var FILTERMENUINIT = 'filterMenuInit';\n        var FILTERMENUOPEN = 'filterMenuOpen';\n        var COLUMNHIDE = 'columnHide';\n        var COLUMNSHOW = 'columnShow';\n        var HEADERCELLS = 'th.k-header';\n        var COLUMNREORDER = 'columnReorder';\n        var COLUMNRESIZE = 'columnResize';\n        var COLUMNMENUINIT = 'columnMenuInit';\n        var COLUMNMENUOPEN = 'columnMenuOpen';\n        var COLUMNLOCK = 'columnLock';\n        var COLUMNUNLOCK = 'columnUnlock';\n        var PARENTIDFIELD = 'parentId';\n        var DRAGSTART = 'dragstart';\n        var DRAG = 'drag';\n        var DROP = 'drop';\n        var DRAGEND = 'dragend';\n        var NAVROW = 'tr:visible';\n        var NAVCELL = 'td:visible';\n        var NAVHEADER = 'th:visible';\n        var ITEMROW = 'tr:not(.k-footer-template):visible';\n        var FIRSTNAVITEM = NAVROW + ' > td:first:visible';\n        var LASTITEMROW = ITEMROW + ':last';\n        var isRtl = false;\n        var HEIGHT = 'height';\n        var INCELL = 'incell';\n        var INLINE = 'inline';\n        var POPUP = 'popup';\n        var TABLE = 'table';\n        var classNames = {\n            wrapper: 'k-treelist k-grid k-widget k-display-block',\n            header: 'k-header',\n            button: 'k-button',\n            alt: 'k-alt',\n            editCell: 'k-edit-cell',\n            editRow: 'k-grid-edit-row',\n            dirtyCell: 'k-dirty-cell',\n            group: 'k-treelist-group',\n            gridToolbar: 'k-grid-toolbar',\n            gridHeader: 'k-grid-header',\n            gridHeaderWrap: 'k-grid-header-wrap',\n            gridContent: 'k-grid-content',\n            gridContentWrap: 'k-grid-content',\n            gridFilter: 'k-grid-filter',\n            footerTemplate: 'k-footer-template',\n            focused: 'k-state-focused',\n            loading: 'k-i-loading',\n            refresh: 'k-i-reload',\n            retry: 'k-request-retry',\n            selected: 'k-state-selected',\n            status: 'k-status',\n            link: 'k-link',\n            withIcon: 'k-with-icon',\n            filterable: 'k-filterable',\n            icon: 'k-icon',\n            iconFilter: 'k-i-filter',\n            iconCollapse: 'k-i-collapse',\n            iconExpand: 'k-i-expand',\n            iconHidden: 'k-i-none',\n            iconPlaceHolder: 'k-icon k-i-none',\n            input: 'k-input',\n            dropPositions: 'k-i-insert-up k-i-insert-down k-i-plus k-i-insert-middle',\n            dropTop: 'k-i-insert-up',\n            dropBottom: 'k-i-insert-down',\n            dropAdd: 'k-i-plus',\n            dropMiddle: 'k-i-insert-middle',\n            dropDenied: 'k-i-cancel',\n            dragStatus: 'k-drag-status',\n            dragClue: 'k-drag-clue',\n            dragClueText: 'k-clue-text'\n        };\n        var defaultCommands = {\n            create: {\n                imageClass: 'k-i-plus',\n                className: 'k-grid-add',\n                methodName: 'addRow'\n            },\n            createchild: {\n                imageClass: 'k-i-plus',\n                className: 'k-grid-add',\n                methodName: 'addRow'\n            },\n            destroy: {\n                imageClass: 'k-i-close',\n                className: 'k-grid-delete',\n                methodName: 'removeRow'\n            },\n            edit: {\n                imageClass: 'k-i-edit',\n                className: 'k-grid-edit',\n                methodName: 'editRow'\n            },\n            update: {\n                imageClass: 'k-i-check',\n                className: 'k-primary k-grid-update',\n                methodName: 'saveRow'\n            },\n            canceledit: {\n                imageClass: 'k-i-cancel',\n                className: 'k-grid-cancel',\n                methodName: '_cancelEdit'\n            },\n            cancel: {\n                imageClass: 'k-icon k-i-cancel',\n                text: 'Cancel changes',\n                className: 'k-grid-cancel-changes',\n                methodName: 'cancelChanges'\n            },\n            save: {\n                imageClass: 'k-icon k-i-check',\n                text: 'Save changes',\n                className: 'k-grid-save-changes',\n                methodName: 'saveChanges'\n            },\n            excel: {\n                imageClass: 'k-i-file-excel',\n                className: 'k-grid-excel',\n                methodName: 'saveAsExcel'\n            },\n            pdf: {\n                imageClass: 'k-i-file-pdf',\n                className: 'k-grid-pdf',\n                methodName: 'saveAsPDF'\n            }\n        };\n        var TreeView = kendo.Class.extend({\n            init: function (data, options) {\n                var that = this;\n                that.data = data || [];\n                that.options = extend(that.options, options);\n            },\n            options: {\n                defaultParentId: null,\n                idField: 'id',\n                parentIdField: PARENTIDFIELD\n            },\n            childrenMap: function () {\n                var that = this;\n                var childrenMap = {};\n                var dataLength = that.data.length;\n                var dataItem;\n                var dataItemId;\n                var dataItemParentId;\n                var idField = that.options.idField;\n                var parentIdField = that.options.parentIdField;\n                if (that._childrenMap) {\n                    return that._childrenMap;\n                }\n                for (var i = 0; i < dataLength; i++) {\n                    dataItem = this.data[i];\n                    dataItemId = dataItem[idField];\n                    dataItemParentId = dataItem[parentIdField];\n                    childrenMap[dataItemId] = childrenMap[dataItemId] || [];\n                    childrenMap[dataItemParentId] = childrenMap[dataItemParentId] || [];\n                    childrenMap[dataItemParentId].push(dataItem);\n                }\n                that._childrenMap = childrenMap;\n                return childrenMap;\n            },\n            idsMap: function () {\n                var that = this;\n                var idsMap = {};\n                var data = that.data;\n                var dataLength = data.length;\n                var dataItem;\n                var idField = that.options.idField;\n                if (that._idMap) {\n                    return that._idMap;\n                }\n                for (var i = 0; i < dataLength; i++) {\n                    dataItem = data[i];\n                    idsMap[dataItem[idField]] = dataItem;\n                }\n                that.idsMap = idsMap;\n                return idsMap;\n            },\n            dataMaps: function () {\n                var that = this;\n                var childrenMap = {};\n                var data = that.data;\n                var dataLength = data.length;\n                var idsMap = {};\n                var dataItem;\n                var dataItemId;\n                var dataItemParentId;\n                var idField = that.options.idField;\n                var parentIdField = that.options.parentIdField;\n                if (that._dataMaps) {\n                    return that._dataMaps;\n                }\n                for (var i = 0; i < dataLength; i++) {\n                    dataItem = data[i];\n                    dataItemId = dataItem[idField];\n                    dataItemParentId = dataItem[parentIdField];\n                    idsMap[dataItemId] = dataItem;\n                    childrenMap[dataItemId] = childrenMap[dataItemId] || [];\n                    childrenMap[dataItemParentId] = childrenMap[dataItemParentId] || [];\n                    childrenMap[dataItemParentId].push(dataItem);\n                }\n                that._dataMaps = {\n                    children: childrenMap,\n                    ids: idsMap\n                };\n                return that._dataMaps;\n            },\n            rootNodes: function () {\n                var that = this;\n                var data = that.data;\n                var defaultParentId = that.options.defaultParentId;\n                var dataLength = data.length;\n                var rootNodes = [];\n                var dataItem;\n                var parentIdField = that.options.parentIdField;\n                for (var i = 0; i < dataLength; i++) {\n                    dataItem = data[i];\n                    if (dataItem[parentIdField] === defaultParentId) {\n                        rootNodes.push(dataItem);\n                    }\n                }\n                return rootNodes;\n            },\n            removeCollapsedSubtreesFromRootNodes: function (options) {\n                options = options || {};\n                var that = this;\n                var rootNodes = that.rootNodes();\n                var result = [];\n                var prunedTree;\n                that._childrenMap = options.childrenMap = options.childrenMap || that.childrenMap();\n                options.maxDepth = options.maxDepth || Infinity;\n                for (var i = 0; i < rootNodes.length; i++) {\n                    prunedTree = that.removeCollapsedSubtrees(rootNodes[i], options);\n                    result = result.concat(prunedTree);\n                }\n                return result;\n            },\n            removeCollapsedSubtrees: function (rootNode, options) {\n                options = options || {};\n                var that = this;\n                var result = [];\n                var childIdx;\n                var prunedTree;\n                var childrenMap = options.childrenMap || {};\n                var maxDepth = options.maxDepth || Infinity;\n                var idField = that.options.idField;\n                var children = childrenMap[rootNode[idField]] || [];\n                var expanded = isUndefined(rootNode.expanded) ? options.expanded : rootNode.expanded;\n                result.push(rootNode);\n                if (children && expanded) {\n                    for (childIdx = 0; childIdx < children.length; childIdx++) {\n                        if (result.length >= maxDepth) {\n                            break;\n                        }\n                        prunedTree = that.removeCollapsedSubtrees(children[childIdx], options);\n                        result = result.concat(prunedTree);\n                    }\n                }\n                return result;\n            }\n        });\n        var TreeQuery = function (data) {\n            this.data = data || [];\n        };\n        TreeQuery.prototype = new Query();\n        TreeQuery.prototype.constructor = TreeQuery;\n        TreeQuery.process = function (data, options, inPlace) {\n            options = options || {};\n            var query = new TreeQuery(data);\n            var group = options.group;\n            var sort = Query.normalizeGroup(group || []).concat(Query.normalizeSort(options.sort || []));\n            var filterCallback = options.filterCallback;\n            var filter = options.filter;\n            var skip = options.skip;\n            var take = options.take;\n            var total;\n            var childrenMap;\n            var filteredChildrenMap;\n            var view;\n            var prunedData;\n            if (sort && inPlace) {\n                query = query.sort(sort, undefined, undefined, inPlace);\n            }\n            if (filter) {\n                query = query.filter(filter);\n                if (filterCallback) {\n                    query = filterCallback(query);\n                }\n                total = query.toArray().length;\n            }\n            if (sort && !inPlace) {\n                query = query.sort(sort);\n                if (group) {\n                    data = query.toArray();\n                }\n            }\n            if (options.processFromRootNodes) {\n                view = new TreeView(query.toArray(), options);\n                if (filter) {\n                    filteredChildrenMap = view.childrenMap();\n                }\n                prunedData = view.removeCollapsedSubtreesFromRootNodes({\n                    childrenMap: filter || sort && sort.length ? undefined : options.childrenMap,\n                    expanded: options.expanded,\n                    maxDepth: skip + take || Infinity\n                });\n                childrenMap = view.childrenMap();\n                query = new TreeQuery(prunedData);\n            }\n            if (skip !== undefined && take !== undefined) {\n                query = query.range(skip, take);\n            }\n            if (group) {\n                query = query.group(group, data);\n            }\n            return {\n                total: total,\n                data: query.toArray(),\n                childrenMap: childrenMap,\n                filteredChildrenMap: filteredChildrenMap\n            };\n        };\n        var TreeListModel = Model.define({\n            id: 'id',\n            parentId: PARENTIDFIELD,\n            fields: {\n                id: { type: 'number' },\n                parentId: {\n                    type: 'number',\n                    nullable: true\n                }\n            },\n            init: function (value) {\n                Model.fn.init.call(this, value);\n                this._loaded = false;\n                if (!this.parentIdField) {\n                    this.parentIdField = PARENTIDFIELD;\n                }\n                this.parentId = this.get(this.parentIdField);\n            },\n            accept: function (data) {\n                Model.fn.accept.call(this, data);\n                this.parentId = this.get(this.parentIdField);\n            },\n            set: function (field, value, initiator) {\n                if (field == PARENTIDFIELD && this.parentIdField != PARENTIDFIELD) {\n                    this[this.parentIdField] = value;\n                }\n                Model.fn.set.call(this, field, value, initiator);\n                if (field == this.parentIdField) {\n                    this.parentId = this.get(this.parentIdField);\n                }\n            },\n            loaded: function (value) {\n                if (value !== undefined) {\n                    this._loaded = value;\n                } else {\n                    return this._loaded;\n                }\n            },\n            shouldSerialize: function (field) {\n                return Model.fn.shouldSerialize.call(this, field) && field !== '_loaded' && field != '_error' && field != '_edit' && !(this.parentIdField !== 'parentId' && field === 'parentId');\n            }\n        });\n        TreeListModel.parentIdField = PARENTIDFIELD;\n        TreeListModel.define = function (base, options) {\n            if (options === undefined) {\n                options = base;\n                base = TreeListModel;\n            }\n            var parentId = options.parentId || PARENTIDFIELD;\n            options.parentIdField = parentId;\n            var model = Model.define(base, options);\n            if (parentId) {\n                model.parentIdField = parentId;\n            }\n            return model;\n        };\n        function is(field) {\n            return function (object) {\n                return object[field];\n            };\n        }\n        function not(func) {\n            return function (object) {\n                return !func(object);\n            };\n        }\n        var TreeListDataSource = DataSource.extend({\n            init: function (options) {\n                options = options || {};\n                var that = this;\n                that._dataMaps = that._getDataMaps();\n                options.schema = extend(true, {}, {\n                    modelBase: TreeListModel,\n                    model: TreeListModel\n                }, options.schema);\n                DataSource.fn.init.call(this, options);\n            },\n            _addRange: function () {\n            },\n            _createNewModel: function (data) {\n                var that = this;\n                var model = {};\n                var fromModel = data instanceof Model;\n                var parentIdField = this._modelParentIdField();\n                if (fromModel) {\n                    model = data;\n                }\n                model = DataSource.fn._createNewModel.call(this, model);\n                if (!fromModel) {\n                    if (data.parentId) {\n                        data[model.parentIdField] = data.parentId;\n                    } else if (that._isPageable() && data[parentIdField]) {\n                        data[model.parentIdField] = data[parentIdField];\n                    }\n                    model.accept(data);\n                }\n                return model;\n            },\n            _shouldWrap: function () {\n                return true;\n            },\n            _push: function (result, operation) {\n                var data = DataSource.fn._readData.call(this, result);\n                if (!data) {\n                    data = result;\n                }\n                this[operation](data);\n            },\n            _getData: function () {\n                return this._data || [];\n            },\n            _readData: function (newData) {\n                var that = this;\n                var data = that._isPageable() ? that._getData().toJSON() : that.data();\n                newData = DataSource.fn._readData.call(this, newData);\n                this._replaceData((data.toJSON ? data.toJSON() : data).concat(newData), data);\n                if (newData instanceof ObservableArray) {\n                    return newData;\n                }\n                return data;\n            },\n            _replaceData: function (source, target) {\n                var sourceLength = source.length;\n                for (var i = 0; i < sourceLength; i++) {\n                    target[i] = source[i];\n                }\n                target.length = sourceLength;\n            },\n            _readAggregates: function (data) {\n                var result = extend(this._aggregateResult, this.reader.aggregates(data));\n                if ('' in result) {\n                    result[this._defaultParentId()] = result[''];\n                    delete result[''];\n                }\n                return result;\n            },\n            read: function (data) {\n                var that = this;\n                if (that._isPageable()) {\n                    that._dataMaps = {};\n                }\n                return DataSource.fn.read.call(that, data);\n            },\n            remove: function (root) {\n                this._removeChildData(root);\n                this._removeFromDataMaps(root);\n                DataSource.fn.remove.call(this, root);\n            },\n            _removeChildData: function (model, removePristine) {\n                var that = this;\n                var pageable = that._isPageable();\n                var data = pageable ? this._getData() : this.data();\n                var childrenMap = pageable ? that._getChildrenMap() || that.childrenMap(data) : that._childrenMap(data);\n                var items = this._subtree(childrenMap, model.id);\n                var shouldRemovePristine = isUndefined(removePristine) ? false : removePristine;\n                var removedItems = this._removeItems(items, shouldRemovePristine);\n                that._removeFromDataMaps(removedItems);\n            },\n            pushDestroy: function (items) {\n                var that = this;\n                if (!isArray(items)) {\n                    items = [items];\n                }\n                for (var i = 0; i < items.length; i++) {\n                    that._removeChildData(items[i], true);\n                    that._removeFromDataMaps(items[i]);\n                }\n                DataSource.fn.pushDestroy.call(that, items);\n            },\n            insert: function (index, model) {\n                var that = this;\n                var newModel = that._createNewModel(model);\n                that._insertInDataMaps(newModel);\n                return DataSource.fn.insert.call(that, index, newModel);\n            },\n            _filterCallback: function (query) {\n                var that = this;\n                var i, item;\n                var map = {};\n                var result = [];\n                var data = query.toArray();\n                var idField = that._modelIdField();\n                var parentIdField = that._modelParentIdField();\n                var pageable = that._isPageable();\n                var parentSubtree = [];\n                var parent;\n                for (i = 0; i < data.length; i++) {\n                    item = data[i];\n                    if (pageable) {\n                        parentSubtree = [];\n                        if (!map[item[idField]]) {\n                            map[item[idField]] = true;\n                            parentSubtree.push(item);\n                        }\n                        parent = that._parentNode(item);\n                        while (parent) {\n                            if (!map[parent[idField]]) {\n                                map[parent[idField]] = true;\n                                parentSubtree.unshift(parent);\n                                parent = that._parentNode(parent);\n                            } else {\n                                break;\n                            }\n                        }\n                        if (parentSubtree.length) {\n                            result = result.concat(parentSubtree);\n                        }\n                    } else {\n                        while (item) {\n                            if (!map[item[idField]]) {\n                                map[item[idField]] = true;\n                                result.push(item);\n                            }\n                            if (!map[item[parentIdField]]) {\n                                map[item[parentIdField]] = true;\n                                item = this.parentNode(item);\n                                if (item) {\n                                    result.push(item);\n                                }\n                            } else {\n                                break;\n                            }\n                        }\n                    }\n                }\n                return new Query(result);\n            },\n            _subtree: function (map, id) {\n                var that = this;\n                var result = map[id] || [];\n                var defaultParentId = that._defaultParentId();\n                var idField = that._modelIdField();\n                for (var i = 0, len = result.length; i < len; i++) {\n                    if (result[i][idField] !== defaultParentId) {\n                        result = result.concat(that._subtree(map, result[i][idField]));\n                    }\n                }\n                return result;\n            },\n            _childrenMap: function (data) {\n                var map = {};\n                var i, item, id, parentId;\n                data = this._observeView(data);\n                for (i = 0; i < data.length; i++) {\n                    item = data[i];\n                    id = item.id;\n                    parentId = item.parentId;\n                    map[id] = map[id] || [];\n                    map[parentId] = map[parentId] || [];\n                    map[parentId].push(item);\n                }\n                return map;\n            },\n            childrenMap: function (data) {\n                var view = this._createTreeView(data);\n                var map = view.childrenMap();\n                return map;\n            },\n            _getChildrenMap: function () {\n                var that = this;\n                var dataMaps = that._getDataMaps();\n                return dataMaps.children;\n            },\n            _initIdsMap: function (data) {\n                var that = this;\n                var dataMaps = that._getDataMaps();\n                if (isUndefined(dataMaps.ids)) {\n                    dataMaps.ids = that._idsMap(data);\n                }\n                return dataMaps.ids;\n            },\n            _idsMap: function (data) {\n                var view = this._createTreeView(data);\n                var map = view.idsMap();\n                return map;\n            },\n            _getIdsMap: function () {\n                var that = this;\n                var dataMaps = that._getDataMaps();\n                return dataMaps.ids || {};\n            },\n            _getFilteredChildrenMap: function () {\n                var that = this;\n                var dataMaps = that._getDataMaps();\n                return dataMaps.filteredChildren;\n            },\n            _setFilteredChildrenMap: function (map) {\n                var that = this;\n                var dataMaps = that._getDataMaps();\n                dataMaps.filteredChildren = map;\n            },\n            _initDataMaps: function (data) {\n                var that = this;\n                var view = that._createTreeView(data);\n                that._dataMaps = view.dataMaps();\n                return that._dataMaps;\n            },\n            _initChildrenMapForParent: function (parent) {\n                var that = this;\n                var data = that._getData();\n                var childrenMap = that._getChildrenMap();\n                var idField = that._modelIdField();\n                var parentIdField = that._modelParentIdField();\n                var parentId = (parent || {})[idField];\n                if (childrenMap && parent) {\n                    childrenMap[parentId] = [];\n                    for (var i = 0; i < data.length; i++) {\n                        if (data[i][parentIdField] === parentId) {\n                            childrenMap[parentId].push(data[i]);\n                        }\n                    }\n                }\n            },\n            _getDataMaps: function () {\n                var that = this;\n                that._dataMaps = that._dataMaps || {};\n                return that._dataMaps;\n            },\n            _createTreeView: function (data, options) {\n                var view = new TreeView(data, extend(options, this._defaultTreeModelOptions()));\n                return view;\n            },\n            _defaultTreeModelOptions: function () {\n                var that = this;\n                var modelOptions = that._modelOptions();\n                return {\n                    defaultParentId: that._defaultParentId(),\n                    idField: that._modelIdField(),\n                    parentIdField: that._modelParentIdField(),\n                    expanded: modelOptions.expanded\n                };\n            },\n            _defaultDataItemType: function () {\n                return this.reader.model || kendo.data.ObservableObject;\n            },\n            _calculateAggregates: function (data, options) {\n                options = options || {};\n                var that = this;\n                var result = {};\n                var item, subtree, i;\n                var filter = options.filter;\n                var skip = options.skip;\n                var take = options.take;\n                var maxDepth = !isUndefined(skip) && !isUndefined(take) ? skip + take : Infinity;\n                var pageable = that._isPageable();\n                var filteredChildrenMap = options.filteredChildrenMap;\n                var childrenMap = options.childrenMap;\n                var pageableChildrenMap;\n                if (pageable) {\n                    if (isUndefined(options.aggregate)) {\n                        return result;\n                    }\n                    if (filteredChildrenMap) {\n                        pageableChildrenMap = filteredChildrenMap;\n                    } else if (childrenMap) {\n                        pageableChildrenMap = childrenMap;\n                    } else {\n                        pageableChildrenMap = that.childrenMap(that._getData());\n                    }\n                }\n                if (!pageable && filter) {\n                    data = Query.process(data, {\n                        filter: filter,\n                        filterCallback: proxy(this._filterCallback, this)\n                    }).data;\n                }\n                var map = pageable ? pageableChildrenMap : that._childrenMap(data);\n                result[this._defaultParentId()] = new Query(this._subtree(map, this._defaultParentId())).aggregate(options.aggregate);\n                for (i = 0; i < data.length; i++) {\n                    if (i >= maxDepth) {\n                        break;\n                    }\n                    item = data[i];\n                    subtree = this._subtree(map, item.id);\n                    result[item.id] = new Query(subtree).aggregate(options.aggregate);\n                }\n                return result;\n            },\n            _queryProcess: function (data, options) {\n                var that = this;\n                var result = {};\n                options = options || {};\n                options.filterCallback = proxy(this._filterCallback, this);\n                if (that._isPageable()) {\n                    return that._processPageableQuery(data, options);\n                } else {\n                    var defaultParentId = this._defaultParentId();\n                    result = Query.process(data, options);\n                    var map = this._childrenMap(result.data);\n                    var hasLoadedChildren, i, item, children;\n                    data = map[defaultParentId] || [];\n                    for (i = 0; i < data.length; i++) {\n                        item = data[i];\n                        if (item.id === defaultParentId) {\n                            continue;\n                        }\n                        children = map[item.id];\n                        hasLoadedChildren = !!(children && children.length);\n                        if (!item.loaded()) {\n                            item.loaded(hasLoadedChildren || !item.hasChildren);\n                        }\n                        if (item.loaded() || item.hasChildren !== true) {\n                            item.hasChildren = hasLoadedChildren;\n                        }\n                        if (hasLoadedChildren) {\n                            data = data.slice(0, i + 1).concat(children, data.slice(i + 1));\n                        }\n                    }\n                    result.data = data;\n                }\n                return result;\n            },\n            _processPageableQuery: function (data, options) {\n                var that = this;\n                var dataMaps = that._getDataMaps();\n                var result;\n                var filteredChildrenMap;\n                if (that._getData() !== data || !dataMaps.children || !dataMaps.ids) {\n                    dataMaps = that._initDataMaps(that._getData());\n                }\n                options.childrenMap = dataMaps.children || {};\n                options.idsMap = dataMaps.ids || {};\n                result = that._processTreeQuery(data, options);\n                that._replaceWithObservedData(result.data, data);\n                that._processDataItemsState(result.data, result.childrenMap);\n                that._replaceItemsInDataMaps(result.data);\n                result.dataToAggregate = that._dataToAggregate(result.data, options);\n                if (options.filter) {\n                    filteredChildrenMap = result.filteredChildrenMap;\n                    that._replaceInMapWithObservedData(filteredChildrenMap, data);\n                    that._setFilteredChildrenMap(filteredChildrenMap);\n                    options.filteredChildrenMap = filteredChildrenMap;\n                }\n                return result;\n            },\n            _dataToAggregate: function (data) {\n                var that = this;\n                var firstDataItem = data[0] || {};\n                var firstItemParents = that._parentNodes(firstDataItem);\n                var dataToAggregate = firstItemParents.concat(data);\n                return dataToAggregate;\n            },\n            _replaceItemsInDataMaps: function (observableArray) {\n                var that = this;\n                var view = isArray(observableArray) ? observableArray : [observableArray];\n                var itemType = that._defaultDataItemType();\n                var defaultParentId = that._defaultParentId();\n                var idField = that._modelIdField();\n                var parentIdField = that._modelParentIdField();\n                var dataMaps = that._getDataMaps();\n                var item;\n                var parents;\n                var directParent;\n                for (var viewIndex = 0; viewIndex < view.length; viewIndex++) {\n                    item = view[viewIndex];\n                    if (!(item instanceof itemType)) {\n                        continue;\n                    }\n                    that._insertInIdsMap(item);\n                    parents = that._parentNodes(item);\n                    directParent = parents && parents.length ? parents[parents.length - 1] : undefined;\n                    if (item[parentIdField] === defaultParentId) {\n                        that._replaceInMap(dataMaps.children, defaultParentId, item, itemType);\n                    } else if (directParent) {\n                        that._replaceInMap(dataMaps.children, directParent[idField], item, itemType);\n                    }\n                }\n            },\n            _replaceInMap: function (map, id, replacement, itemType) {\n                var idField = this._modelIdField();\n                map[id] = map[id] || [];\n                itemType = itemType || this._defaultDataItemType();\n                var itemInArray = map[id].filter(function (element) {\n                    return replacement[idField] === element[idField];\n                })[0];\n                var itemIndex = itemInArray ? map[id].indexOf(itemInArray) : -1;\n                if (itemIndex !== -1 && !(itemInArray instanceof itemType)) {\n                    map[id][itemIndex] = replacement;\n                }\n            },\n            _replaceWithObservedData: function (dataToReplace, replacementArray) {\n                var that = this;\n                var idsMap = that._getDataMaps().ids || {};\n                var idField = that._modelIdField();\n                var itemType = that._defaultDataItemType();\n                var itemToReplace;\n                var itemToReplaceId;\n                var dataItem;\n                var dataItemIndex;\n                var observableItem;\n                for (var i = 0; i < dataToReplace.length; i++) {\n                    itemToReplace = dataToReplace[i];\n                    itemToReplaceId = itemToReplace[idField];\n                    if (!(itemToReplace instanceof itemType)) {\n                        if (!(idsMap[itemToReplaceId] instanceof itemType)) {\n                            dataItem = that._getById(itemToReplaceId);\n                            dataItemIndex = replacementArray.indexOf(dataItem);\n                            if (dataItem && dataItemIndex !== -1) {\n                                observableItem = replacementArray.at(dataItemIndex);\n                                dataToReplace[i] = observableItem;\n                            }\n                        } else {\n                            dataToReplace[i] = idsMap[itemToReplaceId];\n                        }\n                    }\n                }\n            },\n            _replaceInMapWithObservedData: function (map, replacementArray) {\n                var that = this;\n                for (var key in map) {\n                    that._replaceWithObservedData(map[key], replacementArray);\n                }\n            },\n            _insertInDataMaps: function (item) {\n                var that = this;\n                if (that._isPageable()) {\n                    that._insertInIdsMap(item);\n                    that._insertInChildrenMap(item);\n                }\n            },\n            _insertInIdsMap: function (item) {\n                var that = this;\n                var idsMap = that._getIdsMap();\n                var idField = that._modelIdField();\n                if (!isUndefined(item[idField])) {\n                    idsMap[item[idField]] = item;\n                }\n            },\n            _insertInChildrenMap: function (item, index) {\n                var that = this;\n                var childrenMap = that._getChildrenMap() || {};\n                var idField = that._modelIdField();\n                var parentIdField = that._modelParentIdField();\n                var itemId = item[idField];\n                var parentId = item[parentIdField];\n                index = index || 0;\n                childrenMap[itemId] = childrenMap[itemId] || [];\n                childrenMap[parentId] = childrenMap[parentId] || [];\n                childrenMap[parentId].splice(index, 0, item);\n            },\n            _removeFromDataMaps: function (items) {\n                var that = this;\n                items = isArray(items) ? items : [items];\n                if (that._isPageable()) {\n                    for (var i = 0; i < items.length; i++) {\n                        that._removeFromIdsMap(items[i]);\n                        that._removeFromChildrenMap(items[i]);\n                    }\n                }\n            },\n            _removeFromIdsMap: function (item) {\n                var that = this;\n                var idsMap = that._getIdsMap();\n                var idField = that._modelIdField();\n                if (!isUndefined(item[idField])) {\n                    idsMap[item[idField]] = undefined;\n                }\n            },\n            _removeFromChildrenMap: function (item) {\n                var that = this;\n                var childrenMap = that._getChildrenMap() || {};\n                var parentIdField = that._modelParentIdField();\n                var parentId = item[parentIdField];\n                childrenMap[parentId] = childrenMap[parentId] || [];\n                var itemIndex = that._indexInChildrenMap(item);\n                if (itemIndex !== -1) {\n                    childrenMap[parentId].splice(itemIndex, 1);\n                }\n            },\n            _indexInChildrenMap: function (item) {\n                var that = this;\n                return that._itemIndexInMap(item, that._getChildrenMap());\n            },\n            _itemIndexInMap: function (item, dataMap) {\n                var that = this;\n                var map = dataMap || {};\n                var parentIdField = that._modelParentIdField();\n                var parentId = item[parentIdField];\n                map[parentId] = map[parentId] || [];\n                var itemInArray = map[parentId].filter(function (element) {\n                    return item.uid === element.uid;\n                })[0];\n                var itemIndex = itemInArray ? map[parentId].indexOf(itemInArray) : -1;\n                return itemIndex;\n            },\n            _getById: function (id) {\n                var that = this;\n                var idField = that._modelIdField();\n                var data = that._getData();\n                for (var i = 0; i < data.length; i++) {\n                    if (data[i][idField] === id) {\n                        return data[i];\n                    }\n                }\n            },\n            _isLastItemInView: function (dataItem) {\n                var view = this.view();\n                return view.length && view[view.length - 1] === dataItem;\n            },\n            _defaultPageableQueryOptions: function () {\n                var that = this;\n                var dataMaps = that._getDataMaps();\n                var options = {\n                    skip: that.skip(),\n                    take: that.take(),\n                    page: that.page(),\n                    pageSize: that.pageSize(),\n                    sort: that.sort(),\n                    filter: that.filter(),\n                    group: that.group(),\n                    aggregate: that.aggregate(),\n                    filterCallback: proxy(that._filterCallback, that),\n                    childrenMap: dataMaps.children,\n                    idsMap: dataMaps.ids\n                };\n                return options;\n            },\n            _isPageable: function () {\n                var pageSize = this.pageSize();\n                return !isUndefined(pageSize) && pageSize > 0 && !this.options.serverPaging;\n            },\n            _updateTotalForAction: function (action, items) {\n                var that = this;\n                DataSource.fn._updateTotalForAction.call(that, action, items);\n                if (that._isPageable()) {\n                    that._updateCollapsedTotalForAction(action, items);\n                }\n            },\n            _updateCollapsedTotalForAction: function (action, items) {\n                var that = this;\n                var total = parseInt(that._collapsedTotal, 10);\n                if (!isNumber(that._collapsedTotal)) {\n                    that._calculateCollapsedTotal();\n                    return;\n                }\n                if (action === 'add') {\n                    total += items.length;\n                } else if (action === 'remove') {\n                    total -= items.length;\n                } else if (action !== 'itemchange' && action !== 'sync' && !that.options.serverPaging) {\n                    total = that._calculateCollapsedTotal();\n                } else if (action === 'sync') {\n                    total = that._calculateCollapsedTotal();\n                }\n                that._collapsedTotal = total;\n            },\n            _setFilterTotal: function (filterTotal, setDefaultValue) {\n                var that = this;\n                DataSource.fn._setFilterTotal.call(that, filterTotal, setDefaultValue);\n                that._setFilterCollapsedTotal(filterTotal);\n            },\n            _setFilterCollapsedTotal: function (filterTotal) {\n                var that = this;\n                if (!that.options.serverFiltering) {\n                    if (filterTotal !== undefined) {\n                        that._collapsedTotal = filterTotal;\n                    } else {\n                        if (that._getFilteredChildrenMap()) {\n                            that._calculateCollapsedTotal();\n                        }\n                        that._setFilteredChildrenMap(undefined);\n                    }\n                }\n            },\n            collapsedTotal: function () {\n                var that = this;\n                if (!isUndefined(that._collapsedTotal)) {\n                    return that._collapsedTotal;\n                }\n                return that._calculateCollapsedTotal();\n            },\n            _calculateCollapsedTotal: function () {\n                var that = this;\n                var data = that._dataWithoutCollapsedSubtrees();\n                if (data.length) {\n                    that._collapsedTotal = data.length;\n                }\n                return that._collapsedTotal;\n            },\n            _dataWithoutCollapsedSubtrees: function () {\n                return this._removeCollapsedSubtrees(this._getData());\n            },\n            _removeCollapsedSubtrees: function (data) {\n                var that = this;\n                var view = that._createTreeView(data);\n                var result = view.removeCollapsedSubtreesFromRootNodes({\n                    expanded: that._modelOptions().expanded,\n                    childrenMap: that._getChildrenMap()\n                });\n                return result;\n            },\n            _processTreeQuery: function (data, options) {\n                var result = TreeQuery.process(data, extend(options, this._defaultTreeModelOptions(), { processFromRootNodes: true }));\n                return result;\n            },\n            _processDataItemsState: function (data, childrenMap) {\n                var dataLength = data.length;\n                var i;\n                for (i = 0; i < dataLength; i++) {\n                    this._processDataItemState(data[i], childrenMap);\n                }\n            },\n            _processDataItemState: function (dataItem, childrenMap) {\n                var defaultParentId = this._defaultParentId();\n                if (dataItem.id === defaultParentId) {\n                    return;\n                }\n                var children = childrenMap[dataItem.id] || [];\n                var hasLoadedChildren = !!(children && children.length);\n                if (!dataItem.loaded) {\n                    return;\n                }\n                if (!dataItem.loaded()) {\n                    dataItem.loaded(hasLoadedChildren || !dataItem.hasChildren);\n                }\n                if (dataItem.loaded() || dataItem.hasChildren !== true) {\n                    dataItem.hasChildren = hasLoadedChildren;\n                }\n            },\n            _queueRequest: function (options, callback) {\n                callback.call(this);\n            },\n            _modelLoaded: function (id) {\n                var model = this.get(id);\n                model.loaded(true);\n                model.hasChildren = this.childNodes(model).length > 0;\n            },\n            _modelError: function (id, e) {\n                this.get(id)._error = e;\n            },\n            success: function (data, requestParams) {\n                if (!requestParams || typeof requestParams.id == 'undefined') {\n                    this._data = this._observe([]);\n                }\n                DataSource.fn.success.call(this, data, requestParams);\n                this._total = this._data.length;\n            },\n            load: function (model) {\n                var method = '_query';\n                var remote = this.options.serverSorting || this.options.serverPaging || this.options.serverFiltering || this.options.serverGrouping || this.options.serverAggregates;\n                var defaultPromise = $.Deferred().resolve().promise();\n                if (model.loaded()) {\n                    if (remote) {\n                        return defaultPromise;\n                    }\n                } else if (model.hasChildren) {\n                    method = 'read';\n                    this._removeChildData(model);\n                }\n                return this[method]({ id: model.id }).done(proxy(this._modelLoaded, this, model.id)).fail(proxy(this._modelError, this, model.id));\n            },\n            contains: function (root, child) {\n                var that = this;\n                var idField = that._modelIdField();\n                var parentIdField = that._modelParentIdField();\n                var rootId = root[idField];\n                var pageable = that._isPageable();\n                while (child) {\n                    if (child[parentIdField] === rootId) {\n                        return true;\n                    }\n                    child = pageable ? that._parentNode(child) : that.parentNode(child);\n                }\n                return false;\n            },\n            _byParentId: function (id, defaultId) {\n                var result = [];\n                var view = this.view();\n                var current;\n                if (id === defaultId) {\n                    return [];\n                }\n                for (var i = 0; i < view.length; i++) {\n                    current = view.at(i);\n                    if (current.parentId == id) {\n                        result.push(current);\n                    }\n                }\n                return result;\n            },\n            _defaultParentId: function () {\n                return this.reader.model.fn.defaults[this.reader.model.parentIdField];\n            },\n            _modelOptions: function () {\n                var modelOptions = (this.options.schema || {}).model || {};\n                return modelOptions;\n            },\n            _modelIdField: function () {\n                var modelOptions = this._modelOptions();\n                return modelOptions.id || 'id';\n            },\n            _modelParentIdField: function () {\n                var modelOptions = this._modelOptions();\n                return modelOptions.parentId || PARENTIDFIELD;\n            },\n            childNodes: function (model) {\n                return this._byParentId(model.id, this._defaultParentId());\n            },\n            rootNodes: function () {\n                return this._byParentId(this._defaultParentId());\n            },\n            _rootNode: function (child) {\n                return this._parentNodes(child)[0];\n            },\n            _pageableRootNodes: function (options) {\n                options = options || {};\n                var that = this;\n                var defaultParentId = that._defaultParentId();\n                var parentIdField = that._modelParentIdField();\n                var result = [];\n                var nodesWithoutParentInView = that._nodesWithoutParentInView(options);\n                var node;\n                var root;\n                for (var i = 0; i < nodesWithoutParentInView.length; i++) {\n                    node = nodesWithoutParentInView[i];\n                    if (node[parentIdField] === defaultParentId) {\n                        result.push(node);\n                    } else {\n                        root = that._rootNode(node);\n                        if (root && result.indexOf(root) === -1) {\n                            result.push(root);\n                        }\n                    }\n                }\n                return result;\n            },\n            parentNode: function (model) {\n                return this.get(model.parentId);\n            },\n            _parentNode: function (child) {\n                var that = this;\n                var parentIdField = that._modelParentIdField();\n                var idsMap = that._initIdsMap(that._getData());\n                var parentId = child[parentIdField];\n                var parent = idsMap[parentId] || that._getById(parentId);\n                return parent;\n            },\n            _parentNodes: function (child) {\n                var that = this;\n                var parent = that._parentNode(child);\n                var parents = [];\n                while (parent) {\n                    parents.unshift(parent);\n                    parent = that._parentNode(parent);\n                }\n                return parents;\n            },\n            _parentNodesNotInView: function () {\n                var that = this;\n                var view = that.view();\n                var result = [];\n                var defaultParentId = that._defaultParentId();\n                var idField = that._modelIdField();\n                var parentIdField = that._modelParentIdField();\n                var parentInView;\n                var parents = [];\n                var directParent;\n                var dataItem;\n                var dataItemId;\n                var dataItemParentId;\n                for (var i = 0; i < view.length; i++) {\n                    dataItem = view[i];\n                    dataItemId = dataItem[idField];\n                    dataItemParentId = dataItem[parentIdField];\n                    parentInView = that._parentInView(dataItemParentId);\n                    if (!parentInView && dataItemParentId !== defaultParentId) {\n                        parents = that._parentNodes(dataItem);\n                        directParent = parents && parents.length ? parents[parents.length - 1] : that._getById(dataItemParentId);\n                        if (directParent && result.indexOf(directParent) === -1) {\n                            result.push(directParent);\n                        }\n                    }\n                }\n                return result;\n            },\n            _nodesWithoutParentInView: function (options) {\n                options = options || {};\n                var that = this;\n                var view = that.view();\n                var childrenMap = options.childrenMap || that.childrenMap(that._getData());\n                var idField = that._modelIdField();\n                var parentIdField = that._modelParentIdField();\n                var dataItem;\n                var parentInView;\n                var children = [];\n                var result = [];\n                for (var i = 0; i < view.length; i++) {\n                    dataItem = view[i];\n                    children = childrenMap[dataItem[idField]];\n                    parentInView = that._parentInView(dataItem[parentIdField]);\n                    if (!parentInView) {\n                        result.push(dataItem);\n                    }\n                }\n                return result;\n            },\n            _parentInView: function (parentId) {\n                var view = this.view();\n                for (var i = 0; i < view.length; i++) {\n                    if (view[i].id === parentId) {\n                        return view[i];\n                    }\n                }\n            },\n            level: function (model) {\n                var result = -1;\n                if (!(model instanceof TreeListModel)) {\n                    model = this.get(model);\n                }\n                do {\n                    model = this.parentNode(model);\n                    result++;\n                } while (model);\n                return result;\n            },\n            _pageableModelLevel: function (model) {\n                var that = this;\n                if (!model || !that._isPageable()) {\n                    return 0;\n                }\n                var parents = that._parentNodes(model);\n                return parents.length;\n            },\n            filter: function (value) {\n                var baseFilter = DataSource.fn.filter;\n                if (value === undefined) {\n                    return baseFilter.call(this, value);\n                }\n                baseFilter.call(this, value);\n            },\n            _pageableQueryOptions: function (options) {\n                var dataMaps = this._getDataMaps();\n                options.childrenMap = dataMaps.children;\n                options.idsMap = dataMaps.ids;\n                return options;\n            },\n            _flatData: function (data, skip) {\n                skip = this._isPageable() ? true : skip;\n                return DataSource.fn._flatData.call(this, data, skip);\n            },\n            data: function (data) {\n                var that = this;\n                var result = DataSource.fn.data.call(that, data);\n                if (that._isPageable()) {\n                    that._initDataMaps(that._getData());\n                    that._calculateCollapsedTotal();\n                }\n                return result;\n            },\n            cancelChanges: function (model) {\n                var that = this;\n                DataSource.fn.cancelChanges.call(that, model);\n                that._restorePageSizeAfterAddChild();\n            },\n            _modelCanceled: function (model) {\n                var that = this;\n                if (that._isPageable()) {\n                    that._removeFromDataMaps(model);\n                }\n            },\n            _changesCanceled: function () {\n                var that = this;\n                if (that._isPageable()) {\n                    that._initDataMaps(that._getData());\n                }\n            },\n            _setAddChildPageSize: function () {\n                var that = this;\n                var queryOptions = {};\n                if (that._isPageable()) {\n                    that._addChildPageSize = that.pageSize() + 1;\n                    queryOptions = that._defaultPageableQueryOptions();\n                    queryOptions.take = that._addChildPageSize;\n                    queryOptions.pageSize = that._addChildPageSize;\n                    that._query(queryOptions);\n                }\n            },\n            _restorePageSizeAfterAddChild: function () {\n                var that = this;\n                var queryOptions = {};\n                if (that._isPageable()) {\n                    if (!isUndefined(that._addChildPageSize)) {\n                        queryOptions = that._defaultPageableQueryOptions();\n                        queryOptions.take = that._addChildPageSize - 1;\n                        queryOptions.pageSize = that._addChildPageSize - 1;\n                        that._query(queryOptions);\n                    }\n                }\n                that._addChildPageSize = undefined;\n            },\n            sync: function () {\n                var that = this;\n                return DataSource.fn.sync.call(that).then(function () {\n                    that._restorePageSizeAfterAddChild();\n                });\n            },\n            _syncEnd: function () {\n                var that = this;\n                if (that._isPageable()) {\n                    that._initDataMaps(that._getData());\n                }\n            }\n        });\n        TreeListDataSource.create = function (options) {\n            if ($.isArray(options)) {\n                options = { data: options };\n            } else if (options instanceof ObservableArray) {\n                options = { data: options.toJSON() };\n            }\n            return options instanceof TreeListDataSource ? options : new TreeListDataSource(options);\n        };\n        function isCellVisible() {\n            return this.style.display !== 'none';\n        }\n        function sortCells(cells) {\n            var indexAttr = kendo.attr('index');\n            return cells.sort(function (a, b) {\n                a = $(a);\n                b = $(b);\n                var indexA = a.attr(indexAttr);\n                var indexB = b.attr(indexAttr);\n                if (indexA === undefined) {\n                    indexA = $(a).index();\n                }\n                if (indexB === undefined) {\n                    indexB = $(b).index();\n                }\n                indexA = parseInt(indexA, 10);\n                indexB = parseInt(indexB, 10);\n                return indexA > indexB ? 1 : indexA < indexB ? -1 : 0;\n            });\n        }\n        function leafDataCells(container) {\n            var rows = container.find('>tr:not(.k-filter-row)');\n            var filter = function () {\n                var el = $(this);\n                return !el.hasClass('k-group-cell') && !el.hasClass('k-hierarchy-cell');\n            };\n            var cells = $();\n            if (rows.length > 1) {\n                cells = rows.find('th').filter(filter).filter(function () {\n                    return this.rowSpan > 1;\n                });\n            }\n            cells = cells.add(rows.last().find('th').filter(filter));\n            return sortCells(cells);\n        }\n        function createPlaceholders(options) {\n            var spans = [];\n            var className = options.className;\n            for (var i = 0, level = options.level; i < level; i++) {\n                spans.push(kendoDomElement('span', { className: className }));\n            }\n            return spans;\n        }\n        function columnsWidth(cols) {\n            var colWidth, width = 0;\n            for (var idx = 0, length = cols.length; idx < length; idx++) {\n                colWidth = cols[idx].style.width;\n                if (colWidth && colWidth.indexOf('%') == -1) {\n                    width += parseInt(colWidth, 10);\n                }\n            }\n            return width;\n        }\n        function syncTableHeight(table1, table2) {\n            table1 = table1[0];\n            table2 = table2[0];\n            if (table1.rows.length && table2.rows.length && table1.rows.length !== table2.rows.length) {\n                var lockedHeigth = table1.offsetHeight;\n                var tableHeigth = table2.offsetHeight;\n                var row;\n                var diff;\n                if (lockedHeigth > tableHeigth) {\n                    row = table2.rows[table2.rows.length - 1];\n                    diff = lockedHeigth - tableHeigth;\n                } else {\n                    row = table1.rows[table1.rows.length - 1];\n                    diff = tableHeigth - lockedHeigth;\n                }\n                row.style.height = row.offsetHeight + diff + 'px';\n            }\n        }\n        var TreeListPager = ui.Pager.extend({\n            options: { name: 'TreeListPager' },\n            totalPages: function () {\n                var that = this;\n                var dataSource = that.dataSource;\n                if (dataSource && dataSource._filter) {\n                    return ui.Pager.fn.totalPages.call(that);\n                }\n                return Math.ceil((that._collapsedTotal() || 0) / (that.pageSize() || 1));\n            },\n            _createDataSource: function (options) {\n                this.dataSource = kendo.data.TreeListDataSource.create(options.dataSource);\n            },\n            _collapsedTotal: function () {\n                var dataSource = this.dataSource;\n                return dataSource ? dataSource.collapsedTotal() || 0 : 0;\n            }\n        });\n        var Editor = kendo.Observable.extend({\n            init: function (element, options) {\n                kendo.Observable.fn.init.call(this);\n                options = this.options = extend(true, {}, this.options, options);\n                this.element = element;\n                this.bind(this.events, options);\n                this.model = this.options.model;\n                this.fields = this._fields(this.options.columns);\n                this._initContainer();\n                this.createEditable();\n            },\n            events: [],\n            _initContainer: function () {\n                this.wrapper = this.element;\n            },\n            createEditable: function () {\n                var options = this.options;\n                this.editable = new ui.Editable(this.wrapper, {\n                    fields: this.fields,\n                    target: options.target,\n                    clearContainer: options.clearContainer,\n                    model: this.model,\n                    change: options.change\n                });\n            },\n            _isEditable: function (column) {\n                return isColumnEditable(column, this.model);\n            },\n            _fields: function (columns) {\n                var fields = [];\n                var idx, length, column;\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    column = columns[idx];\n                    if (this._isEditable(column)) {\n                        fields.push({\n                            field: column.field,\n                            format: column.format,\n                            editor: column.editor\n                        });\n                    }\n                }\n                return fields;\n            },\n            end: function () {\n                return this.editable.end();\n            },\n            close: function () {\n                this.destroy();\n            },\n            destroy: function () {\n                this.editable.destroy();\n                this.editable.element.find('[' + kendo.attr('container-for') + ']').empty().end().removeAttr(kendo.attr('role'));\n                this.model = this.wrapper = this.element = this.columns = this.editable = null;\n            }\n        });\n        var PopupEditor = Editor.extend({\n            init: function (element, options) {\n                Editor.fn.init.call(this, element, options);\n                this._attachHandlers();\n                kendo.cycleForm(this.wrapper);\n                this.open();\n            },\n            events: [\n                CANCEL,\n                SAVE\n            ],\n            options: {\n                window: {\n                    modal: true,\n                    resizable: false,\n                    draggable: true,\n                    title: 'Edit',\n                    visible: false\n                }\n            },\n            _initContainer: function () {\n                var options = this.options;\n                var formContent = [];\n                this.wrapper = $('<div class=\"k-popup-edit-form\"/>').attr(kendo.attr('uid'), this.model.uid).append('<div class=\"k-edit-form-container\"/>');\n                if (options.template) {\n                    this._appendTemplate(formContent);\n                    this.fields = [];\n                } else {\n                    this._appendFields(formContent);\n                }\n                this._appendButtons(formContent);\n                new kendoDom.Tree(this.wrapper.children()[0]).render(formContent);\n                this.wrapper.appendTo(options.appendTo);\n                this.window = new ui.Window(this.wrapper, options.window);\n            },\n            _appendTemplate: function (form) {\n                var template = this.options.template;\n                if (typeof template === STRING) {\n                    template = window.unescape(template);\n                }\n                template = kendo.template(template)(this.model);\n                form.push(kendoHtmlElement(template));\n            },\n            _appendFields: function (form) {\n                var idx, length, column;\n                var columns = this.options.columns;\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    column = columns[idx];\n                    if (column.command) {\n                        continue;\n                    }\n                    form.push(kendoHtmlElement('<div class=\"k-edit-label\"><label for=\"' + column.field + '\">' + (column.title || column.field || '') + '</label></div>'));\n                    if (this._isEditable(column)) {\n                        form.push(kendoHtmlElement('<div ' + kendo.attr('container-for') + '=\"' + column.field + '\" class=\"k-edit-field\"></div>'));\n                    } else {\n                        form.push(kendoDomElement('div', { 'class': 'k-edit-field' }, [this.options.fieldRenderer(column, this.model)]));\n                    }\n                }\n            },\n            _appendButtons: function (form) {\n                form.push(kendoDomElement('div', { 'class': 'k-edit-buttons k-state-default' }, this.options.commandRenderer()));\n            },\n            _attachHandlers: function () {\n                var closeHandler = this._cancelProxy = proxy(this._cancel, this);\n                this.wrapper.on(CLICK + NS, '.k-grid-cancel', this._cancelProxy);\n                this._saveProxy = proxy(this._save, this);\n                this.wrapper.on(CLICK + NS, '.k-grid-update', this._saveProxy);\n                this.window.bind('close', function (e) {\n                    if (e.userTriggered) {\n                        closeHandler(e);\n                    }\n                });\n            },\n            _detachHandlers: function () {\n                this._cancelProxy = null;\n                this._saveProxy = null;\n                this.wrapper.off(NS);\n            },\n            _cancel: function (e) {\n                this.trigger(CANCEL, e);\n            },\n            _save: function () {\n                this.trigger(SAVE);\n            },\n            open: function () {\n                this.window.center().open();\n            },\n            close: function () {\n                this.window.bind('deactivate', proxy(this.destroy, this)).close();\n            },\n            destroy: function () {\n                this.window.destroy();\n                this.window = null;\n                this._detachHandlers();\n                Editor.fn.destroy.call(this);\n            }\n        });\n        var IncellEditor = Editor.extend({\n            destroy: function () {\n                var that = this;\n                that.editable.destroy();\n                that.editable.element.off().empty().removeAttr(kendo.attr('role'));\n                that.model = that.wrapper = that.element = that.columns = that.editable = null;\n            }\n        });\n        var TreeList = DataBoundWidget.extend({\n            init: function (element, options) {\n                DataBoundWidget.fn.init.call(this, element, options);\n                isRtl = kendo.support.isRtl(element);\n                this._dataSource(this.options.dataSource);\n                this._aria();\n                this._columns();\n                this._layout();\n                this._navigatable();\n                this._selectable();\n                this._sortable();\n                this._resizable();\n                this._filterable();\n                this._attachEvents();\n                this._toolbar();\n                this._scrollable();\n                this._reorderable();\n                this._columnMenu();\n                this._minScreenSupport();\n                this._draggable();\n                this._pageable();\n                if (this.options.autoBind) {\n                    this.dataSource.fetch();\n                }\n                if (this._hasLockedColumns) {\n                    var widget = this;\n                    this.wrapper.addClass('k-grid-lockedcolumns');\n                    this._resizeHandler = function () {\n                        widget.resize();\n                    };\n                    $(window).on('resize' + NS, this._resizeHandler);\n                }\n                kendo.notify(this);\n            },\n            _draggable: function () {\n                var that = this;\n                var editable = this.options.editable;\n                var dataSource = that.dataSource;\n                var idField = dataSource._modelIdField();\n                var parentIdField = dataSource._modelParentIdField();\n                var pageable = that._isPageable();\n                if (!editable || !editable.move) {\n                    return;\n                }\n                this._dragging = new kendo.ui.HierarchicalDragAndDrop(this.wrapper, {\n                    $angular: this.$angular,\n                    autoScroll: true,\n                    filter: 'tbody>tr',\n                    itemSelector: 'tr',\n                    allowedContainers: this.wrapper,\n                    hintText: function (row) {\n                        var text = function () {\n                            return $(this).text();\n                        };\n                        var separator = '<span class=\\'k-header k-drag-separator\\' />';\n                        return row.children('td').map(text).toArray().join(separator);\n                    },\n                    contains: proxy(function (source, destination) {\n                        var dest = this.dataItem(destination);\n                        var src = this.dataItem(source);\n                        return src == dest || this.dataSource.contains(src, dest);\n                    }, this),\n                    itemFromTarget: function (target) {\n                        var tr = target.closest('tr');\n                        return {\n                            item: tr,\n                            content: tr\n                        };\n                    },\n                    dragstart: proxy(function (source) {\n                        this.wrapper.addClass('k-treelist-dragging');\n                        var model = this.dataItem(source);\n                        return this.trigger(DRAGSTART, { source: model });\n                    }, this),\n                    drag: proxy(function (e) {\n                        e.source = this.dataItem(e.source);\n                        this.trigger(DRAG, e);\n                    }, this),\n                    drop: proxy(function (e) {\n                        e.source = this.dataItem(e.source);\n                        e.destination = this.dataItem(e.destination);\n                        this.wrapper.removeClass('k-treelist-dragging');\n                        return this.trigger(DROP, e);\n                    }, this),\n                    dragend: proxy(function (e) {\n                        var dest = this.dataItem(e.destination);\n                        var src = this.dataItem(e.source);\n                        var originalSrcParentId = src[parentIdField];\n                        var originalSrcIndex = dataSource._indexInChildrenMap(src);\n                        if (pageable) {\n                            dataSource._removeFromChildrenMap(src);\n                            src[parentIdField] = dest ? dest[idField] : null;\n                            dataSource._initChildrenMapForParent(dest);\n                            src[parentIdField] = originalSrcParentId;\n                        }\n                        var isPrevented = src.set('parentId', dest ? dest.id : null);\n                        if (pageable && isPrevented) {\n                            dataSource._removeFromChildrenMap(src);\n                            src[parentIdField] = originalSrcParentId;\n                            dataSource._removeFromChildrenMap(src);\n                            dataSource._insertInChildrenMap(src, originalSrcIndex);\n                        }\n                        e.source = src;\n                        e.destination = dest;\n                        this.trigger(DRAGEND, e);\n                    }, this),\n                    reorderable: false,\n                    dropHintContainer: function (item) {\n                        return item.children('td:eq(1)');\n                    },\n                    dropPositionFrom: function (dropHint) {\n                        return dropHint.prevAll('.k-i-none').length > 0 ? 'after' : 'before';\n                    }\n                });\n            },\n            itemFor: function (model) {\n                if (typeof model == 'number') {\n                    model = this.dataSource.get(model);\n                }\n                return this.tbody.find('[' + kendo.attr('uid') + '=' + model.uid + ']');\n            },\n            _itemFor: function (model) {\n                var that = this;\n                var table = that.lockedContent ? that.lockedTable : that.table;\n                if (typeof model == 'number') {\n                    model = this.dataSource.get(model);\n                }\n                return table.find('[' + kendo.attr('uid') + '=' + model.uid + ']');\n            },\n            _scrollable: function () {\n                if (this.options.scrollable) {\n                    var scrollables = this.thead.closest('.k-grid-header-wrap');\n                    var lockedContent = $(this.lockedContent).bind('DOMMouseScroll' + NS + ' mousewheel' + NS, proxy(this._wheelScroll, this));\n                    this.content.bind('scroll' + NS, function () {\n                        scrollables.scrollLeft(this.scrollLeft);\n                        lockedContent.scrollTop(this.scrollTop);\n                    });\n                    var touchScroller = kendo.touchScroller(this.content);\n                    if (touchScroller && touchScroller.movable) {\n                        this._touchScroller = touchScroller;\n                        touchScroller.movable.bind('change', function (e) {\n                            scrollables.scrollLeft(-e.sender.x);\n                            if (lockedContent) {\n                                lockedContent.scrollTop(-e.sender.y);\n                            }\n                        });\n                    }\n                }\n            },\n            _wheelScroll: function (e) {\n                if (e.ctrlKey) {\n                    return;\n                }\n                var delta = kendo.wheelDeltaY(e);\n                var lockedDiv = $(e.currentTarget);\n                if (delta) {\n                    if (lockedDiv[0].scrollHeight > lockedDiv[0].clientHeight && (lockedDiv[0].scrollTop < lockedDiv[0].scrollHeight - lockedDiv[0].clientHeight && delta < 0 || lockedDiv[0].scrollTop > 0 && delta > 0)) {\n                        e.preventDefault();\n                    }\n                    lockedDiv.one('wheel' + NS, false);\n                    this.content.scrollTop(this.content.scrollTop() + -delta);\n                }\n            },\n            _progress: function () {\n                var messages = this.options.messages;\n                if (!this.tbody.find('tr').length) {\n                    this._showStatus(kendo.template('<span class=\\'#= className #\\' /> #: messages.loading #')({\n                        className: classNames.icon + ' ' + classNames.loading,\n                        messages: messages\n                    }));\n                }\n            },\n            _error: function (e) {\n                if (!this.dataSource.rootNodes().length) {\n                    this._render({ error: e });\n                }\n            },\n            refresh: function (e) {\n                e = e || {};\n                if (e.action == 'itemchange' && this.editor) {\n                    return;\n                }\n                if (this.trigger(DATABINDING)) {\n                    return;\n                }\n                var current = $(this.current());\n                var isCurrentInHeader = false;\n                var currentIndex;\n                this._cancelEditor();\n                this._render();\n                this._adjustHeight();\n                if (this.options.navigatable) {\n                    if (this._isActiveInTable() || this.editor) {\n                        isCurrentInHeader = current.is('th');\n                        currentIndex = Math.max(this.cellIndex(current), 0);\n                    }\n                    this._restoreCurrent(currentIndex, isCurrentInHeader);\n                }\n                this.trigger(DATABOUND);\n            },\n            _angularFooters: function (command) {\n                var i, footer, aggregates;\n                var allAggregates = this.dataSource.aggregates();\n                var footerRows = this._footerItems();\n                for (i = 0; i < footerRows.length; i++) {\n                    footer = footerRows.eq(i);\n                    aggregates = allAggregates[footer.attr('data-parentId')];\n                    this._angularFooter(command, footer.find('td').get(), aggregates);\n                }\n            },\n            _angularFooter: function (command, cells, aggregates) {\n                var columns = this.columns;\n                this.angular(command, function () {\n                    return {\n                        elements: cells,\n                        data: map(columns, function (col) {\n                            return {\n                                column: col,\n                                aggregate: aggregates && aggregates[col.field]\n                            };\n                        })\n                    };\n                });\n            },\n            items: function () {\n                if (this._hasLockedColumns) {\n                    return this._items(this.tbody).add(this._items(this.lockedTable));\n                } else {\n                    return this._items(this.tbody);\n                }\n            },\n            _items: function (container) {\n                return container.find('tr').filter(function () {\n                    return !$(this).hasClass(classNames.footerTemplate);\n                });\n            },\n            _footerItems: function () {\n                var container = this.tbody;\n                if (this._hasLockedColumns) {\n                    container = container.add(this.lockedTable);\n                }\n                return container.find('tr').filter(function () {\n                    return $(this).hasClass(classNames.footerTemplate);\n                });\n            },\n            dataItems: function () {\n                var dataItems = kendo.ui.DataBoundWidget.fn.dataItems.call(this);\n                if (this._hasLockedColumns) {\n                    var n = dataItems.length, tmp = new Array(2 * n);\n                    for (var i = n; --i >= 0;) {\n                        tmp[i] = tmp[i + n] = dataItems[i];\n                    }\n                    dataItems = tmp;\n                }\n                return dataItems;\n            },\n            _showStatus: function (message) {\n                var status = this.element.find('.k-status');\n                var content = $(this.content).add(this.lockedContent);\n                if (!status.length) {\n                    status = $('<div class=\\'k-status\\' />').appendTo(this.element);\n                }\n                this._contentTree.render([]);\n                if (this._hasLockedColumns) {\n                    this._lockedContentTree.render([]);\n                }\n                content.hide();\n                status.html(message);\n            },\n            _hideStatus: function () {\n                this.element.find('.k-status').remove();\n                $(this.content).add(this.lockedContent).show();\n            },\n            _adjustHeight: function () {\n                var that = this;\n                var element = this.element;\n                var contentWrap = element.find(DOT + classNames.gridContentWrap);\n                var header = element.find(DOT + classNames.gridHeader);\n                var toolbar = element.find(DOT + classNames.gridToolbar);\n                var pagerHeight = that._isPageable() && that.pager && that.pager.element.is(':visible') ? outerHeight(that.pager.element) : 0;\n                var height;\n                var scrollbar = kendo.support.scrollbar();\n                element.css(HEIGHT, this.options.height);\n                var isHeightSet = function (el) {\n                    var initialHeight, newHeight;\n                    if (el[0].style.height) {\n                        return true;\n                    } else {\n                        initialHeight = el.height();\n                    }\n                    el.height('auto');\n                    newHeight = el.height();\n                    el.height('');\n                    return initialHeight != newHeight;\n                };\n                if (isHeightSet(element)) {\n                    height = element.height() - outerHeight(header) - outerHeight(toolbar) - pagerHeight;\n                    contentWrap.height(height);\n                    if (this._hasLockedColumns) {\n                        scrollbar = this.table[0].offsetWidth > this.table.parent()[0].clientWidth ? scrollbar : 0;\n                        this.lockedContent.height(height - scrollbar);\n                    }\n                }\n            },\n            _resize: function (size, force) {\n                this._applyLockedContainersWidth();\n                this._adjustHeight();\n                if (this.pager && this.pager.element) {\n                    this.pager.resize(force);\n                }\n            },\n            _minScreenSupport: function () {\n                var any = this.hideMinScreenCols();\n                if (any) {\n                    this.minScreenResizeHandler = proxy(this.hideMinScreenCols, this);\n                    $(window).on('resize', this.minScreenResizeHandler);\n                }\n            },\n            _iterateMinScreenCols: function (cols, screenWidth) {\n                var any = false;\n                for (var i = 0; i < cols.length; i++) {\n                    var col = cols[i];\n                    var minWidth = col.minScreenWidth;\n                    if (minWidth !== undefined && minWidth !== null) {\n                        any = true;\n                        if (minWidth > screenWidth) {\n                            this.hideColumn(col);\n                        } else {\n                            this.showColumn(col);\n                        }\n                    }\n                    if (!col.hidden && col.columns) {\n                        any = this._iterateMinScreenCols(col.columns, screenWidth) || any;\n                    }\n                }\n                return any;\n            },\n            hideMinScreenCols: function () {\n                var cols = this.columns, screenWidth = window.innerWidth > 0 ? window.innerWidth : screen.width;\n                return this._iterateMinScreenCols(cols, screenWidth);\n            },\n            destroy: function () {\n                DataBoundWidget.fn.destroy.call(this);\n                var dataSource = this.dataSource;\n                dataSource.unbind(CHANGE, this._refreshHandler);\n                dataSource.unbind(ERROR, this._errorHandler);\n                dataSource.unbind(PROGRESS, this._progressHandler);\n                this._navigatableTables = null;\n                this._current = null;\n                if (this._resizeHandler) {\n                    $(window).off('resize' + NS, this._resizeHandler);\n                }\n                if (this._dragging) {\n                    this._dragging.destroy();\n                    this._dragging = null;\n                }\n                if (this.resizable) {\n                    this.resizable.destroy();\n                    this.resizable = null;\n                }\n                if (this.reorderable) {\n                    this.reorderable.destroy();\n                    this.reorderable = null;\n                }\n                if (this._draggableInstance && this._draggableInstance.element) {\n                    this._draggableInstance.destroy();\n                    this._draggableInstance = null;\n                }\n                if (this.minScreenResizeHandler) {\n                    $(window).off('resize', this.minScreenResizeHandler);\n                }\n                this._destroyEditor();\n                this.element.off(NS);\n                this.wrapper.off(NS);\n                if (this._touchScroller) {\n                    this._touchScroller.destroy();\n                }\n                this._destroyPager();\n                if (dataSource) {\n                    dataSource._dataMaps = null;\n                }\n                this._autoExpandable = null;\n                this._refreshHandler = this._errorHandler = this._progressHandler = this._dataSourceFetchProxy = null;\n                this.thead = this.content = this.tbody = this.table = this.element = this.lockedHeader = this.lockedContent = null;\n                this._statusTree = this._headerTree = this._contentTree = this._lockedHeaderColsTree = this._lockedContentColsTree = this._lockedHeaderTree = this._lockedContentTree = null;\n            },\n            options: {\n                name: 'TreeList',\n                columns: [],\n                autoBind: true,\n                scrollable: true,\n                selectable: false,\n                sortable: false,\n                toolbar: null,\n                height: null,\n                columnMenu: false,\n                messages: {\n                    noRows: 'No records to display',\n                    loading: 'Loading...',\n                    requestFailed: 'Request failed.',\n                    retry: 'Retry',\n                    commands: {\n                        edit: 'Edit',\n                        update: 'Update',\n                        canceledit: 'Cancel',\n                        create: 'Add new record',\n                        createchild: 'Add child record',\n                        destroy: 'Delete',\n                        excel: 'Export to Excel',\n                        pdf: 'Export to PDF'\n                    }\n                },\n                excel: { hierarchy: true },\n                resizable: false,\n                filterable: false,\n                editable: false,\n                reorderable: false,\n                pageable: false\n            },\n            events: [\n                CHANGE,\n                BEFORE_EDIT,\n                EDIT,\n                PAGE,\n                SAVE,\n                SAVE_CHANGES,\n                REMOVE,\n                EXPAND,\n                COLLAPSE,\n                DATABINDING,\n                DATABOUND,\n                CANCEL,\n                DRAGSTART,\n                DRAG,\n                DROP,\n                DRAGEND,\n                FILTERMENUINIT,\n                ITEM_CHANGE,\n                CELL_CLOSE,\n                FILTERMENUOPEN,\n                COLUMNHIDE,\n                COLUMNSHOW,\n                COLUMNREORDER,\n                COLUMNRESIZE,\n                COLUMNMENUINIT,\n                COLUMNMENUOPEN,\n                COLUMNLOCK,\n                COLUMNUNLOCK\n            ],\n            _toggle: function (model, expand) {\n                var that = this;\n                var defaultPromise = $.Deferred().resolve().promise();\n                var loaded = model.loaded();\n                if (that._isIncellEditable() && that.editor) {\n                    $(activeElement()).change();\n                    that.closeCell();\n                }\n                if (model._error) {\n                    model.expanded = false;\n                    model._error = undefined;\n                }\n                if (!loaded && model.expanded) {\n                    return defaultPromise;\n                }\n                if (typeof expand == 'undefined') {\n                    expand = !model.expanded;\n                }\n                model.expanded = expand;\n                function afterModelLoaded() {\n                    that._toggleData();\n                    that._render();\n                    that._syncLockedContentHeight();\n                }\n                if (!loaded) {\n                    defaultPromise = this.dataSource.load(model).always(proxy(function () {\n                        afterModelLoaded();\n                    }, this));\n                }\n                afterModelLoaded();\n                return defaultPromise;\n            },\n            _toggleData: function () {\n                var that = this;\n                if (that._isPageable()) {\n                    that._togglePageableData();\n                }\n            },\n            _togglePageableData: function () {\n                var that = this;\n                var dataSource = that.dataSource;\n                var data = dataSource._getData();\n                var result;\n                var queryOptions = dataSource._defaultPageableQueryOptions();\n                that._renderProgress(true);\n                var childrenMap = dataSource._getChildrenMap() || dataSource.childrenMap(dataSource._getData());\n                dataSource._processDataItemsState(data, childrenMap);\n                result = dataSource._processPageableQuery(data, queryOptions);\n                queryOptions.childrenMap = result.childrenMap;\n                queryOptions.filteredChildrenMap = result.filteredChildrenMap;\n                dataSource._aggregateResult = dataSource._calculateAggregates(result.dataToAggregate, queryOptions);\n                dataSource.view(result.data);\n                dataSource._calculateCollapsedTotal();\n                that._refreshPager();\n                that._renderProgress(false);\n            },\n            _refreshPager: function () {\n                var pager = this.pager;\n                if (pager) {\n                    pager.refresh();\n                }\n            },\n            expand: function (row) {\n                return this._toggle(this.dataItem(row), true);\n            },\n            collapse: function (row) {\n                return this._toggle(this.dataItem(row), false);\n            },\n            _toggleChildren: function (e) {\n                var icon = $(e.currentTarget);\n                var model = this.dataItem(icon);\n                if (!model) {\n                    return;\n                }\n                var event = !model.expanded ? EXPAND : COLLAPSE;\n                if (!this.trigger(event, { model: model })) {\n                    this._toggle(model);\n                }\n                e.preventDefault();\n            },\n            _navigatable: function () {\n                var that = this;\n                if (!that.options.navigatable) {\n                    return;\n                }\n                var tables = that.table.add(that.lockedTable);\n                var headerTables = that.thead.parent().add($('>table', that.lockedHeader));\n                if (that.options.scrollable) {\n                    tables = tables.add(headerTables);\n                    headerTables.attr(TABINDEX, -1);\n                }\n                this._navigatableTables = tables;\n                tables.on(kendo.support.touch ? 'touchstart' + NS : 'mousedown' + NS, NAVROW + '>:visible', proxy(that._tableClick, that)).on('focus' + NS, proxy(that._tableFocus, that)).on('focusout' + NS, proxy(that._tableBlur, that)).on('keydown' + NS, proxy(that._tableKeyDown, that));\n            },\n            cellIndex: function (td) {\n                var lockedColumnOffset = 0;\n                if (this.lockedTable && !$.contains(this.lockedTable[0], td[0])) {\n                    lockedColumnOffset = leafColumns(lockedColumns(this.columns)).length;\n                }\n                return $(td).parent().children().index(td) + lockedColumnOffset;\n            },\n            _isActiveInTable: function () {\n                var active = kendo._activeElement();\n                if (!active) {\n                    return false;\n                }\n                return this.table[0] === active || $.contains(this.table[0], active) || this.lockedTable && (this.lockedTable[0] === active || $.contains(this.lockedTable[0], active));\n            },\n            _restoreCurrent: function (currentIndex, isCurrentInHeader) {\n                var rowIndex;\n                var row;\n                var td;\n                if (currentIndex === undefined || currentIndex < 0) {\n                    return;\n                }\n                if (this._current) {\n                    this._current.removeClass('k-state-focused');\n                }\n                if (isCurrentInHeader) {\n                    this.current(this.thead.find('th').eq(currentIndex));\n                } else {\n                    rowIndex = 0;\n                    currentIndex = 0;\n                    row = $();\n                    if (this.lockedTable) {\n                        row = this.lockedTable.find('>tbody>tr:visible').eq(rowIndex);\n                    }\n                    row = row.add(this.tbody.children().eq(rowIndex));\n                    td = row.find('>td:visible').eq(currentIndex);\n                    this.current(td);\n                }\n                if (this._current) {\n                    focusTable(this._current.closest('table')[0], true);\n                }\n            },\n            current: function (newCurrent) {\n                var current = this._current;\n                newCurrent = $(newCurrent);\n                if (newCurrent.length && (!current || current[0] !== newCurrent[0])) {\n                    this._updateCurrentAttr(current, newCurrent);\n                    this._scrollCurrent();\n                }\n                if (newCurrent && newCurrent.length) {\n                    this._lastCellIndex = newCurrent.parent().children(DATA_CELL).index(newCurrent);\n                }\n                return this._current;\n            },\n            _setCurrent: function (newCurrent) {\n                var that = this;\n                newCurrent = $(newCurrent);\n                if (newCurrent[0]) {\n                    that._current = newCurrent;\n                    that._updateCurrentAttr(that._current, newCurrent);\n                    that._scrollCurrent();\n                }\n                return that._current;\n            },\n            _scrollCurrent: function () {\n                var current = this._current;\n                var scrollable = this.options.scrollable;\n                if (!current || !scrollable) {\n                    return;\n                }\n                var row = current.parent();\n                var tableContainer = row.closest('table').parent();\n                var isInLockedContainer = tableContainer.is('.k-grid-content-locked,.k-grid-header-locked');\n                var isInContent = tableContainer.is('.k-grid-content-locked,.k-grid-content');\n                var scrollableContainer = $(this.content)[0];\n                if (isInContent) {\n                    this._scrollTo(this._relatedRow(row)[0], scrollableContainer);\n                }\n                if (this.lockedContent) {\n                    this.lockedContent[0].scrollTop = scrollableContainer.scrollTop;\n                }\n                if (!isInLockedContainer) {\n                    this._scrollTo(current[0], scrollableContainer);\n                }\n            },\n            _findCurrentCell: function () {\n                var that = this;\n                var current = that.current();\n                var elements = $(that.table).add(that.header).add(that.lockedTable).add(that.lockedHeader);\n                if (current && elements.find(current).length > 0) {\n                    return current;\n                } else {\n                    return elements.find(DOT + classNames.focused);\n                }\n            },\n            _scrollTo: function (element, container) {\n                var elementToLowercase = element.tagName.toLowerCase();\n                var isHorizontal = elementToLowercase === 'td' || elementToLowercase === 'th';\n                var elementOffset = element[isHorizontal ? 'offsetLeft' : 'offsetTop'];\n                var elementOffsetDir = element[isHorizontal ? 'offsetWidth' : 'offsetHeight'];\n                var containerScroll = container[isHorizontal ? 'scrollLeft' : 'scrollTop'];\n                var containerOffsetDir = container[isHorizontal ? 'clientWidth' : 'clientHeight'];\n                var bottomDistance = elementOffset + elementOffsetDir;\n                var result = 0;\n                var ieCorrection = 0;\n                var firefoxCorrection = 0;\n                if (isRtl && isHorizontal) {\n                    var table = $(element).closest('table')[0];\n                    if (browser.msie) {\n                        ieCorrection = table.offsetLeft;\n                    } else if (browser.mozilla) {\n                        firefoxCorrection = table.offsetLeft - kendo.support.scrollbar();\n                    }\n                }\n                containerScroll = Math.abs(containerScroll + ieCorrection - firefoxCorrection);\n                if (containerScroll > elementOffset) {\n                    result = elementOffset;\n                } else if (bottomDistance > containerScroll + containerOffsetDir) {\n                    if (elementOffsetDir <= containerOffsetDir) {\n                        result = bottomDistance - containerOffsetDir;\n                    } else {\n                        result = elementOffset;\n                    }\n                } else {\n                    result = containerScroll;\n                }\n                result = Math.abs(result + ieCorrection) + firefoxCorrection;\n                container[isHorizontal ? 'scrollLeft' : 'scrollTop'] = result;\n            },\n            _aria: function () {\n                var id = this.element.attr('id') || 'aria';\n                if (id) {\n                    this._elementId = id + '_active_element';\n                }\n            },\n            _currentDataIndex: function (table, current) {\n                var index = current.attr('data-index');\n                if (!index) {\n                    return undefined;\n                }\n                var lockedColumnsCount = lockedColumns(this.columns).length;\n                if (lockedColumnsCount && !table.closest('div').hasClass('k-grid-content-locked')[0]) {\n                    return index - lockedColumnsCount;\n                }\n                return index;\n            },\n            _prevVerticalCell: function (container, current) {\n                var cells;\n                var row = current.parent();\n                var rows = container.children(NAVROW);\n                var rowIndex = rows.index(row);\n                var index = this._currentDataIndex(container, current);\n                if (index || current.hasClass('k-header')) {\n                    cells = parentColumnsCells(current);\n                    return cells.eq(cells.length - 2);\n                }\n                index = Math.max(row.children(DATA_CELL).index(current), this._lastCellIndex || 0);\n                if (row.hasClass('k-filter-row')) {\n                    return leafDataCells(container).filter(isCellVisible).eq(index);\n                }\n                if (rowIndex == -1) {\n                    row = container.find('tr.k-filter-row:visible');\n                    if (!row[0]) {\n                        return leafDataCells(container).filter(isCellVisible).eq(index);\n                    }\n                } else {\n                    row = rowIndex === 0 ? $() : rows.eq(rowIndex - 1);\n                }\n                cells = row.children(DATA_CELL);\n                if (cells.length > index) {\n                    return cells.eq(index);\n                }\n                return cells.eq(0);\n            },\n            _nextVerticalCell: function (container, current) {\n                var cells;\n                var row = current.parent();\n                var rows = container.children(NAVROW);\n                var rowIndex = rows.index(row);\n                var index = this._currentDataIndex(container, current);\n                if (rowIndex != -1 && index === undefined && current.hasClass('k-header')) {\n                    return childColumnsCells(current).eq(1);\n                }\n                index = index ? parseInt(index, 10) : row.children(DATA_CELL).index(current);\n                index = Math.max(index, this._lastCellIndex || 0);\n                if (rowIndex == -1) {\n                    row = rows.eq(0);\n                } else {\n                    row = rows.eq(rowIndex + current[0].rowSpan);\n                }\n                var tmpIndex = index;\n                if (this._currentDataIndex(container, current) !== undefined) {\n                    var currentRowCells = row.children(':not(.k-group-cell):not(.k-hierarchy-cell)');\n                    var hiddenColumns = currentRowCells.filter(':hidden');\n                    for (var idx = 0, length = hiddenColumns.length; idx < length; idx++) {\n                        if (currentRowCells.index(hiddenColumns[idx]) < index) {\n                            tmpIndex--;\n                        }\n                    }\n                }\n                index = tmpIndex;\n                cells = row.children(DATA_CELL);\n                if (cells.length > index) {\n                    return cells.eq(index);\n                }\n                return cells.eq(0);\n            },\n            _verticalContainer: function (container, up) {\n                var table = container.parent();\n                var length = this._navigatableTables.length;\n                var step = Math.floor(length / 2);\n                var index = inArray(table[0], this._navigatableTables);\n                if (up) {\n                    step *= -1;\n                }\n                index += step;\n                if (index >= 0 || index < length) {\n                    table = this._navigatableTables.eq(index);\n                }\n                return table.find(up ? 'thead' : 'tbody');\n            },\n            _updateCurrentAttr: function (current, next) {\n                var headerId = $(current).data('headerId');\n                $(current).removeClass(classNames.focused).closest('table').removeAttr('aria-activedescendant');\n                if (headerId) {\n                    headerId = headerId.replace(this._elementId, '');\n                    $(current).attr('id', headerId);\n                } else {\n                    $(current).removeAttr('id');\n                }\n                next.data('headerId', next.attr('id')).attr('id', this._elementId).addClass(classNames.focused).closest('table').attr('aria-activedescendant', this._elementId);\n                this._current = next;\n            },\n            _tableKeyDown: function (e) {\n                var handled = false;\n                var current = this.current();\n                var target = $(e.target);\n                var canHandle = !e.isDefaultPrevented() && !target.is(':button,a,:input,a>.k-icon');\n                current = current ? current : $(this.lockedTable).add(this.table).find(FIRSTNAVITEM);\n                if (canHandle && e.keyCode == keys.UP) {\n                    handled = this._moveUp(current, e.shiftKey);\n                }\n                if (canHandle && e.keyCode == keys.DOWN) {\n                    handled = this._moveDown(current, e.shiftKey);\n                }\n                if (canHandle && e.keyCode == (isRtl ? keys.LEFT : keys.RIGHT)) {\n                    if (e.altKey) {\n                        handled = this._handleExpand(current);\n                    } else {\n                        handled = this._moveRight(current);\n                    }\n                }\n                if (canHandle && e.keyCode == (isRtl ? keys.RIGHT : keys.LEFT)) {\n                    if (e.altKey) {\n                        handled = this._handleCollapse(current);\n                    } else {\n                        handled = this._moveLeft(current);\n                    }\n                }\n                if (canHandle && e.keyCode == keys.PAGEDOWN) {\n                    handled = this._handlePageDown();\n                }\n                if (canHandle && e.keyCode == keys.PAGEUP) {\n                    handled = this._handlePageUp();\n                }\n                if (e.keyCode == keys.ENTER || e.keyCode == keys.F2) {\n                    handled = this._handleEnterKey(current, e.currentTarget, target);\n                }\n                if (e.keyCode == keys.ESC) {\n                    handled = this._handleEscKey(current, e.currentTarget);\n                }\n                if (canHandle && e.keyCode == keys.HOME) {\n                    handled = this._handleHome(current, e.ctrlKey);\n                }\n                if (canHandle && e.keyCode == keys.END) {\n                    handled = this._handleEnd(current, e.ctrlKey);\n                }\n                if (e.keyCode == keys.TAB) {\n                    handled = this._handleTabKey(current, e.currentTarget, e.shiftKey);\n                }\n                if (handled) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                }\n            },\n            _handleExpand: function (current) {\n                var that = this;\n                var row = current.parent();\n                var model = that.dataItem(row);\n                if (current.hasClass('k-header')) {\n                    return false;\n                }\n                if (model && model.hasChildren && !model.expanded && !that.trigger(EXPAND, { model: model })) {\n                    this.expand(row);\n                    return true;\n                }\n                return false;\n            },\n            _handleCollapse: function (current) {\n                var that = this;\n                var row = current.parent();\n                var model = that.dataItem(row);\n                if (current.hasClass('k-header')) {\n                    return false;\n                }\n                if (model && model.hasChildren && model.expanded && !that.trigger(COLLAPSE, { model: model })) {\n                    that.collapse(row);\n                    return true;\n                }\n                return false;\n            },\n            _handleHome: function (current, ctrl) {\n                var row = current.parent();\n                var rowContainer = row.parent();\n                var isInLockedTable = this.lockedTable && this.lockedTable.children('tbody')[0] === rowContainer[0];\n                var isInBody = rowContainer[0] === this.tbody[0];\n                var prev;\n                if (ctrl) {\n                    if (this.lockedTable) {\n                        prev = this.lockedTable.find(FIRSTNAVITEM);\n                    } else {\n                        prev = this.table.find(FIRSTNAVITEM);\n                    }\n                } else if (isInBody || isInLockedTable) {\n                    if (isInBody && this.lockedTable) {\n                        row = this._relatedRow(row);\n                    }\n                    prev = row.children(NAVCELL + ':first');\n                }\n                if (prev && prev.length) {\n                    this.current(prev);\n                    return true;\n                }\n            },\n            _handleEnd: function (current, ctrl) {\n                var row = current.parent();\n                var rowContainer = row.parent();\n                var isInLockedTable = this.lockedTable && this.lockedTable.children('tbody')[0] === rowContainer[0];\n                var isInBody = rowContainer[0] === this.tbody[0];\n                var next;\n                if (ctrl) {\n                    next = this.table.find(LASTITEMROW + '>' + NAVCELL + ':last');\n                } else if (isInBody || isInLockedTable) {\n                    if (!isInBody && this.lockedTable) {\n                        row = this._relatedRow(row);\n                    }\n                    next = row.children(NAVCELL + ':last');\n                }\n                if (next && next.length) {\n                    this.current(next);\n                    return true;\n                }\n            },\n            _handlePageDown: function () {\n                var that = this;\n                if (!that._isPageable()) {\n                    return false;\n                }\n                that.dataSource._restorePageSizeAfterAddChild();\n                that.dataSource.page(that.dataSource.page() + 1);\n                return true;\n            },\n            _handlePageUp: function () {\n                var that = this;\n                if (!that._isPageable()) {\n                    return false;\n                }\n                that.dataSource._restorePageSizeAfterAddChild();\n                that.dataSource.page(that.dataSource.page() - 1);\n                return true;\n            },\n            _handleEscKey: function (current, currentTable) {\n                var active = kendo._activeElement();\n                var currentIndex;\n                var that = this;\n                var row;\n                var rowIndex;\n                var cellIndex;\n                var tbody;\n                if (!current || !current.parent().hasClass('k-grid-edit-row')) {\n                    if (current.has(active).length) {\n                        focusTable(currentTable, true);\n                        return true;\n                    }\n                    return false;\n                }\n                if (that._isIncellEditable()) {\n                    row = current.parent();\n                    cellIndex = current.index();\n                    rowIndex = row.index();\n                    tbody = row.closest('tbody');\n                    that.closeCell(true);\n                    that._setCurrent(tbody.children().eq(rowIndex).children().eq(cellIndex));\n                } else {\n                    currentIndex = $(current).parent().index();\n                    if (active) {\n                        active.blur();\n                    }\n                    this.cancelRow();\n                    if (currentIndex >= 0) {\n                        this.current(this.items().eq(currentIndex).children(NAVCELL).first());\n                    }\n                }\n                if (browser.msie && browser.version < 9) {\n                    document.body.focus();\n                }\n                focusTable(currentTable, true);\n                return true;\n            },\n            _handleEnterKey: function (current, currentTable, target) {\n                var editable = this.options.editable;\n                var container = target.closest('[role=gridcell]');\n                var focusable;\n                if (!target.is('table') && !$.contains(current[0], target[0])) {\n                    current = container;\n                }\n                if (current.is('th')) {\n                    current.find('.k-link').click();\n                    return true;\n                }\n                focusable = current.find(':kendoFocusable:first');\n                if (focusable[0] && current.hasClass('k-state-focused')) {\n                    focusable.focus();\n                    return true;\n                }\n                if (editable && !target.is(':button,.k-button,textarea')) {\n                    if (!container[0]) {\n                        container = current;\n                    }\n                    this._handleEditing(container, false, currentTable);\n                    return true;\n                }\n                return false;\n            },\n            _handleTabKey: function (current, currentTable, shiftKey) {\n                var that = this;\n                var incellEditing = that.options.editable && that._isIncellEditable();\n                var cell;\n                if (!incellEditing || current.is('th')) {\n                    return false;\n                }\n                cell = $(activeElement()).closest(DOT + classNames.editCell);\n                if (cell[0] && cell[0] !== current[0]) {\n                    current = cell;\n                }\n                cell = that._tabNext(current, currentTable, shiftKey);\n                if (cell.length) {\n                    that._handleEditing(current, cell, cell.closest(TABLE));\n                    return true;\n                } else {\n                    that._preventPageSizeRestore = false;\n                }\n                return false;\n            },\n            _tabNext: function (current, currentTable, back) {\n                var that = this;\n                var switchRow = true;\n                var next = back ? current.prevAll(DATA_CELL + ':first') : current.nextAll(':visible:first');\n                if (!next.length) {\n                    next = current.parent();\n                    if (that.lockedTable) {\n                        switchRow = back && currentTable == that.lockedTable[0] || !back && currentTable == that.table[0];\n                        next = that._relatedRow(next);\n                    }\n                    if (switchRow) {\n                        next = next[back ? 'prevAll' : 'nextAll']('tr:not(.k-grouping-row):not(.k-detail-row):visible:first');\n                    }\n                    next = next.children(DATA_CELL + (back ? ':last' : ':first'));\n                    that.dataSource._restorePageSizeAfterAddChild();\n                }\n                return next;\n            },\n            _handleEditing: function (current, next, table) {\n                var that = this, active = $(kendo._activeElement()), isIE = browser.msie, editContainer, focusable, isEdited;\n                var editable = that.options.editable && that.options.editable.update !== false;\n                var incellEditing = that._isIncellEditable();\n                var nextFocusableCellRowIndex = $(next).parents('tr').index();\n                var nextFocusableCellIndex = $(next).index();\n                var currentFocusedCellRowIndex = $(current).parents('tr').index();\n                var currentFocusedCellIndex = current.index();\n                var editedCell;\n                table = $(table);\n                if (incellEditing) {\n                    isEdited = current.hasClass(classNames.editCell);\n                } else {\n                    isEdited = current.parent().hasClass('k-grid-edit-row');\n                }\n                if (that.editor) {\n                    editContainer = that.editor.wrapper;\n                    if (editContainer && $.contains(editContainer[0], active[0])) {\n                        if (browser.opera) {\n                            active.blur().change().triggerHandler('blur');\n                        } else {\n                            active.blur();\n                            if (isIE) {\n                                active.blur();\n                            }\n                        }\n                    }\n                    if (!that.editor) {\n                        focusTable(table);\n                        return;\n                    }\n                    if (that.editor.end()) {\n                        if (incellEditing) {\n                            that._preventPageSizeRestore = true;\n                            that.closeCell();\n                            that._preventPageSizeRestore = false;\n                            if ($(that.table).add(that.lockedTable).find(DOT + classNames.editCell).length === 0) {\n                                that.current(table.find('tbody').children().eq(currentFocusedCellRowIndex).children().eq(currentFocusedCellIndex));\n                            }\n                        } else {\n                            that.saveRow();\n                            isEdited = true;\n                        }\n                    } else {\n                        if (incellEditing) {\n                            that.current(editContainer);\n                        } else {\n                            that.current(editContainer.children().filter(NAVCELL).first());\n                        }\n                        focusable = editContainer.find(':kendoFocusable:first')[0];\n                        if (focusable) {\n                            focusable.focus();\n                        }\n                        return;\n                    }\n                }\n                next = $(next).length && table.find(next).length === 0 ? table.find('tbody').children().eq(nextFocusableCellRowIndex).children().eq(nextFocusableCellIndex) : next;\n                if (next) {\n                    that.current(next);\n                }\n                focusTable(table, true);\n                if (!editable) {\n                    return;\n                }\n                if (!isEdited && !next || next) {\n                    var currentIndex = that.current().index();\n                    if (incellEditing) {\n                        that.editCell(that.current());\n                        editedCell = $(that.table).add(that.lockedTable).find(DOT + classNames.editCell)[0];\n                        if (editedCell) {\n                            that._current = $(editedCell);\n                        } else {\n                            that.current(that._findCurrentCell());\n                        }\n                    } else {\n                        that.editRow(that.current().parent());\n                        that.current(that.editor.wrapper.children().eq(currentIndex));\n                        that.current().removeClass('k-state-focused');\n                    }\n                } else {\n                    that.dataSource._restorePageSizeAfterAddChild();\n                }\n            },\n            _moveRight: function (current) {\n                var next = current.nextAll(NAVCELL).first();\n                var row = current.parent();\n                if (current.hasClass('k-header')) {\n                    next = current.nextAll(NAVHEADER).first();\n                    if (!next[0] && this.lockedTable && current.closest('table')[0] === this.lockedHeader.find('table')[0]) {\n                        next = this.thead.find(NAVHEADER + ':first');\n                    }\n                }\n                if (!next[0] && this.lockedTable && current.closest('table')[0] === this.lockedTable[0]) {\n                    next = this._relatedRow(row).children(NAVCELL).first();\n                }\n                if (next[0] && next[0] !== current[0]) {\n                    focusTable(next.closest('table'), true);\n                }\n                this.current(next);\n                return true;\n            },\n            _moveLeft: function (current) {\n                var prev = current.prevAll(NAVCELL).first();\n                var row = current.parent();\n                if (current.hasClass('k-header')) {\n                    prev = current.prevAll(NAVHEADER).first();\n                    if (!prev[0] && this.lockedTable && current.closest('table')[0] === this.thead.parent()[0]) {\n                        prev = this.lockedHeader.find('>table>thead>tr>' + NAVHEADER + ':last');\n                    }\n                }\n                if (!prev[0] && this.lockedTable && current.closest('table')[0] === this.table[0]) {\n                    prev = this._relatedRow(row).children(NAVCELL).last();\n                }\n                if (prev[0] && prev[0] !== current[0]) {\n                    focusTable(prev.closest('table'), true);\n                }\n                this.current(prev);\n                return true;\n            },\n            _moveUp: function (current, shiftKey) {\n                var container = current.parent().parent();\n                var prev;\n                if (shiftKey) {\n                    prev = current.parent();\n                    prev = prev.prevAll(ITEMROW + ':first');\n                    prev = current.parent().is(ITEMROW) ? prev.children().eq(current.index()) : prev.children(DATA_CELL + ':last');\n                } else {\n                    prev = this._prevVerticalCell(container, current);\n                    if (!prev[0]) {\n                        this._lastCellIndex = 0;\n                        container = this._verticalContainer(container, true);\n                        prev = this._prevVerticalCell(container, current);\n                        if (prev[0]) {\n                            focusTable(container.parent(), true);\n                        }\n                    }\n                }\n                var tmp = this._lastCellIndex || 0;\n                this.current(prev);\n                this._lastCellIndex = tmp;\n                return true;\n            },\n            _moveDown: function (current, shiftKey) {\n                var container = current.parent().parent();\n                var next;\n                if (shiftKey) {\n                    next = current.parent();\n                    next = next.nextAll(ITEMROW + ':first');\n                    next = current.parent().is(ITEMROW) ? next.children().eq(current.index()) : next.children(DATA_CELL + ':first');\n                } else {\n                    next = this._nextVerticalCell(container, current);\n                    if (!next[0]) {\n                        this._lastCellIndex = 0;\n                        container = this._verticalContainer(container);\n                        next = this._nextVerticalCell(container, current);\n                        if (next[0]) {\n                            focusTable(container.parent(), true);\n                        }\n                    }\n                }\n                var tmp = this._lastCellIndex || 0;\n                this.current(next);\n                this._lastCellIndex = tmp;\n                return true;\n            },\n            _tableClick: function (e) {\n                var currentTarget = $(e.currentTarget), isHeader = currentTarget.is('th'), table = this.table.add(this.lockedTable), headerTable = this.thead.parent().add($('>table', this.lockedHeader)), isInput = isInputElement(e.target), currentTable = currentTarget.closest('table')[0];\n                if (kendo.support.touch) {\n                    return;\n                }\n                if (currentTable !== table[0] && currentTable !== table[1] && currentTable !== headerTable[0] && currentTable !== headerTable[1]) {\n                    return;\n                }\n                if (this.options.navigatable) {\n                    this.current(currentTarget);\n                }\n                if (isHeader || !isInput) {\n                    setTimeout(function () {\n                        if (!isInputElement(kendo._activeElement()) || !$.contains(currentTable, kendo._activeElement())) {\n                            focusTable(currentTable, true);\n                        }\n                    });\n                }\n                if (isHeader) {\n                    e.preventDefault();\n                }\n            },\n            _setTabIndex: function (table) {\n                this._navigatableTables.attr(TABINDEX, -1);\n                table.attr(TABINDEX, 0);\n            },\n            _tableFocus: function (e) {\n                var current = this.current();\n                var table = $(e.currentTarget);\n                if (current && current.is(':visible')) {\n                    current.addClass(classNames.focused);\n                } else {\n                    this.current(table.find(FIRSTNAVITEM));\n                }\n                this._setTabIndex(table);\n            },\n            _tableBlur: function () {\n                var current = this.current();\n                if (current) {\n                    current.removeClass(classNames.focused);\n                }\n            },\n            _attachEvents: function () {\n                var icons = DOT + classNames.iconCollapse + ', .' + classNames.iconExpand + ', .' + classNames.refresh;\n                var retryButton = DOT + classNames.retry;\n                this.element.on(MOUSEDOWN + NS, icons, proxy(this._toggleChildren, this)).on(CLICK + NS, retryButton, this._dataSourceFetchProxy).on(CLICK + NS, '.k-button[data-command]', proxy(this._commandClick, this));\n                this._attachCellEditingEventHandlers();\n            },\n            _attachCellEditingEventHandlers: function () {\n                var that = this;\n                var editable = that.options.editable;\n                var selectable = that.selectable && that.selectable.options.multiple;\n                var closeCell = function (e) {\n                    var target = activeElement();\n                    var editor = that.editor || {};\n                    var cell = editor.element;\n                    if (cell && !$.contains(cell[0], target) && cell[0] !== target && !$(target).closest('.k-animation-container').length) {\n                        if (editor.end()) {\n                            if (!e.relatedTarget && that._isPageable() && !isUndefined(that.dataSource._addChildPageSize)) {\n                                that._preventPageSizeRestore = false;\n                            }\n                            that.closeCell();\n                        }\n                    }\n                    that._preventPageSizeRestore = false;\n                };\n                if (that._isIncellEditable() && editable.update !== false) {\n                    that.wrapper.on(CLICK + NS, 'tr:not(.k-grouping-row) > td', function (e) {\n                        var td = $(this), isLockedCell = that.lockedTable && td.closest('table')[0] === that.lockedTable[0];\n                        if (td.hasClass(classNames.editCell) || td.has('a.k-grid-delete').length || td.has('button.k-grid-delete').length || td.closest('tbody')[0] !== that.tbody[0] && !isLockedCell || $(e.target).is(':input') || $(e.target).hasClass(classNames.iconExpand) || $(e.target).hasClass(classNames.iconCollapse)) {\n                            if (!that.editor) {\n                                that.dataSource._restorePageSizeAfterAddChild();\n                            }\n                            that._preventPageSizeRestore = false;\n                            return;\n                        }\n                        if (that.editor) {\n                            if (that.editor.end()) {\n                                if (selectable) {\n                                    $(activeElement()).blur();\n                                }\n                                that.closeCell();\n                                that.editCell(td);\n                            }\n                        } else {\n                            that.editCell(td);\n                        }\n                    }).on('mousedown' + NS, 'tr:not(.k-grouping-row) > td', function (e) {\n                        if (that.editor && that._isPageable() && !isUndefined(that.dataSource._addChildPageSize)) {\n                            that._preventPageSizeRestore = $(e.target).parents(DOT + classNames.editRow).length > 0;\n                        } else {\n                            that._preventPageSizeRestore = false;\n                        }\n                    }).on('focusin' + NS, function () {\n                        if (!$.contains(this, activeElement())) {\n                            clearTimeout(that._closeCellTimeout);\n                            that._closeCellTimeout = null;\n                        }\n                    }).on('focusout' + NS, function (e) {\n                        that._closeCellTimeout = setTimeout(function () {\n                            closeCell(e);\n                        }, 1);\n                    });\n                }\n            },\n            _commandByName: function (name) {\n                var columns = this.columns;\n                var toolbar = $.isArray(this.options.toolbar) ? this.options.toolbar : [];\n                var i, j, commands, currentName;\n                name = name.toLowerCase();\n                if (defaultCommands[name]) {\n                    return defaultCommands[name];\n                }\n                for (i = 0; i < columns.length; i++) {\n                    commands = columns[i].command;\n                    if (commands) {\n                        for (j = 0; j < commands.length; j++) {\n                            currentName = commands[j].name;\n                            if (!currentName) {\n                                continue;\n                            }\n                            if (currentName.toLowerCase() == name) {\n                                return commands[j];\n                            }\n                        }\n                    }\n                }\n                for (i = 0; i < toolbar.length; i++) {\n                    currentName = toolbar[i].name;\n                    if (!currentName) {\n                        continue;\n                    }\n                    if (currentName.toLowerCase() == name) {\n                        return toolbar[i];\n                    }\n                }\n            },\n            _commandClick: function (e) {\n                var button = $(e.currentTarget);\n                var commandName = button.attr('data-command');\n                var command = this._commandByName(commandName);\n                var row = button.parentsUntil(this.wrapper, 'tr');\n                row = row.length ? row : undefined;\n                if (command) {\n                    if (command.methodName) {\n                        this[command.methodName](row);\n                    } else if (command.click) {\n                        command.click.call(this, e);\n                    }\n                    e.preventDefault();\n                }\n            },\n            _ensureExpandableColumn: function () {\n                if (this._autoExpandable) {\n                    delete this._autoExpandable.expandable;\n                }\n                var visibleColumns = grep(this.columns, not(is('hidden')));\n                var expandableColumns = grep(visibleColumns, is('expandable'));\n                if (this.columns.length && !expandableColumns.length) {\n                    this._autoExpandable = visibleColumns[0];\n                    visibleColumns[0].expandable = true;\n                }\n            },\n            _columns: function () {\n                var columns = this.options.columns || [];\n                this.columns = map(columns, function (column) {\n                    column = typeof column === 'string' ? { field: column } : column;\n                    return extend({ encoded: true }, column);\n                });\n                var lockedCols = lockedColumns(columns);\n                if (lockedCols.length > 0) {\n                    this._hasLockedColumns = true;\n                    this.columns = lockedCols.concat(nonLockedColumns(this.columns));\n                }\n                this.columns = normalizeColumns(this.columns);\n                this._ensureExpandableColumn();\n                this._columnTemplates();\n                this._columnAttributes();\n            },\n            _columnTemplates: function () {\n                var idx, length, column;\n                var columns = leafColumns(this.columns);\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    column = columns[idx];\n                    if (column.template) {\n                        column.template = kendo.template(column.template);\n                    }\n                    if (column.headerTemplate) {\n                        column.headerTemplate = kendo.template(column.headerTemplate);\n                    }\n                    if (column.footerTemplate) {\n                        column.footerTemplate = kendo.template(column.footerTemplate);\n                    }\n                }\n            },\n            _columnAttributes: function () {\n                var idx, length;\n                var columns = this.columns;\n                function convertStyle(attr) {\n                    var properties, i, declaration;\n                    if (attr && attr.style) {\n                        properties = attr.style.split(';');\n                        attr.style = {};\n                        for (i = 0; i < properties.length; i++) {\n                            declaration = properties[i].split(':');\n                            var name = $.trim(declaration[0]);\n                            if (name) {\n                                attr.style[$.camelCase(name)] = $.trim(declaration[1]);\n                            }\n                        }\n                    }\n                }\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    convertStyle(columns[idx].attributes);\n                    convertStyle(columns[idx].headerAttributes);\n                }\n            },\n            _layout: function () {\n                var columns = this.columns;\n                var element = this.element;\n                var layout = '';\n                this.wrapper = element.addClass(classNames.wrapper);\n                layout = '<div class=\\'#= gridHeader #\\'>';\n                if (this._hasLockedColumns) {\n                    layout += '<div class=\\'k-grid-header-locked\\'>' + '<table role=\\'grid\\'>' + '<colgroup></colgroup>' + '<thead role=\\'rowgroup\\' />' + '</table>' + '</div>';\n                }\n                layout += '<div class=\\'#= gridHeaderWrap #\\'>' + '<table role=\\'grid\\'>' + '<colgroup></colgroup>' + '<thead role=\\'rowgroup\\' />' + '</table>' + '</div>' + '</div>';\n                if (this._hasLockedColumns) {\n                    layout += '<div class=\\'k-grid-content-locked\\'>' + '<table role=\\'treegrid\\' tabindex=\\'0\\'>' + '<colgroup></colgroup>' + '<tbody />' + '</table>' + '</div>';\n                }\n                layout += '<div class=\\'#= gridContentWrap # k-auto-scrollable\\'>' + '<table role=\\'treegrid\\' tabindex=\\'0\\'>' + '<colgroup></colgroup>' + '<tbody />' + '</table>' + '</div>';\n                if (!this.options.scrollable) {\n                    layout = '<table role=\\'treegrid\\' tabindex=\\'0\\'>' + '<colgroup></colgroup>' + '<thead class=\\'#= gridHeader #\\' role=\\'rowgroup\\' />' + '<tbody />' + '</table>';\n                }\n                if (this.options.toolbar) {\n                    layout = '<div class=\\'#= header # #= gridToolbar #\\' />' + layout;\n                }\n                element.append(kendo.template(layout)(classNames) + '<div class=\\'k-status\\' />');\n                this.toolbar = element.find(DOT + classNames.gridToolbar);\n                var header = element.find(DOT + classNames.gridHeader).find('thead').addBack().filter('thead');\n                this.thead = header.last();\n                if (this.options.scrollable) {\n                    var rtl = kendo.support.isRtl(element);\n                    element.find('div.' + classNames.gridHeader).css(rtl ? 'padding-left' : 'padding-right', kendo.support.scrollbar());\n                }\n                var content = element.find(DOT + classNames.gridContentWrap);\n                if (!content.length) {\n                    content = element;\n                } else {\n                    this.content = content;\n                }\n                this.table = content.find('>table');\n                this.tbody = this.table.find('>tbody');\n                if (this._hasLockedColumns) {\n                    this.lockedHeader = header.first().closest('.k-grid-header-locked');\n                    this.lockedContent = element.find('.k-grid-content-locked');\n                    this.lockedTable = this.lockedContent.children();\n                }\n                this._initVirtualTrees();\n                this._renderCols();\n                this._renderHeader();\n                this.angular('compile', function () {\n                    return {\n                        elements: header.find('th.k-header').get(),\n                        data: map(columns, function (col) {\n                            return { column: col };\n                        })\n                    };\n                });\n            },\n            _initVirtualTrees: function () {\n                this._headerColsTree = new kendoDom.Tree(this.thead.prev()[0]);\n                this._contentColsTree = new kendoDom.Tree(this.tbody.prev()[0]);\n                this._headerTree = new kendoDom.Tree(this.thead[0]);\n                this._contentTree = new kendoDom.Tree(this.tbody[0]);\n                this._statusTree = new kendoDom.Tree(this.element.children('.k-status')[0]);\n                if (this.lockedHeader) {\n                    this._lockedHeaderColsTree = new kendoDom.Tree(this.lockedHeader.find('colgroup')[0]);\n                    this._lockedContentColsTree = new kendoDom.Tree(this.lockedTable.find('>colgroup')[0]);\n                    this._lockedHeaderTree = new kendoDom.Tree(this.lockedHeader.find('thead')[0]);\n                    this._lockedContentTree = new kendoDom.Tree(this.lockedTable.find('>tbody')[0]);\n                }\n            },\n            _toolbar: function () {\n                var options = this.options.toolbar;\n                var toolbar = this.toolbar;\n                if (!options) {\n                    return;\n                }\n                if ($.isArray(options)) {\n                    var buttons = this._buildCommands(options);\n                    new kendoDom.Tree(toolbar[0]).render(buttons);\n                } else {\n                    toolbar.append(kendo.template(options)({}));\n                }\n                this.angular('compile', function () {\n                    return { elements: toolbar.get() };\n                });\n            },\n            _lockedColumns: function () {\n                return grep(this.columns, is('locked'));\n            },\n            _nonLockedColumns: function () {\n                return grep(this.columns, not(is('locked')));\n            },\n            _templateColumns: function () {\n                return grep(this.columns, is('template'));\n            },\n            _flushCache: function () {\n                if (this.options.$angular && this._templateColumns().length) {\n                    this._contentTree.render([]);\n                    if (this._hasLockedColumns) {\n                        this._lockedContentTree.render([]);\n                    }\n                }\n            },\n            _render: function (options) {\n                var that = this;\n                options = options || {};\n                options = that._renderOptions(options);\n                var messages = this.options.messages;\n                var pageable = that._isPageable();\n                var dataSource = that.dataSource;\n                var maps = {\n                    children: options.filteredChildrenMap || options.childrenMap,\n                    ids: options.idsMap\n                };\n                var dataMaps = pageable ? maps && maps.children && maps.ids ? maps : dataSource._initDataMaps(dataSource._getData()) : {};\n                var childrenMap = dataMaps.children;\n                var idsMap = dataMaps.ids;\n                options.childrenMap = childrenMap;\n                options.idsMap = idsMap;\n                var data = that._dataToRender(options);\n                var level = that._renderedModelLevel(data[0], options);\n                var uidAttr = kendo.attr('uid');\n                var selected = this.select().removeClass('k-state-selected').map(function (_, row) {\n                    return $(row).attr(uidAttr);\n                });\n                var viewChildrenMap;\n                this._absoluteIndex = 0;\n                this._angularItems('cleanup');\n                this._angularFooters('cleanup');\n                this._flushCache();\n                that._clearRenderMap();\n                if (options.error) {\n                    this._showStatus(kendo.template('#: messages.requestFailed # ' + '<button class=\\'#= buttonClass #\\'>#: messages.retry #</button>')({\n                        buttonClass: [\n                            classNames.button,\n                            classNames.retry\n                        ].join(' '),\n                        messages: messages\n                    }));\n                } else if (!data.length) {\n                    this._showStatus(kendo.htmlEncode(messages.noRows));\n                } else {\n                    if (pageable) {\n                        viewChildrenMap = that._viewChildrenMap(options);\n                    }\n                    this._hideStatus();\n                    this._contentTree.render(this._trs({\n                        columns: leafColumns(nonLockedColumns(this.columns)),\n                        editedColumn: options.editedColumn,\n                        editedColumnIndex: options.editedColumnIndex,\n                        aggregates: options.aggregates,\n                        selected: selected,\n                        data: data,\n                        childrenMap: childrenMap,\n                        viewChildrenMap: viewChildrenMap,\n                        visible: true,\n                        level: 0\n                    }));\n                    if (this._hasLockedColumns) {\n                        this._absoluteIndex = 0;\n                        this._lockedContentTree.render(this._trs({\n                            columns: leafColumns(lockedColumns(this.columns)),\n                            editedColumn: options.editedColumn,\n                            editedColumnIndex: options.editedColumnIndex,\n                            aggregates: options.aggregates,\n                            selected: selected,\n                            data: data,\n                            childrenMap: childrenMap,\n                            viewChildrenMap: viewChildrenMap,\n                            visible: true,\n                            level: level\n                        }));\n                    }\n                }\n                if (this._touchScroller) {\n                    this._touchScroller.contentResized();\n                }\n                this._muteAngularRebind(function () {\n                    this._angularItems('compile');\n                    this._angularFooters('compile');\n                });\n                this.items().filter(function () {\n                    return $.inArray($(this).attr(uidAttr), selected) >= 0;\n                }).addClass('k-state-selected');\n                this._syncLockedContentHeight();\n                that._togglePagerVisibility();\n            },\n            _renderProgress: function (toggle) {\n                kendo.ui.progress(this.wrapper, toggle);\n            },\n            _renderOptions: function (options) {\n                options = options || {};\n                var that = this;\n                var dataMaps = that.dataSource._getDataMaps();\n                var filter = that.dataSource.filter();\n                if (that._isPageable()) {\n                    options.childrenMap = dataMaps.children;\n                    options.idsMap = dataMaps.ids;\n                    if (filter) {\n                        options.filteredChildrenMap = dataMaps.filteredChildren;\n                    }\n                }\n                return options;\n            },\n            _renderedModelLevel: function (model, options) {\n                return !this._isPageable() ? 0 : this.dataSource._pageableModelLevel(model, options);\n            },\n            _viewChildrenMap: function (options) {\n                options = options || {};\n                var that = this;\n                var dataSource = that.dataSource;\n                var viewChildrenMap = dataSource.childrenMap(dataSource.view());\n                var idField = dataSource._modelIdField();\n                var parentsNotInView = dataSource._parentNodesNotInView();\n                var parentNotInView;\n                var parentNotInViewId;\n                var parents;\n                var parent;\n                var parentId;\n                var child;\n                var childId;\n                var parentsCopy;\n                that._clearRenderMap();\n                for (var i = 0; i < parentsNotInView.length; i++) {\n                    parentNotInView = parentsNotInView[i];\n                    parentNotInViewId = parentNotInView[idField];\n                    that._markNodeAsNonRenderable(parentNotInViewId);\n                    viewChildrenMap[parentNotInViewId] = viewChildrenMap[parentNotInViewId] || [];\n                    parents = dataSource._parentNodes(parentNotInView);\n                    parentsCopy = parents.slice();\n                    parentsCopy.push(parentNotInView);\n                    for (var parentIndex = 0; parentIndex < parentsCopy.length - 1; parentIndex++) {\n                        parent = parentsCopy[parentIndex];\n                        parentId = parent[idField];\n                        that._markNodeAsNonRenderable(parentId);\n                        viewChildrenMap[parentId] = viewChildrenMap[parentId] || [];\n                        child = parentsCopy[parentIndex + 1];\n                        childId = child[idField];\n                        that._markNodeAsNonRenderable(childId);\n                        viewChildrenMap[childId] = viewChildrenMap[childId] || [];\n                        if (viewChildrenMap[parentId].indexOf(child) === -1) {\n                            viewChildrenMap[parentId].unshift(child);\n                        }\n                    }\n                }\n                return viewChildrenMap;\n            },\n            _clearRenderMap: function () {\n                this._skipRenderingMap = {};\n            },\n            _dataToRender: function (options) {\n                var that = this;\n                if (that._isPageable()) {\n                    return that.dataSource._pageableRootNodes(options);\n                }\n                return that.dataSource.rootNodes();\n            },\n            _markNodeAsNonRenderable: function (nodeId) {\n                this._skipRenderingMap[nodeId] = true;\n            },\n            _adjustRowsHeight: function (table1, table2) {\n                if (!this._hasLockedColumns) {\n                    return;\n                }\n                var rows = table1[0].rows;\n                var length = rows.length;\n                var idx;\n                var rows2 = table2[0].rows;\n                var containers = table1.add(table2);\n                var containersLength = containers.length;\n                var heights = [];\n                for (idx = 0; idx < length; idx++) {\n                    if (!rows2[idx]) {\n                        break;\n                    }\n                    if (rows[idx].style.height) {\n                        rows[idx].style.height = rows2[idx].style.height = '';\n                    }\n                }\n                for (idx = 0; idx < length; idx++) {\n                    if (!rows2[idx]) {\n                        break;\n                    }\n                    var offsetHeight1 = rows[idx].offsetHeight;\n                    var offsetHeight2 = rows2[idx].offsetHeight;\n                    var height = 0;\n                    if (offsetHeight1 > offsetHeight2) {\n                        height = offsetHeight1;\n                    } else if (offsetHeight1 < offsetHeight2) {\n                        height = offsetHeight2;\n                    }\n                    heights.push(height);\n                }\n                for (idx = 0; idx < containersLength; idx++) {\n                    containers[idx].style.display = 'none';\n                }\n                for (idx = 0; idx < length; idx++) {\n                    if (heights[idx]) {\n                        rows[idx].style.height = rows2[idx].style.height = heights[idx] + 1 + 'px';\n                    }\n                }\n                for (idx = 0; idx < containersLength; idx++) {\n                    containers[idx].style.display = '';\n                }\n            },\n            _ths: function (columns, rowSpan) {\n                var ths = [];\n                var column, title, children, cellClasses, attr, headerContent;\n                for (var i = 0, length = columns.length; i < length; i++) {\n                    column = columns[i];\n                    children = [];\n                    cellClasses = [classNames.header];\n                    if (column.headerTemplate) {\n                        title = column.headerTemplate({});\n                    } else {\n                        title = column.title || column.field || '';\n                    }\n                    if (column.headerTemplate) {\n                        headerContent = kendoHtmlElement(title);\n                    } else {\n                        headerContent = kendoTextElement(title);\n                    }\n                    if (column.sortable) {\n                        children.push(kendoDomElement('a', {\n                            href: '#',\n                            className: classNames.link\n                        }, [headerContent]));\n                    } else {\n                        children.push(headerContent);\n                    }\n                    attr = {\n                        'data-field': column.field,\n                        'data-title': column.title,\n                        'style': column.hidden === true ? { 'display': 'none' } : {},\n                        className: cellClasses.join(' '),\n                        'role': 'columnheader'\n                    };\n                    if (!column.columns) {\n                        attr.rowSpan = rowSpan ? rowSpan : 1;\n                    }\n                    if (column.headerAttributes) {\n                        if (column.headerAttributes.colSpan === 1) {\n                            delete column.headerAttributes.colSpan;\n                        }\n                        if (column.headerAttributes['class']) {\n                            attr.className += ' ' + column.headerAttributes['class'];\n                            delete column.headerAttributes['class'];\n                        }\n                    }\n                    if (column['data-index'] > -1) {\n                        attr['data-index'] = column['data-index'];\n                    }\n                    attr = extend(true, {}, attr, column.headerAttributes);\n                    ths.push(kendoDomElement('th', attr, children));\n                }\n                return ths;\n            },\n            _cols: function (columns) {\n                var cols = [];\n                var width, attr;\n                for (var i = 0; i < columns.length; i++) {\n                    if (columns[i].hidden === true) {\n                        continue;\n                    }\n                    width = columns[i].width;\n                    attr = {};\n                    if (width && parseInt(width, 10) !== 0) {\n                        attr.style = { width: typeof width === 'string' ? width : width + 'px' };\n                    }\n                    cols.push(kendoDomElement('col', attr));\n                }\n                return cols;\n            },\n            _clearColsCache: function () {\n                this._headerColsTree.render([]);\n                if (this.options.scrollable) {\n                    this._contentColsTree.render([]);\n                }\n                if (this._hasLockedColumns) {\n                    this._lockedHeaderColsTree.render([]);\n                    this._lockedContentColsTree.render([]);\n                }\n            },\n            _renderCols: function () {\n                var columns = nonLockedColumns(this.columns);\n                this._headerColsTree.render(this._cols(leafColumns(columns)));\n                if (this.options.scrollable) {\n                    this._contentColsTree.render(this._cols(leafColumns(columns)));\n                }\n                if (this._hasLockedColumns) {\n                    columns = lockedColumns(this.columns);\n                    this._lockedHeaderColsTree.render(this._cols(leafColumns(columns)));\n                    this._lockedContentColsTree.render(this._cols(leafColumns(columns)));\n                }\n            },\n            _retrieveFirstColumn: function (columns, rows) {\n                var result = $();\n                if (rows.length && columns[0]) {\n                    var column = columns[0];\n                    while (column.columns && column.columns.length) {\n                        column = column.columns[0];\n                        rows = rows.filter(':not(:first())');\n                    }\n                    result = result.add(rows);\n                }\n                return result;\n            },\n            _updateFirstColumnClass: function () {\n                var that = this;\n                var columns = that.columns || [];\n                var tr = that.thead.find('>tr:not(:first)');\n                var rows;\n                columns = nonLockedColumns(columns);\n                rows = that._retrieveFirstColumn(columns, tr);\n                if (that.lockedHeader) {\n                    tr = that.lockedHeader.find('thead>tr:not(.k-filter-row):not(:first)');\n                    columns = lockedColumns(that.columns);\n                    rows = rows.add(that._retrieveFirstColumn(columns, tr));\n                }\n                rows.each(function () {\n                    var ths = $(this).find('th');\n                    ths.removeClass('k-first');\n                    ths.eq(0).addClass('k-first');\n                });\n            },\n            _updateRowSpans: function (rows) {\n                for (var i = rows.length - 1; i >= 0; i--) {\n                    var included = visibleChildColumns(rows[i].cells).length > 0;\n                    if (included) {\n                        rows[i].rowSpan = rows.length - i;\n                    }\n                }\n            },\n            _setColumnDataIndexes: function (columns) {\n                for (var i = 0; i < columns.length; i++) {\n                    columns[i]['data-index'] = i;\n                }\n            },\n            _updateColumnCellIndex: function () {\n                var header;\n                var offset = 0;\n                if (this.lockedHeader) {\n                    header = this.lockedHeader.find('thead');\n                    offset = updateCellIndex(header, lockedColumns(this.columns));\n                }\n                updateCellIndex(this.thead, nonLockedColumns(this.columns), offset);\n            },\n            _setParentsVisibility: function (column, visible) {\n                var columns = this.columns;\n                var idx;\n                var parents = [];\n                var parent;\n                var predicate = visible ? function (p) {\n                    return visibleColumns(p.columns).length && p.hidden;\n                } : function (p) {\n                    return !visibleColumns(p.columns).length && !p.hidden;\n                };\n                if (columnParents(column, columns, parents) && parents.length) {\n                    for (idx = parents.length - 1; idx >= 0; idx--) {\n                        parent = parents[idx];\n                        if (predicate(parent)) {\n                            parent.hidden = !visible;\n                        }\n                    }\n                }\n            },\n            _prepareColumns: function (rows, columns, parentCell, parentRow, parentColumn) {\n                var row = parentRow || rows[rows.length - 1];\n                var childRow = rows[row.index + 1];\n                var totalColSpan = 0;\n                for (var idx = 0; idx < columns.length; idx++) {\n                    var cell = $.extend({}, columns[idx], { headerAttributes: columns[idx].headerAttributes || {} });\n                    row.cells.push(cell);\n                    if (columns[idx].columns && columns[idx].columns.length) {\n                        if (!childRow) {\n                            childRow = {\n                                rowSpan: 0,\n                                cells: [],\n                                index: rows.length\n                            };\n                            rows.push(childRow);\n                        }\n                        if (columns[idx].columns.length) {\n                            cell.headerAttributes.colSpan = visibleChildColumns(columns[idx].columns).length || 1;\n                            cell.headerAttributes['data-colspan'] = leafColumns(columns[idx].columns).length;\n                        }\n                        this._prepareColumns(rows, columns[idx].columns, cell, childRow, columns[idx]);\n                        if (!cell.hidden) {\n                            totalColSpan += cell.headerAttributes.colSpan - 1;\n                        }\n                        row.rowSpan = rows.length - row.index;\n                    }\n                    columns[idx].rowIndex = row.index;\n                    if (parentColumn) {\n                        columns[idx].parentColumn = parentColumn;\n                    }\n                    columns[idx].cellIndex = row.cells.length - 1;\n                }\n                if (parentCell) {\n                    parentCell.headerAttributes.colSpan += totalColSpan;\n                }\n            },\n            _renderHeaderTree: function (tree, columns, hasMultiColumnHeaders) {\n                var idx;\n                var rows = [];\n                var rowsToRender = [];\n                if (hasMultiColumnHeaders) {\n                    rows = [{\n                            rowSpan: 1,\n                            cells: [],\n                            index: 0\n                        }];\n                    this._prepareColumns(rows, columns);\n                    this._updateRowSpans(rows);\n                    for (idx = 0; idx < rows.length; idx++) {\n                        rowsToRender.push(kendoDomElement('tr', { 'role': 'row' }, this._ths(rows[idx].cells, rows[idx].rowSpan)));\n                    }\n                    tree.render(rowsToRender);\n                } else {\n                    tree.render([kendoDomElement('tr', { 'role': 'row' }, this._ths(columns))]);\n                }\n            },\n            _renderHeader: function () {\n                var columns = nonLockedColumns(this.columns);\n                var hasMultiColumnHeaders = grep(this.columns, function (item) {\n                    return item.columns !== undefined;\n                }).length > 0;\n                this._setColumnDataIndexes(leafColumns(this.columns));\n                this._renderHeaderTree(this._headerTree, columns, hasMultiColumnHeaders);\n                if (this._hasLockedColumns) {\n                    columns = lockedColumns(this.columns);\n                    this._renderHeaderTree(this._lockedHeaderTree, columns, hasMultiColumnHeaders);\n                    this._applyLockedContainersWidth();\n                    this._syncLockedHeaderHeight();\n                }\n                this._updateFirstColumnClass();\n            },\n            _applyLockedContainersWidth: function () {\n                if (!this._hasLockedColumns) {\n                    return;\n                }\n                var lockedWidth = columnsWidth(this.lockedHeader.find('>table>colgroup>col'));\n                var headerTable = this.thead.parent();\n                var nonLockedWidth = columnsWidth(headerTable.find('>colgroup>col'));\n                var wrapperWidth = this.wrapper[0].clientWidth;\n                var scrollbar = kendo.support.scrollbar();\n                if (lockedWidth >= wrapperWidth) {\n                    lockedWidth = wrapperWidth - 3 * scrollbar;\n                }\n                this.lockedHeader.add(this.lockedContent).width(lockedWidth);\n                headerTable.add(this.table).width(nonLockedWidth);\n                var width = wrapperWidth - lockedWidth - 2;\n                this.content.width(width);\n                headerTable.parent().width(width - scrollbar);\n            },\n            _trs: function (options) {\n                var that = this;\n                var model, attr, className, hasChildren, childNodes, i, length;\n                var modelId;\n                var rows = [];\n                var level = options.level;\n                var data = options.data;\n                var dataSource = this.dataSource;\n                var aggregates = dataSource.aggregates() || {};\n                var idField = dataSource._modelIdField();\n                var parentIdField = dataSource._modelParentIdField();\n                var columns = options.columns;\n                var pageable = that._isPageable();\n                var childrenMap = options.childrenMap || dataSource.childrenMap(dataSource._getData());\n                for (i = 0, length = data.length; i < length; i++) {\n                    className = [];\n                    model = data[i];\n                    modelId = model[idField];\n                    childNodes = pageable ? childrenMap[modelId] : model.loaded() ? dataSource.childNodes(model) : [];\n                    hasChildren = childNodes && childNodes.length;\n                    attr = { 'role': 'row' };\n                    attr[kendo.attr('uid')] = model.uid;\n                    if (hasChildren) {\n                        attr['aria-expanded'] = !!model.expanded;\n                    }\n                    if (options.visible) {\n                        if (!pageable || pageable && !that._skipRenderingMap[modelId]) {\n                            if (this._absoluteIndex % 2 !== 0) {\n                                className.push(classNames.alt);\n                            }\n                            this._absoluteIndex++;\n                        }\n                    } else {\n                        attr.style = { display: 'none' };\n                    }\n                    if ($.inArray(model.uid, options.selected) >= 0) {\n                        className.push(classNames.selected);\n                    }\n                    if (hasChildren) {\n                        className.push(classNames.group);\n                    }\n                    if (model._edit) {\n                        className.push('k-grid-edit-row');\n                    }\n                    attr.className = className.join(' ');\n                    if (!that._skipRenderingMap[modelId]) {\n                        var row = this._tds({\n                            model: model,\n                            attr: attr,\n                            level: pageable ? that._renderedModelLevel(model, options) : level,\n                            editedColumn: options.editedColumn,\n                            editedColumnIndex: options.editedColumnIndex\n                        }, columns, proxy(this._td, this));\n                        rows.push(row);\n                    }\n                    if (hasChildren) {\n                        if (pageable) {\n                            childNodes = (options.viewChildrenMap || {})[modelId] || [];\n                        }\n                        if (childNodes.length === 0) {\n                            continue;\n                        }\n                        rows = rows.concat(this._trs({\n                            columns: columns,\n                            editedColumn: options.editedColumn,\n                            editedColumnIndex: options.editedColumnIndex,\n                            aggregates: aggregates,\n                            selected: options.selected,\n                            visible: pageable ? options.visible : options.visible && !!model.expanded,\n                            data: childNodes,\n                            childrenMap: options.childrenMap || childrenMap,\n                            viewChildrenMap: options.viewChildrenMap,\n                            level: level + 1\n                        }));\n                    }\n                }\n                if (this._hasFooterTemplate() && model) {\n                    attr = {\n                        className: classNames.footerTemplate,\n                        'data-parentId': model[parentIdField]\n                    };\n                    if (!options.visible) {\n                        attr.style = { display: 'none' };\n                    }\n                    rows.push(this._tds({\n                        model: aggregates[model[parentIdField]],\n                        attr: attr,\n                        level: level,\n                        editedColumn: options.editedColumn,\n                        editedColumnIndex: options.editedColumnIndex\n                    }, columns, this._footerId));\n                }\n                return rows;\n            },\n            _footerId: function (options) {\n                var content = [];\n                var column = options.column;\n                var template = options.column.footerTemplate || $.noop;\n                var aggregates = options.model[column.field] || {};\n                var attr = {\n                    'role': 'gridcell',\n                    'style': column.hidden === true ? { 'display': 'none' } : {}\n                };\n                if (column.expandable) {\n                    content = content.concat(createPlaceholders({\n                        level: options.level + 1,\n                        className: classNames.iconPlaceHolder\n                    }));\n                }\n                if (column.attributes) {\n                    extend(true, attr, column.attributes, { 'style': column.hidden === true ? { 'display': 'none' } : {} });\n                }\n                content.push(kendoHtmlElement(template(aggregates) || ''));\n                return kendoDomElement('td', attr, content);\n            },\n            _hasFooterTemplate: function () {\n                return !!grep(this.columns, function (c) {\n                    return c.footerTemplate;\n                }).length;\n            },\n            _tds: function (options, columns, renderer) {\n                var children = [];\n                var column;\n                var editedColumnField = (options.editedColumn || {}).field;\n                var incellEditing = this._isIncellEditable();\n                var length = columns.length;\n                for (var i = 0; i < length; i++) {\n                    column = columns[i];\n                    var col = renderer({\n                        model: options.model,\n                        column: column,\n                        editColumn: !incellEditing || incellEditing && column.field === editedColumnField && options.editedColumnIndex === i,\n                        level: options.level\n                    });\n                    children.push(col);\n                }\n                return kendoDomElement('tr', options.attr, children);\n            },\n            _td: function (options) {\n                var children = [];\n                var model = options.model;\n                var column = options.column;\n                var iconClass;\n                var attr = {\n                    'role': 'gridcell',\n                    'style': column.hidden === true ? { 'display': 'none' } : {}\n                };\n                var incellEditing = this._isIncellEditable();\n                var columnHasEditCommand = false;\n                if (column.attributes) {\n                    extend(true, attr, column.attributes);\n                }\n                if (model._edit && column.field && options.editColumn && (incellEditing || !incellEditing && isColumnEditable(column, model))) {\n                    attr[kendo.attr('container-for')] = column.field;\n                    if (incellEditing) {\n                        if (attr.className && attr.className.indexOf(classNames.editCell) !== -1) {\n                            attr.className += ' ' + classNames.editCell;\n                        } else if (!attr.className) {\n                            attr.className = classNames.editCell;\n                        }\n                    }\n                } else {\n                    if (column.expandable) {\n                        children = createPlaceholders({\n                            level: options.level,\n                            className: classNames.iconPlaceHolder\n                        });\n                        iconClass = [classNames.icon];\n                        if (model.hasChildren) {\n                            iconClass.push(model.expanded ? classNames.iconCollapse : classNames.iconExpand);\n                        } else {\n                            iconClass.push(classNames.iconHidden);\n                        }\n                        if (model._error) {\n                            iconClass.push(classNames.refresh);\n                        } else if (!model.loaded() && model.expanded) {\n                            iconClass.push(classNames.loading);\n                        }\n                        children.push(kendoDomElement('span', { className: iconClass.join(' ') }));\n                        attr.style['white-space'] = 'nowrap';\n                    }\n                    if (isDirtyColumn(column, model)) {\n                        if (attr.className) {\n                            attr.className += classNames.dirtyCell;\n                        } else if (!attr.className) {\n                            attr.className = classNames.dirtyCell;\n                        }\n                    }\n                    if (column.command) {\n                        if (attr.className && attr.className.indexOf('k-command-cell') !== -1) {\n                            attr.className += ' k-command-cell';\n                        } else if (!attr.className) {\n                            attr.className = 'k-command-cell';\n                        }\n                        columnHasEditCommand = grep(column.command, function (command) {\n                            return command === EDIT || command.name === EDIT;\n                        }).length > 0;\n                        if (model._edit && !this._isIncellEditable() && columnHasEditCommand) {\n                            children = this._buildCommands([\n                                'update',\n                                'canceledit'\n                            ]);\n                        } else {\n                            children = this._buildCommands(column.command);\n                        }\n                    } else {\n                        children.push(this._cellContent(column, model));\n                    }\n                    if (attr['class']) {\n                        attr.className = attr['class'] + ' ' + attr.className;\n                    }\n                }\n                return kendoDomElement('td', attr, children);\n            },\n            _cellContent: function (column, model) {\n                var that = this;\n                var value;\n                var incellEditing = that._isIncellEditable();\n                var dirtyIndicator = incellEditing ? that._evalDirtyIndicatorTemplate(column, model) : '';\n                if (column.template) {\n                    value = that._evalColumnTemplate(column, model);\n                } else if (column.field) {\n                    value = model.get(column.field);\n                    if (value !== null && !isUndefined(value)) {\n                        if (column.format) {\n                            value = kendo.format(column.format, value);\n                        }\n                        value = dirtyIndicator + value;\n                    } else {\n                        value = dirtyIndicator;\n                    }\n                } else if (value === null || isUndefined(value)) {\n                    value = '';\n                }\n                if (column.template || !column.encoded) {\n                    return kendoHtmlElement(value);\n                } else {\n                    if (incellEditing) {\n                        return kendoHtmlElement(value);\n                    } else {\n                        return kendoTextElement(value);\n                    }\n                }\n            },\n            _evalColumnTemplate: function (column, model) {\n                if (this._isIncellEditable()) {\n                    return this._evalCustomColumnTemplate(column, model);\n                } else {\n                    return column.template(model);\n                }\n            },\n            _evalCustomColumnTemplate: function (column, model) {\n                var that = this;\n                var templateSettings = that._customTemplateSettings();\n                var columnTemplateAlias = '#=this.columnTemplate(' + templateSettings.paramName + ')#';\n                var templateString = that._dirtyIndicatorTemplate(column.field) + columnTemplateAlias;\n                var templateFunction = proxy(kendoTemplate(templateString, templateSettings), { columnTemplate: column.template });\n                return templateFunction(model);\n            },\n            _evalDirtyIndicatorTemplate: function (column, model) {\n                var dirtyIndicatorTemplate = this._dirtyIndicatorTemplate(column.field);\n                return kendoTemplate(dirtyIndicatorTemplate)(model);\n            },\n            _dirtyIndicatorTemplate: function (field) {\n                var that = this;\n                var dirtyField;\n                var templateSettings = that._customTemplateSettings();\n                var paramName = templateSettings.paramName;\n                if (field && paramName) {\n                    dirtyField = field.charAt(0) === '[' ? kendo.expr(field, paramName + '.dirtyFields') : paramName + '.dirtyFields[\\'' + field + '\\']';\n                    return '#= ' + paramName + ' && ' + paramName + '.dirty && ' + paramName + '.dirtyFields && ' + dirtyField + ' ? \\'<span class=\"k-dirty\"></span>\\' : \\'\\' #';\n                }\n                return '';\n            },\n            _customTemplateSettings: function () {\n                return extend({}, kendo.Template, this.options.templateSettings);\n            },\n            _buildCommands: function (commands) {\n                var i, result = [];\n                for (i = 0; i < commands.length; i++) {\n                    result.push(this._button(commands[i]));\n                }\n                return result;\n            },\n            _button: function (command) {\n                var name = (command.name || command).toLowerCase();\n                var text = this.options.messages.commands[name];\n                var icon = [];\n                command = extend({}, defaultCommands[name], { text: text }, command);\n                if (command.imageClass) {\n                    icon.push(kendoDomElement('span', {\n                        className: [\n                            'k-icon',\n                            command.imageClass\n                        ].join(' ')\n                    }));\n                }\n                return kendoDomElement('button', {\n                    'type': 'button',\n                    'data-command': name,\n                    className: [\n                        'k-button',\n                        'k-button-icontext',\n                        command.className\n                    ].join(' ')\n                }, icon.concat([kendoTextElement(command.text || command.name)]));\n            },\n            _positionResizeHandle: function (e) {\n                var th = $(e.currentTarget);\n                var resizeHandle = this.resizeHandle;\n                var position = th.position();\n                var left;\n                var cellWidth = outerWidth(th);\n                var container = th.closest('div');\n                var indicatorWidth = this.options.columnResizeHandleWidth || 3;\n                left = cellWidth;\n                if (!resizeHandle) {\n                    resizeHandle = this.resizeHandle = $('<div class=\"k-resize-handle\"><div class=\"k-resize-handle-inner\" /></div>');\n                }\n                var cells = leafDataCells(th.closest('thead')).filter(':visible');\n                if (isRtl) {\n                    left = th.position().left;\n                } else {\n                    for (var idx = 0; idx < cells.length; idx++) {\n                        if (cells[idx] == th[0]) {\n                            break;\n                        }\n                        left += cells[idx].offsetWidth;\n                    }\n                }\n                container.append(resizeHandle);\n                resizeHandle.show().css({\n                    top: position.top,\n                    left: left - indicatorWidth - 1,\n                    height: outerHeight(th),\n                    width: indicatorWidth * 3\n                }).data('th', th);\n                var that = this;\n                resizeHandle.off('dblclick' + NS).on('dblclick' + NS, function () {\n                    var index = th.index();\n                    if ($.contains(that.thead[0], th[0])) {\n                        index += grep(that.columns, function (val) {\n                            return val.locked && !val.hidden;\n                        }).length;\n                    }\n                    that.autoFitColumn(index);\n                });\n            },\n            autoFitColumn: function (column) {\n                var that = this, options = that.options, columns = that.columns, index, browser = kendo.support.browser, th, headerTable, isLocked, visibleLocked = that.lockedHeader ? leafDataCells(that.lockedHeader.find('>table>thead')).filter(isCellVisible).length : 0, col;\n                if (typeof column == 'number') {\n                    column = columns[column];\n                } else if (isPlainObject(column)) {\n                    column = grep(columns, function (item) {\n                        return item === column;\n                    })[0];\n                } else {\n                    column = grep(columns, function (item) {\n                        return item.field === column;\n                    })[0];\n                }\n                if (!column || column.hidden) {\n                    return;\n                }\n                index = inArray(column, columns);\n                isLocked = column.locked;\n                if (isLocked) {\n                    headerTable = that.lockedHeader.children('table');\n                } else {\n                    headerTable = that.thead.parent();\n                }\n                th = headerTable.find('[data-index=\\'' + index + '\\']');\n                var contentTable = isLocked ? that.lockedTable : that.table, footer = that.footer || $();\n                if (that.footer && that.lockedContent) {\n                    footer = isLocked ? that.footer.children('.k-grid-footer-locked') : that.footer.children('.k-grid-footer-wrap');\n                }\n                var footerTable = footer.find('table').first();\n                if (that.lockedHeader && visibleLocked >= index && !isLocked) {\n                    index -= visibleLocked;\n                }\n                for (var j = 0; j < columns.length; j++) {\n                    if (columns[j] === column) {\n                        break;\n                    } else {\n                        if (columns[j].hidden) {\n                            index--;\n                        }\n                    }\n                }\n                if (options.scrollable) {\n                    col = headerTable.find('col:not(.k-group-col):not(.k-hierarchy-col):eq(' + index + ')').add(contentTable.children('colgroup').find('col:not(.k-group-col):not(.k-hierarchy-col):eq(' + index + ')')).add(footerTable.find('colgroup').find('col:not(.k-group-col):not(.k-hierarchy-col):eq(' + index + ')'));\n                } else {\n                    col = contentTable.children('colgroup').find('col:not(.k-group-col):not(.k-hierarchy-col):eq(' + index + ')');\n                }\n                var tables = headerTable.add(contentTable).add(footerTable);\n                var oldColumnWidth = outerWidth(th);\n                col.width('');\n                tables.css('table-layout', 'fixed');\n                col.width('auto');\n                tables.addClass('k-autofitting');\n                tables.css('table-layout', '');\n                var newColumnWidth = Math.ceil(Math.max(outerWidth(th), outerWidth(contentTable.find('tr').eq(0).children('td:visible').eq(index)), outerWidth(footerTable.find('tr').eq(0).children('td:visible').eq(index))));\n                col.width(newColumnWidth);\n                column.width = newColumnWidth;\n                if (options.scrollable) {\n                    var cols = headerTable.find('col'), colWidth, totalWidth = 0;\n                    for (var idx = 0, length = cols.length; idx < length; idx += 1) {\n                        colWidth = cols[idx].style.width;\n                        if (colWidth && colWidth.indexOf('%') == -1) {\n                            totalWidth += parseInt(colWidth, 10);\n                        } else {\n                            totalWidth = 0;\n                            break;\n                        }\n                    }\n                    if (totalWidth) {\n                        tables.each(function () {\n                            this.style.width = totalWidth + 'px';\n                        });\n                    }\n                }\n                if (browser.msie && browser.version == 8) {\n                    tables.css('display', 'inline-table');\n                    setTimeout(function () {\n                        tables.css('display', 'table');\n                    }, 1);\n                }\n                tables.removeClass('k-autofitting');\n                that.trigger(COLUMNRESIZE, {\n                    column: column,\n                    oldWidth: oldColumnWidth,\n                    newWidth: newColumnWidth\n                });\n                that._applyLockedContainersWidth();\n                that._syncLockedContentHeight();\n                that._syncLockedHeaderHeight();\n            },\n            _adjustLockedHorizontalScrollBar: function () {\n                var table = this.table, content = table.parent();\n                var scrollbar = table[0].offsetWidth > content[0].clientWidth ? kendo.support.scrollbar() : 0;\n                this.lockedContent.height(content.height() - scrollbar);\n            },\n            _syncLockedContentHeight: function () {\n                if (this.lockedTable) {\n                    if (!this._touchScroller) {\n                        this._adjustLockedHorizontalScrollBar();\n                    }\n                    this._adjustRowsHeight(this.table, this.lockedTable);\n                }\n            },\n            _syncLockedHeaderHeight: function () {\n                if (this.lockedHeader) {\n                    var lockedTable = this.lockedHeader.children('table');\n                    var table = this.thead.parent();\n                    this._adjustRowsHeight(lockedTable, table);\n                    syncTableHeight(lockedTable, table);\n                }\n            },\n            _resizable: function () {\n                if (!this.options.resizable) {\n                    return;\n                }\n                if (this.resizable) {\n                    this.resizable.destroy();\n                }\n                var treelist = this;\n                $(this.lockedHeader).find('thead').add(this.thead).on('mousemove' + NS, 'th', $.proxy(this._positionResizeHandle, this));\n                this.resizable = new kendo.ui.Resizable(this.wrapper, {\n                    handle: '.k-resize-handle',\n                    start: function (e) {\n                        var th = $(e.currentTarget).data('th');\n                        var index = $.inArray(th[0], leafDataCells(th.closest('thead')).filter(':visible'));\n                        var colSelector = 'col:eq(' + index + ')';\n                        var header, contentTable;\n                        treelist.wrapper.addClass('k-grid-column-resizing');\n                        if (treelist.lockedHeader && $.contains(treelist.lockedHeader[0], th[0])) {\n                            header = treelist.lockedHeader;\n                            contentTable = treelist.lockedTable;\n                        } else {\n                            header = treelist.thead.parent();\n                            contentTable = treelist.table;\n                        }\n                        this.col = contentTable.children('colgroup').find(colSelector).add(header.find(colSelector));\n                        this.th = th;\n                        this.startLocation = e.x.location;\n                        this.columnWidth = outerWidth(th);\n                        this.table = this.col.closest('table');\n                        this.totalWidth = this.table.width();\n                    },\n                    resize: function (e) {\n                        var rtlModifier = isRtl ? -1 : 1;\n                        var minColumnWidth = 11;\n                        var delta = e.x.location * rtlModifier - this.startLocation * rtlModifier;\n                        if (this.columnWidth + delta < minColumnWidth) {\n                            delta = minColumnWidth - this.columnWidth;\n                        }\n                        this.table.width(this.totalWidth + delta);\n                        this.col.width(this.columnWidth + delta);\n                    },\n                    resizeend: function () {\n                        treelist.wrapper.removeClass('k-grid-column-resizing');\n                        var field = this.th.attr('data-field');\n                        var column = grep(leafColumns(treelist.columns), function (c) {\n                            return c.field == field;\n                        });\n                        var newWidth = Math.floor(outerWidth(this.th));\n                        column[0].width = newWidth;\n                        treelist._resize();\n                        treelist._syncLockedContentHeight();\n                        treelist._syncLockedHeaderHeight();\n                        treelist.trigger(COLUMNRESIZE, {\n                            column: column,\n                            oldWidth: this.columnWidth,\n                            newWidth: newWidth\n                        });\n                        this.table = this.col = this.th = null;\n                    }\n                });\n            },\n            _sortable: function () {\n                var columns;\n                var column;\n                var sortableInstance;\n                var cells;\n                var cell, idx, length;\n                var sortable = this.options.sortable;\n                var hasMultiColumnHeaders = grep(this.columns, function (item) {\n                    return item.columns !== undefined;\n                }).length > 0;\n                if (!sortable) {\n                    return;\n                }\n                if (hasMultiColumnHeaders) {\n                    if (this.lockedHeader) {\n                        cells = sortCells(leafDataCells(this.lockedHeader.find('>table>thead')).add(leafDataCells(this.thead)));\n                    } else {\n                        cells = leafDataCells(this.thead);\n                    }\n                } else {\n                    cells = $(this.lockedHeader).add(this.thead).find('th');\n                }\n                columns = leafColumns(this.columns);\n                for (idx = 0, length = cells.length; idx < length; idx++) {\n                    column = columns[idx];\n                    if (column.sortable !== false && !column.command && column.field) {\n                        cell = cells.eq(idx);\n                        sortableInstance = cell.data('kendoColumnSorter');\n                        if (sortableInstance) {\n                            sortableInstance.destroy();\n                        }\n                        cell.kendoColumnSorter(extend({}, sortable, column.sortable, { dataSource: this.dataSource }));\n                    }\n                }\n            },\n            _filterable: function () {\n                var cells;\n                var filterable = this.options.filterable;\n                var idx;\n                var length;\n                var columns;\n                var column;\n                var cell;\n                var filterMenuInstance;\n                var hasMultiColumnHeaders = grep(this.columns, function (item) {\n                    return item.columns !== undefined;\n                }).length > 0;\n                if (!filterable || this.options.columnMenu) {\n                    return;\n                }\n                var filterInit = proxy(function (e) {\n                    this.trigger(FILTERMENUINIT, {\n                        field: e.field,\n                        container: e.container\n                    });\n                }, this);\n                var filterOpen = proxy(function (e) {\n                    this.trigger(FILTERMENUOPEN, {\n                        field: e.field,\n                        container: e.container\n                    });\n                }, this);\n                if (hasMultiColumnHeaders) {\n                    if (this.lockedHeader) {\n                        cells = leafDataCells(this.lockedHeader.find('>table>thead')).add(leafDataCells(this.thead));\n                    } else {\n                        cells = leafDataCells(this.thead);\n                    }\n                } else {\n                    cells = $(this.lockedHeader).add(this.thead).find('th');\n                }\n                columns = leafColumns(this.columns);\n                for (idx = 0, length = cells.length; idx < length; idx++) {\n                    column = columns[idx];\n                    cell = cells.eq(idx);\n                    filterMenuInstance = cell.data('kendoFilterMenu');\n                    if (filterMenuInstance) {\n                        filterMenuInstance.destroy();\n                    }\n                    if (column.command || column.filterable === false) {\n                        continue;\n                    }\n                    cell.kendoFilterMenu(extend(true, {}, filterable, column.filterable, {\n                        dataSource: this.dataSource,\n                        init: filterInit,\n                        open: filterOpen\n                    }));\n                }\n            },\n            _change: function () {\n                this.trigger(CHANGE);\n            },\n            _isLocked: function () {\n                return this.lockedHeader !== null;\n            },\n            _selectable: function () {\n                var that = this;\n                var selectable = this.options.selectable;\n                var filter;\n                var element = this.table;\n                var useAllItems;\n                var isLocked = that._isLocked();\n                var multi;\n                var cell;\n                if (selectable) {\n                    selectable = kendo.ui.Selectable.parseOptions(selectable);\n                    if (this._hasLockedColumns) {\n                        element = element.add(this.lockedTable);\n                        useAllItems = selectable.multiple && selectable.cell;\n                    }\n                    filter = '>tbody>tr:not(.k-footer-template)';\n                    if (selectable.cell) {\n                        filter = filter + '>td';\n                    }\n                    this.selectable = new kendo.ui.Selectable(element, {\n                        filter: filter,\n                        aria: true,\n                        multiple: selectable.multiple,\n                        inputSelectors: '.k-icon.k-i-collapse,.k-icon.k-i-expand',\n                        change: proxy(this._change, this),\n                        useAllItems: useAllItems,\n                        continuousItems: proxy(this._continuousItems, this, filter, selectable.cell),\n                        relatedTarget: !selectable.cell && this._hasLockedColumns ? proxy(this._selectableTarget, this) : undefined\n                    });\n                    if (that.options.navigatable) {\n                        multi = selectable.multiple;\n                        cell = selectable.cell;\n                        element.on('keydown' + NS, function (e) {\n                            var current = that.current();\n                            var target = e.target;\n                            if (e.keyCode === keys.SPACEBAR && !e.shiftKey && $.inArray(target, element) > -1 && !current.is('.k-header')) {\n                                e.preventDefault();\n                                e.stopPropagation();\n                                current = cell ? current : current.parent();\n                                if (isLocked && !cell) {\n                                    current = current.add(that._relatedRow(current));\n                                }\n                                if (multi) {\n                                    if (!e.ctrlKey) {\n                                        that.selectable.clear();\n                                    } else {\n                                        if (current.hasClass(classNames.selected)) {\n                                            current.removeClass(classNames.selected);\n                                            that.trigger(CHANGE);\n                                            return;\n                                        }\n                                    }\n                                } else {\n                                    that.selectable.clear();\n                                }\n                                if (!cell) {\n                                    that.selectable._lastActive = current;\n                                }\n                                that.selectable.value(current);\n                            } else if (!cell && (e.shiftKey && e.keyCode == keys.LEFT || e.shiftKey && e.keyCode == keys.RIGHT || e.shiftKey && e.keyCode == keys.UP || e.shiftKey && e.keyCode == keys.DOWN || e.keyCode === keys.SPACEBAR && e.shiftKey)) {\n                                e.preventDefault();\n                                e.stopPropagation();\n                                current = current.parent();\n                                if (isLocked) {\n                                    current = current.add(that._relatedRow(current));\n                                }\n                                if (multi) {\n                                    if (!that.selectable._lastActive) {\n                                        that.selectable._lastActive = current;\n                                    }\n                                    that.selectable.selectRange(that.selectable._firstSelectee(), current);\n                                } else {\n                                    that.selectable.clear();\n                                    that.selectable.value(current);\n                                }\n                            }\n                        });\n                    }\n                }\n            },\n            _continuousItems: function (filter, cell) {\n                if (!this.lockedContent) {\n                    return;\n                }\n                var lockedItems = $(filter, this.lockedTable);\n                var nonLockedItems = $(filter, this.table);\n                var columns = cell ? lockedColumns(this.columns).length : 1;\n                var nonLockedColumns = cell ? this.columns.length - columns : 1;\n                var result = [];\n                for (var idx = 0; idx < lockedItems.length; idx += columns) {\n                    push.apply(result, lockedItems.slice(idx, idx + columns));\n                    push.apply(result, nonLockedItems.splice(0, nonLockedColumns));\n                }\n                return result;\n            },\n            _selectableTarget: function (items) {\n                var related;\n                var result = $();\n                for (var idx = 0, length = items.length; idx < length; idx++) {\n                    related = this._relatedRow(items[idx]);\n                    if (inArray(related[0], items) < 0) {\n                        result = result.add(related);\n                    }\n                }\n                return result;\n            },\n            _relatedRow: function (row) {\n                var lockedTable = this.lockedTable;\n                row = $(row);\n                if (!lockedTable) {\n                    return row;\n                }\n                var table = row.closest(this.table.add(this.lockedTable));\n                var index = table.find('>tbody>tr').index(row);\n                table = table[0] === this.table[0] ? lockedTable : this.table;\n                return table.find('>tbody>tr').eq(index);\n            },\n            select: function (value) {\n                var selectable = this.selectable;\n                if (!selectable) {\n                    return $();\n                }\n                if (typeof value !== 'undefined') {\n                    if (!selectable.options.multiple) {\n                        selectable.clear();\n                        value = value.first();\n                    }\n                    if (this._hasLockedColumns) {\n                        value = value.add($.map(value, proxy(this._relatedRow, this)));\n                    }\n                }\n                return selectable.value(value);\n            },\n            clearSelection: function () {\n                var selected = this.select();\n                if (selected.length) {\n                    this.selectable.clear();\n                    this.trigger(CHANGE);\n                }\n            },\n            _dataSource: function (dataSource) {\n                var that = this;\n                var ds = this.dataSource;\n                var pageable = that.options.pageable;\n                if (ds) {\n                    ds.unbind(CHANGE, this._refreshHandler);\n                    ds.unbind(ERROR, this._errorHandler);\n                    ds.unbind(PROGRESS, this._progressHandler);\n                }\n                this._refreshHandler = proxy(this.refresh, this);\n                this._errorHandler = proxy(this._error, this);\n                this._progressHandler = proxy(this._progress, this);\n                if (isPlainObject(dataSource)) {\n                    extend(dataSource, {\n                        table: that.table,\n                        fields: that.columns\n                    });\n                    if (isPlainObject(pageable) && pageable.pageSize !== undefined) {\n                        dataSource.pageSize = pageable.pageSize;\n                    }\n                }\n                ds = this.dataSource = TreeListDataSource.create(dataSource);\n                if (pageable) {\n                    ds._collapsedTotal = undefined;\n                }\n                ds.bind(CHANGE, this._refreshHandler);\n                ds.bind(ERROR, this._errorHandler);\n                ds.bind(PROGRESS, this._progressHandler);\n                this._dataSourceFetchProxy = proxy(function () {\n                    this.dataSource.fetch();\n                }, this);\n            },\n            setDataSource: function (dataSource) {\n                this._dataSource(dataSource);\n                this._sortable();\n                this._filterable();\n                this._columnMenu();\n                this._pageable();\n                this._contentTree.render([]);\n                if (this.options.autoBind) {\n                    this.dataSource.fetch();\n                }\n            },\n            dataItem: function (element) {\n                if (element instanceof TreeListModel) {\n                    return element;\n                }\n                var row = $(element).closest('tr');\n                var uid = row.attr(kendo.attr('uid'));\n                var model = isUndefined(uid) ? null : this.dataSource.getByUid(uid);\n                return model;\n            },\n            editRow: function (row) {\n                var that = this;\n                var model;\n                if (this._isIncellEditable() || !this.options.editable) {\n                    return;\n                }\n                if (typeof row === STRING) {\n                    row = this.tbody.find(row);\n                }\n                if (that._isPageable() && that._isPopupEditable() && row instanceof TreeListModel) {\n                    model = row;\n                } else {\n                    model = this.dataItem(row);\n                }\n                if (!model) {\n                    return;\n                }\n                if (this._editMode() != 'popup') {\n                    model._edit = true;\n                }\n                this._cancelEditor();\n                if (this.trigger(BEFORE_EDIT, { model: model })) {\n                    that.dataSource._restorePageSizeAfterAddChild();\n                    return;\n                }\n                this._render();\n                this._createEditor(model);\n                this.trigger(EDIT, {\n                    container: this.editor.wrapper,\n                    model: model\n                });\n            },\n            _cancelEdit: function (e) {\n                if (!this.editor) {\n                    return;\n                }\n                var currentIndex;\n                e = extend(e, {\n                    container: this.editor.wrapper,\n                    model: this.editor.model\n                });\n                if (this.trigger(CANCEL, e)) {\n                    return;\n                }\n                if (this.options.navigatable) {\n                    currentIndex = this.items().index($(this.current()).parent());\n                }\n                this.cancelRow();\n                if (this.options.navigatable) {\n                    this.current(this.items().eq(currentIndex).children().filter(NAVCELL).first());\n                    focusTable(this.table, true);\n                }\n            },\n            cancelRow: function () {\n                if (this._isIncellEditable()) {\n                    return;\n                }\n                this._cancelEditor();\n                this._render();\n            },\n            saveRow: function () {\n                var editor = this.editor;\n                var args;\n                if (this._isIncellEditable()) {\n                    return;\n                }\n                if (!editor) {\n                    return;\n                }\n                args = {\n                    model: editor.model,\n                    container: editor.wrapper\n                };\n                if (editor.end() && !this.trigger(SAVE, args)) {\n                    this.dataSource.sync();\n                }\n            },\n            addRow: function (parent) {\n                var that = this;\n                var dataSource = that.dataSource;\n                var pageable = that._isPageable();\n                var incellEditing = that._isIncellEditable();\n                var inlineEditing = that._isInlineEditable();\n                var editor = this.editor;\n                var index = 0;\n                var model = {};\n                if (editor && !editor.end() || !this.options.editable) {\n                    return;\n                }\n                if (parent) {\n                    if (!(parent instanceof TreeListModel)) {\n                        parent = this.dataItem(parent);\n                    }\n                    model[parent.parentIdField] = parent.id;\n                    index = this.dataSource.indexOf(parent) + 1;\n                    this.expand(parent).then(function () {\n                        var showNewModelInView = pageable && dataSource._isLastItemInView(parent) && (incellEditing || inlineEditing);\n                        that._insertAt(model, index, showNewModelInView);\n                    });\n                    return;\n                }\n                this._insertAt(model, index);\n            },\n            _insertAt: function (model, index, showNewModelInView) {\n                var that = this;\n                var dataSource = that.dataSource;\n                model = that.dataSource.insert(index, model);\n                if (showNewModelInView) {\n                    dataSource._setAddChildPageSize();\n                }\n                var row = this._itemFor(model);\n                var cell;\n                if (that._isIncellEditable()) {\n                    cell = row.children('td').eq(that._firstEditableColumnIndex(row));\n                    that.editCell(cell);\n                } else if (row && row[0]) {\n                    that.editRow(row);\n                } else if (that._isPageable() && that._isPopupEditable()) {\n                    that.editRow(model);\n                }\n            },\n            _firstEditableColumnIndex: function (container) {\n                var that = this;\n                var model = that.dataItem(container);\n                var columns = leafColumns(that.columns);\n                var length = columns.length;\n                var column;\n                var idx;\n                for (idx = 0; idx < length; idx++) {\n                    column = columns[idx];\n                    if (model && (!model.editable || model.editable(column.field)) && !column.command && column.field && column.hidden !== true) {\n                        return idx;\n                    }\n                }\n                return -1;\n            },\n            removeRow: function (row) {\n                var model = this.dataItem(row);\n                var args = {\n                    model: model,\n                    row: row\n                };\n                if (this.options.editable && model && !this.trigger(REMOVE, args)) {\n                    if (document.activeElement === $(row).find('.k-grid-delete')[0]) {\n                        $(row).find('.k-grid-delete').blur();\n                    }\n                    this.dataSource.remove(model);\n                    if (!this._isIncellEditable()) {\n                        this.dataSource.sync();\n                    }\n                }\n            },\n            _cancelEditor: function () {\n                var that = this;\n                var model;\n                var editor = that.editor;\n                if (editor) {\n                    model = editor.model;\n                    that._destroyEditor();\n                    if (!that._isIncellEditable()) {\n                        that.dataSource.cancelChanges(model);\n                    } else if (that._shouldRestorePageSize()) {\n                        that.dataSource._restorePageSizeAfterAddChild();\n                    }\n                    model._edit = false;\n                }\n                that._preventPageSizeRestore = false;\n            },\n            _shouldRestorePageSize: function () {\n                var that = this;\n                return that._isPageable() && that._isIncellEditable() && !that._preventPageSizeRestore;\n            },\n            _destroyEditor: function () {\n                if (!this.editor) {\n                    return;\n                }\n                this.editor.close();\n                this.editor = null;\n            },\n            _createEditor: function (model) {\n                var row = this.itemFor(model);\n                var columns = leafColumns(this.columns);\n                var leafCols = [];\n                for (var idx = 0; idx < columns.length; idx++) {\n                    leafCols.push(extend({}, columns[idx]));\n                    delete leafCols[idx].parentColumn;\n                }\n                row = row.add(this._relatedRow(row));\n                var mode = this._editMode();\n                var options = {\n                    columns: leafCols,\n                    model: model,\n                    target: this,\n                    clearContainer: false,\n                    template: this.options.editable.template\n                };\n                if (mode == 'inline') {\n                    this.editor = new Editor(row, options);\n                } else {\n                    extend(options, {\n                        window: this.options.editable.window,\n                        commandRenderer: proxy(function () {\n                            return this._buildCommands([\n                                'update',\n                                'canceledit'\n                            ]);\n                        }, this),\n                        fieldRenderer: proxy(this._cellContent, this),\n                        save: proxy(this.saveRow, this),\n                        cancel: proxy(this._cancelEdit, this),\n                        appendTo: this.wrapper\n                    });\n                    this.editor = new PopupEditor(row, options);\n                }\n            },\n            _createIncellEditor: function (cell, options) {\n                var that = this;\n                var column = extend({}, options.columns[0]);\n                delete column.parentColumn;\n                return new IncellEditor(cell, extend({}, {\n                    fieldRenderer: proxy(that._cellContent, that),\n                    appendTo: that.wrapper,\n                    clearContainer: false,\n                    target: that,\n                    columns: [column],\n                    model: options.model,\n                    change: options.change\n                }));\n            },\n            editCell: function (cell) {\n                var that = this;\n                cell = $(cell);\n                var column = leafColumns(that.columns)[that.cellIndex(cell)];\n                var model = that.dataItem(cell);\n                if (that._isIncellEditable() && model && isColumnEditable(column, model)) {\n                    that._editCell(cell, column, model);\n                }\n            },\n            _editCell: function (cell, column, model) {\n                var that = this;\n                var editedCell;\n                if (that.trigger(BEFORE_EDIT, { model: model })) {\n                    that.dataSource._restorePageSizeAfterAddChild();\n                    return;\n                }\n                that.closeCell();\n                model._edit = true;\n                that._cancelEditor();\n                that._render({\n                    editedColumn: column,\n                    editedColumnIndex: cell.index()\n                });\n                editedCell = that.table.add(that.lockedTable).find(DOT + classNames.editCell).first();\n                that.editor = that._createIncellEditor(editedCell, {\n                    columns: [column],\n                    model: model,\n                    change: function (e) {\n                        if (that.trigger(SAVE, {\n                                values: e.values,\n                                container: cell,\n                                model: model\n                            })) {\n                            e.preventDefault();\n                        }\n                    }\n                });\n                that._current = editedCell;\n                that.trigger(EDIT, {\n                    container: cell,\n                    model: model\n                });\n            },\n            closeCell: function (isCancel) {\n                var that = this;\n                var cell = (that.editor || {}).element;\n                var tr;\n                var model;\n                if (!cell || !cell[0] || !that._isIncellEditable()) {\n                    return;\n                }\n                model = that.dataItem(cell);\n                if (isCancel && that.trigger(CANCEL, {\n                        container: cell,\n                        model: model\n                    })) {\n                    return;\n                }\n                that.trigger(CELL_CLOSE, {\n                    type: isCancel ? CANCEL : SAVE,\n                    model: model,\n                    container: cell\n                });\n                that._cancelEditor();\n                cell.removeClass(classNames.editCell);\n                tr = cell.parent().removeClass(classNames.editRow);\n                if (that.lockedContent) {\n                    that._relatedRow(tr).removeClass(classNames.editRow);\n                }\n                that._render();\n                that.trigger(ITEM_CHANGE, {\n                    item: tr,\n                    data: model,\n                    ns: ui\n                });\n                if (that.lockedContent) {\n                    adjustRowHeight(tr.css('height', '')[0], that._relatedRow(tr).css('height', '')[0]);\n                }\n            },\n            cancelChanges: function () {\n                this.dataSource.cancelChanges();\n            },\n            saveChanges: function () {\n                var that = this;\n                var editable = (that.editor || {}).editable;\n                var valid = editable && editable.end();\n                if ((valid || !editable) && !that.trigger(SAVE_CHANGES)) {\n                    that.dataSource.sync();\n                }\n            },\n            _editMode: function () {\n                var mode = 'inline', editable = this.options.editable;\n                if (editable !== true) {\n                    if (typeof editable == 'string') {\n                        mode = editable;\n                    } else {\n                        mode = editable.mode || mode;\n                    }\n                }\n                return mode.toLowerCase();\n            },\n            _isIncellEditable: function () {\n                return this._editMode() === INCELL;\n            },\n            _isInlineEditable: function () {\n                return this._editMode() === INLINE;\n            },\n            _isPopupEditable: function () {\n                return this._editMode() === POPUP;\n            },\n            hideColumn: function (column) {\n                this._toggleColumnVisibility(column, true);\n            },\n            showColumn: function (column) {\n                this._toggleColumnVisibility(column, false);\n            },\n            _toggleColumnVisibility: function (column, hidden) {\n                column = this._findColumn(column);\n                if (!column || column.hidden === hidden) {\n                    return;\n                }\n                column.hidden = hidden;\n                this._setParentsVisibility(column, !hidden);\n                this._ensureExpandableColumn();\n                this._renderCols();\n                this._renderHeader();\n                this._render();\n                this._adjustTablesWidth();\n                this.trigger(hidden ? COLUMNHIDE : COLUMNSHOW, { column: column });\n                if (!hidden && !column.width) {\n                    this.table.add(this.thead.closest('table')).width('');\n                }\n                this._updateFirstColumnClass();\n            },\n            _findColumn: function (column) {\n                if (typeof column == 'number') {\n                    column = this.columns[column];\n                } else if (isPlainObject(column)) {\n                    column = grep(leafColumns(this.columns), function (item) {\n                        return item === column;\n                    })[0];\n                } else {\n                    column = grep(leafColumns(this.columns), function (item) {\n                        return item.field === column;\n                    })[0];\n                }\n                return column;\n            },\n            _adjustTablesWidth: function () {\n                var idx, length;\n                var cols = this.thead.prev().children();\n                var colWidth, width = 0;\n                for (idx = 0, length = cols.length; idx < length; idx++) {\n                    colWidth = cols[idx].style.width;\n                    if (colWidth && colWidth.indexOf('%') == -1) {\n                        width += parseInt(colWidth, 10);\n                    } else {\n                        width = 0;\n                        break;\n                    }\n                }\n                if (width) {\n                    this.table.add(this.thead.closest('table')).width(width);\n                }\n            },\n            _reorderable: function () {\n                if (!this.options.reorderable) {\n                    return;\n                }\n                var scrollable = this.options.scrollable === true;\n                var selector = (scrollable ? '.k-grid-header:first ' : 'table:first>.k-grid-header ') + HEADERCELLS;\n                var that = this;\n                this._draggableInstance = new ui.Draggable(this.wrapper, {\n                    group: kendo.guid(),\n                    filter: selector,\n                    hint: function (target) {\n                        return $('<div class=\"k-header k-reorder-clue k-drag-clue\" />').html(target.attr(kendo.attr('title')) || target.attr(kendo.attr('field')) || target.text()).prepend('<span class=\"k-icon k-drag-status k-i-cancel\" />');\n                    }\n                });\n                this.reorderable = new ui.Reorderable(this.wrapper, {\n                    draggable: this._draggableInstance,\n                    dragOverContainers: proxy(this._allowDragOverContainers, this),\n                    inSameContainer: function (e) {\n                        return $(e.source).parent()[0] === $(e.target).parent()[0] && targetParentContainerIndex(flatColumnsInDomOrder(that.columns), that.columns, e.sourceIndex, e.targetIndex) > -1;\n                    },\n                    change: function (e) {\n                        var columns = flatColumnsInDomOrder(that.columns);\n                        var column = columns[e.oldIndex];\n                        var newIndex = targetParentContainerIndex(columns, that.columns, e.oldIndex, e.newIndex);\n                        that.trigger(COLUMNREORDER, {\n                            newIndex: newIndex,\n                            oldIndex: inArray(column, columns),\n                            column: column\n                        });\n                        that.reorderColumn(newIndex, column, e.position === 'before');\n                    }\n                });\n            },\n            _allowDragOverContainers: function (sourceIndex, targetIndex) {\n                var columns = flatColumnsInDomOrder(this.columns);\n                return columns[sourceIndex].lockable !== false && targetParentContainerIndex(columns, this.columns, sourceIndex, targetIndex) > -1;\n            },\n            _reorderTrees: function (destSources, destContainer, destDomTree, sources, sourcesContainer, sourcesDomTree, before, depth) {\n                var ths = $();\n                var source = sourcesContainer.find('tr:eq(' + sources[0].rowIndex + ')');\n                var sourceDOM = sourcesDomTree.children[sources[0].rowIndex];\n                var sourceChildren = source.children();\n                var destDomChildren;\n                var currentIndex;\n                var destColumn = before ? destSources[0] : destSources[destSources.length - 1];\n                var destRow;\n                var sourcesLeafs;\n                var destLeafs;\n                var reorderTaget;\n                var destThs;\n                for (var idx = 0; idx < sources.length; idx++) {\n                    currentIndex = sources[idx].cellIndex;\n                    ths = ths.add(sourceChildren.eq(currentIndex));\n                    destDomChildren = destDomTree.children[destColumn.rowIndex].children;\n                    if (destDomTree === sourcesDomTree && before) {\n                        currentIndex += idx;\n                    }\n                    destDomChildren.splice(before ? destColumn.cellIndex + idx : destColumn.cellIndex + 1 + idx, 0, sourceDOM.children[currentIndex]);\n                }\n                if (destDomTree === sourcesDomTree && before) {\n                    sourceDOM.children.splice(sources[0].cellIndex + sources.length, sources.length);\n                } else {\n                    sourceDOM.children.splice(sources[0].cellIndex, sources.length);\n                }\n                destRow = destContainer.find('tr:eq(' + destColumn.rowIndex + ')');\n                destThs = destRow.find('>th.k-header:eq(' + destColumn.cellIndex + ')');\n                if (destThs.length && ths[0] !== destThs[0]) {\n                    ths[before ? 'insertBefore' : 'insertAfter'](destThs);\n                }\n                if (depth >= sources[0].rowIndex + 1 && depth != 1) {\n                    sourcesLeafs = [];\n                    for (idx = 0; idx < sources.length; idx++) {\n                        if (sources[idx].columns) {\n                            sourcesLeafs = sourcesLeafs.concat(sources[idx].columns);\n                        }\n                    }\n                    if (!sourcesLeafs.length) {\n                        return;\n                    }\n                    destLeafs = [];\n                    for (idx = 0; idx < destSources.length; idx++) {\n                        if (destSources[idx].columns) {\n                            destLeafs = destLeafs.concat(destSources[idx].columns);\n                        }\n                    }\n                    if (!destLeafs.length && (destContainer !== sourcesContainer || (destColumn.cellIndex - sources[0].cellIndex > 1 || sources[0].cellIndex - destColumn.cellIndex > 1))) {\n                        reorderTaget = findReorderTarget(this.columns, destColumn, sources[0], before, this.columns);\n                        destLeafs = [reorderTaget];\n                        if (!reorderTaget && sourcesLeafs.length && destContainer.find('tr').length > sources[0].rowIndex + 1) {\n                            this._insertTree(sourcesLeafs, sourcesContainer, sourcesDomTree, destContainer, destDomTree);\n                            return;\n                        }\n                    }\n                    if (!destLeafs.length) {\n                        return;\n                    }\n                    this._reorderTrees(destLeafs, destContainer, destDomTree, sourcesLeafs, sourcesContainer, sourcesDomTree, before, depth);\n                }\n            },\n            _insertTree: function (columns, sourcesContainer, sourcesDomTree, destContainer, destDomTree) {\n                var leafs = [];\n                var row;\n                var ths = $();\n                var domTr;\n                row = sourcesContainer.find('tr:eq(' + columns[0].rowIndex + ')');\n                domTr = sourcesDomTree.children[columns[0].rowIndex];\n                for (var idx = 0; idx < columns.length; idx++) {\n                    if (columns[idx].columns) {\n                        leafs = leafs.concat(columns[idx].columns);\n                    }\n                    destDomTree.children[columns[0].rowIndex].children.splice(idx, 0, domTr.children[columns[idx].rowIndex]);\n                    ths = ths.add(row.find('>th.k-header:eq(' + columns[idx].cellIndex + ')'));\n                }\n                sourcesDomTree.children[columns[0].rowIndex].children.splice(columns[0].cellIndex, columns.length);\n                destContainer.find('tr:eq(' + columns[0].rowIndex + ')').append(ths);\n                if (leafs.length) {\n                    this._insertTree(leafs, sourcesContainer, sourcesDomTree, destContainer, destDomTree);\n                }\n            },\n            _reorderHeader: function (destColumn, column, before) {\n                var sourcesDepth = column.columns ? depth([column]) : 1;\n                var targetDepth = destColumn.columns ? depth([destColumn]) : 1;\n                var sourceLocked = isLocked(column);\n                var destLocked = isLocked(destColumn);\n                var destContainer = destLocked ? this.lockedHeader : this.thead;\n                var sourcesContainer = sourceLocked ? this.lockedHeader : this.thead;\n                var destDomTree = destLocked ? this._lockedHeaderTree : this._headerTree;\n                var sourcesDomTree = sourceLocked ? this._lockedHeaderTree : this._headerTree;\n                var rowsToAdd;\n                var destRows = destContainer.find('tr');\n                if (sourcesDepth === targetDepth || sourcesDepth < destRows.length) {\n                    this._reorderTrees([destColumn], destContainer, destDomTree, [column], sourcesContainer, sourcesDomTree, before, sourcesDepth);\n                    updateRowSpans(destContainer, destDomTree);\n                    removeEmptyRows(sourcesContainer, sourcesDomTree);\n                } else {\n                    if (destContainer !== sourcesContainer) {\n                        rowsToAdd = sourcesDepth - destRows.length;\n                        destRows.each(function (idx) {\n                            var cells = this.cells;\n                            for (var i = 0; i < cells.length; i++) {\n                                if (cells[i].colSpan <= 1 && cells[i].attributes.rowspan) {\n                                    destDomTree.children[idx].children[i].attr.rowSpan += rowsToAdd;\n                                    cells[i].rowSpan += rowsToAdd;\n                                }\n                            }\n                        });\n                        for (var j = 0; j < rowsToAdd; j++) {\n                            destDomTree.children.push(kendoDomElement('tr', { 'role': 'row' }));\n                            if (destContainer.is('thead')) {\n                                destContainer.append('<tr role=\\'row\\'></tr>');\n                            } else {\n                                destContainer.find('thead').append('<tr role=\\'row\\'></tr>');\n                            }\n                        }\n                    }\n                    this._reorderTrees([destColumn], destContainer, destDomTree, [column], sourcesContainer, sourcesDomTree, before, sourcesDepth);\n                    removeEmptyRows(sourcesContainer, sourcesDomTree);\n                }\n            },\n            reorderColumn: function (destIndex, column, before) {\n                var lockChanged;\n                var parent = column.parentColumn;\n                var columns = parent ? parent.columns : this.columns;\n                var sourceIndex = inArray(column, columns);\n                var destColumn = columns[destIndex];\n                var isLocked = !!destColumn.locked;\n                var hasMultiColumnHeaders = grep(this.columns, function (item) {\n                    return item.columns !== undefined;\n                }).length > 0;\n                var nonLockedColumnsLength = nonLockedColumns(columns).length;\n                if (sourceIndex === destIndex) {\n                    return;\n                }\n                if (isLocked && !column.locked && nonLockedColumnsLength == 1) {\n                    return;\n                }\n                if (!isLocked && column.locked && columns.length - nonLockedColumnsLength == 1) {\n                    return;\n                }\n                if (before === undefined) {\n                    before = destIndex < sourceIndex;\n                }\n                if (hasMultiColumnHeaders) {\n                    this._reorderHeader(destColumn, column, before);\n                }\n                lockChanged = !!column.locked;\n                lockChanged = lockChanged != isLocked;\n                column.locked = isLocked;\n                columns.splice(before ? destIndex : destIndex + 1, 0, column);\n                columns.splice(sourceIndex < destIndex ? sourceIndex : sourceIndex + 1, 1);\n                this._setColumnDataIndexes(leafColumns(this.columns));\n                this._clearColsCache();\n                this._renderCols();\n                if (!hasMultiColumnHeaders) {\n                    var ths = $(this.lockedHeader).add(this.thead).find('th');\n                    ths.eq(sourceIndex)[before ? 'insertBefore' : 'insertAfter'](ths.eq(destIndex));\n                    var dom = this._headerTree.children[0].children;\n                    if (this._hasLockedColumns) {\n                        dom = this._lockedHeaderTree.children[0].children.concat(dom);\n                    }\n                    dom.splice(before ? destIndex : destIndex + 1, 0, dom[sourceIndex]);\n                    dom.splice(sourceIndex < destIndex ? sourceIndex : sourceIndex + 1, 1);\n                    if (this._hasLockedColumns) {\n                        this._lockedHeaderTree.children[0].children = dom.splice(0, lockedColumns(columns).length);\n                        this._headerTree.children[0].children = dom;\n                    }\n                } else {\n                    if (this.lockedHeader) {\n                        columns = nonLockedColumns(this.columns);\n                        this._prepareColumns([{\n                                rowSpan: 1,\n                                cells: [],\n                                index: 0\n                            }], columns);\n                        columns = lockedColumns(this.columns);\n                        this._prepareColumns([{\n                                rowSpan: 1,\n                                cells: [],\n                                index: 0\n                            }], columns);\n                    } else {\n                        this._prepareColumns([{\n                                rowSpan: 1,\n                                cells: [],\n                                index: 0\n                            }], this.columns);\n                    }\n                }\n                this._updateColumnCellIndex();\n                this._applyLockedContainersWidth();\n                this._syncLockedHeaderHeight();\n                this._updateFirstColumnClass();\n                this.refresh();\n                if (!lockChanged) {\n                    return;\n                }\n                if (isLocked) {\n                    this.trigger(COLUMNLOCK, { column: column });\n                } else {\n                    this.trigger(COLUMNUNLOCK, { column: column });\n                }\n            },\n            lockColumn: function (column) {\n                var columns = this.columns;\n                if (typeof column == 'number') {\n                    column = columns[column];\n                } else {\n                    column = grep(columns, function (item) {\n                        return item.field === column;\n                    })[0];\n                }\n                if (!column || column.hidden) {\n                    return;\n                }\n                var index = lockedColumns(columns).length - 1;\n                this.reorderColumn(index, column, false);\n            },\n            unlockColumn: function (column) {\n                var columns = this.columns;\n                if (typeof column == 'number') {\n                    column = columns[column];\n                } else {\n                    column = grep(columns, function (item) {\n                        return item.field === column;\n                    })[0];\n                }\n                if (!column || column.hidden) {\n                    return;\n                }\n                var index = lockedColumns(columns).length;\n                this.reorderColumn(index, column, true);\n            },\n            _columnMenu: function () {\n                var ths = $(this.lockedHeader).add(this.thead).find('th');\n                var columns = this.columns;\n                var options = this.options;\n                var columnMenu = options.columnMenu;\n                var column, menu, menuOptions, sortable, filterable;\n                var initHandler = proxy(this._columnMenuInit, this);\n                var openHandler = proxy(this._columnMenuOpen, this);\n                var lockedColumnsLength = lockedColumns(columns).length;\n                var hasMultiColumnHeaders = grep(this.columns, function (item) {\n                    return item.columns !== undefined;\n                }).length > 0;\n                if (hasMultiColumnHeaders) {\n                    columns = leafColumns(columns);\n                    if (this.lockedHeader) {\n                        ths = sortCells(leafDataCells(this.lockedHeader.find('>table>thead')).add(leafDataCells(this.thead)));\n                    } else {\n                        ths = leafDataCells(this.thead);\n                    }\n                } else {\n                    ths = $(this.lockedHeader).add(this.thead).find('th');\n                }\n                if (!columnMenu) {\n                    return;\n                }\n                if (typeof columnMenu == 'boolean') {\n                    columnMenu = {};\n                }\n                for (var i = 0; i < ths.length; i++) {\n                    column = columns[i];\n                    if (!column.field) {\n                        continue;\n                    }\n                    menu = ths.eq(i).data('kendoColumnMenu');\n                    if (menu) {\n                        menu.destroy();\n                    }\n                    sortable = false;\n                    if (column.sortable !== false && columnMenu.sortable !== false && options.sortable !== false) {\n                        sortable = extend({}, options.sortable, { compare: (column.sortable || {}).compare });\n                    }\n                    filterable = false;\n                    if (options.filterable && column.filterable !== false && columnMenu.filterable !== false) {\n                        filterable = extend({ pane: this.pane }, column.filterable, options.filterable);\n                    }\n                    menuOptions = {\n                        dataSource: this.dataSource,\n                        values: column.values,\n                        columns: columnMenu.columns,\n                        sortable: sortable,\n                        filterable: filterable,\n                        messages: columnMenu.messages,\n                        owner: this,\n                        closeCallback: $.noop,\n                        init: initHandler,\n                        open: openHandler,\n                        pane: this.pane,\n                        lockedColumns: !hasMultiColumnHeaders && column.lockable !== false && lockedColumnsLength > 0\n                    };\n                    if (options.$angular) {\n                        menuOptions.$angular = options.$angular;\n                    }\n                    ths.eq(i).kendoColumnMenu(menuOptions);\n                }\n            },\n            _columnMenuInit: function (e) {\n                this.trigger(COLUMNMENUINIT, {\n                    field: e.field,\n                    container: e.container\n                });\n            },\n            _pageable: function () {\n                var that = this, wrapper, pageable = that.options.pageable;\n                if (pageable) {\n                    wrapper = that.wrapper.children('div.k-grid-pager');\n                    if (!wrapper.length) {\n                        wrapper = $('<div class=\"k-pager-wrap k-grid-pager\"/>').appendTo(that.wrapper);\n                    }\n                    that._destroyPager();\n                    if (typeof pageable === 'object' && pageable instanceof kendo.ui.TreeListPager) {\n                        that.pager = pageable;\n                    } else if (that.dataSource && !that.dataSource.options.serverPaging) {\n                        that._createPager(wrapper);\n                    }\n                    if (that.pager) {\n                        that.pager.bind(PAGE_CHANGE, function (e) {\n                            if (that.trigger(PAGE, { page: e.index })) {\n                                e.preventDefault();\n                            }\n                        });\n                    }\n                }\n            },\n            _createPager: function (element, options) {\n                var that = this;\n                that.pager = new TreeListPager(element, extend({}, that.options.pageable, { dataSource: that.dataSource }, options));\n            },\n            _destroyPager: function () {\n                if (this.pager) {\n                    this.pager.destroy();\n                }\n            },\n            _isPageable: function () {\n                var that = this;\n                return that.options.pageable && (!that.dataSource || that.dataSource && that.dataSource._isPageable());\n            },\n            _togglePagerVisibility: function () {\n                var that = this;\n                var pageable = that.options.pageable;\n                if (pageable && (isPlainObject(pageable) || pageable instanceof TreeListPager) && pageable.alwaysVisible === false) {\n                    that.wrapper.find('.k-grid-pager').toggle((that.dataSource.collapsedTotal() || 0) >= that.dataSource.pageSize());\n                }\n            }\n        });\n        function isInputElement(element) {\n            return $(element).is(':button,a,:input,a>.k-icon,textarea,span.k-select,span.k-icon,span.k-link,.k-input,.k-multiselect-wrap,.k-tool-icon');\n        }\n        function isLocked(column) {\n            if (!column.parentColumn) {\n                return !!column.locked;\n            }\n            return !!isLocked(column.parentColumn);\n        }\n        function findParentColumnWithChildren(columns, index, source, rtl) {\n            var target;\n            var locked = !!source.locked;\n            var targetLocked;\n            do {\n                target = columns[index];\n                index += rtl ? 1 : -1;\n                targetLocked = !!target.locked;\n            } while (target && index > -1 && index < columns.length && target != source && !target.columns && targetLocked === locked);\n            return target;\n        }\n        function findReorderTarget(columns, target, source, before, masterColumns) {\n            if (target.columns) {\n                target = target.columns;\n                return target[before ? 0 : target.length - 1];\n            } else {\n                var parent = columnParent(target, columns);\n                var parentColumns;\n                if (parent) {\n                    parentColumns = parent.columns;\n                } else {\n                    parentColumns = columns;\n                }\n                var index = inArray(target, parentColumns);\n                if (index === 0 && before && parentColumns.length !== 1) {\n                    index++;\n                } else if (index == parentColumns.length - 1 && !before && index !== 0) {\n                    index--;\n                } else if (index > 0 || index === 0 && !before && index !== 0) {\n                    index += before ? -1 : 1;\n                }\n                var sourceIndex = inArray(source, parentColumns);\n                target = findParentColumnWithChildren(parentColumns, index, source, sourceIndex > index);\n                var targetIndex = inArray(target, masterColumns);\n                if (target.columns && (!targetIndex || targetIndex === parentColumns.length - 1)) {\n                    return null;\n                }\n                if (target && target != source && target.columns) {\n                    return findReorderTarget(columns, target, source, before, masterColumns);\n                }\n            }\n            return null;\n        }\n        function leafColumns(columns) {\n            var result = [];\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (!columns[idx].columns) {\n                    result.push(columns[idx]);\n                    continue;\n                }\n                result = result.concat(leafColumns(columns[idx].columns));\n            }\n            return result;\n        }\n        function visibleChildColumns(columns) {\n            return grep(columns, function (column) {\n                return !column.hidden;\n            });\n        }\n        function isVisible(column) {\n            return visibleColumns([column]).length > 0;\n        }\n        function visibleColumns(columns) {\n            return grep(columns, function (column) {\n                var result = !column.hidden;\n                if (result && column.columns) {\n                    result = visibleColumns(column.columns).length > 0;\n                }\n                return result;\n            });\n        }\n        function normalizeColumns(columns, hide) {\n            return map(columns, function (column) {\n                var hidden;\n                if (!isVisible(column) || hide) {\n                    hidden = true;\n                }\n                if (column.columns) {\n                    column.columns = normalizeColumns(column.columns, hidden);\n                }\n                return extend({ hidden: hidden }, column);\n            });\n        }\n        function flatColumnsInDomOrder(columns) {\n            var result = flatColumns(lockedColumns(columns));\n            return result.concat(flatColumns(nonLockedColumns(columns)));\n        }\n        function targetParentContainerIndex(flatColumns, columns, sourceIndex, targetIndex) {\n            var column = flatColumns[sourceIndex];\n            var target = flatColumns[targetIndex];\n            var parent = columnParent(column, columns);\n            columns = parent ? parent.columns : columns;\n            return inArray(target, columns);\n        }\n        function parentColumnsCells(cell) {\n            var container = cell.closest('table');\n            var result = $().add(cell);\n            var row = cell.closest('tr');\n            var headerRows = container.find('tr');\n            var level = headerRows.index(row);\n            if (level > 0) {\n                var parent = headerRows.eq(level - 1);\n                var parentCellsWithChildren = parent.find('th').filter(function () {\n                    return !$(this).attr('rowspan');\n                });\n                var offset = 0;\n                var index = row.find('th').index(cell);\n                var prevCells = cell.prevAll().filter(function () {\n                    return this.colSpan > 1;\n                });\n                for (var idx = 0; idx < prevCells.length; idx++) {\n                    offset += prevCells[idx].colSpan || 1;\n                }\n                index += Math.max(offset - 1, 0);\n                offset = 0;\n                for (idx = 0; idx < parentCellsWithChildren.length; idx++) {\n                    var parentCell = parentCellsWithChildren.eq(idx);\n                    if (parentCell.attr('data-colspan')) {\n                        offset += parentCell[0].getAttribute('data-colspan');\n                    } else {\n                        offset += 1;\n                    }\n                    if (index >= idx && index < offset) {\n                        result = parentColumnsCells(parentCell).add(result);\n                        break;\n                    }\n                }\n            }\n            return result;\n        }\n        function childColumnsCells(cell) {\n            var container = cell.closest('thead');\n            var result = $().add(cell);\n            var row = cell.closest('tr');\n            var headerRows = container.find('tr');\n            var level = headerRows.index(row) + cell[0].rowSpan;\n            var colSpanAttr = kendo.attr('colspan');\n            if (level <= headerRows.length - 1) {\n                var child = row.next();\n                var prevCells = cell.prevAll();\n                var idx;\n                prevCells = prevCells.filter(function () {\n                    return !this.rowSpan || this.rowSpan === 1;\n                });\n                var offset = 0;\n                for (idx = 0; idx < prevCells.length; idx++) {\n                    offset += parseInt(prevCells.eq(idx).attr(colSpanAttr), 10) || 1;\n                }\n                var cells = child.find('th');\n                var colSpan = parseInt(cell.attr(colSpanAttr), 10) || 1;\n                idx = 0;\n                while (idx < colSpan) {\n                    child = cells.eq(idx + offset);\n                    result = result.add(childColumnsCells(child));\n                    var value = parseInt(child.attr(colSpanAttr), 10);\n                    if (value > 1) {\n                        colSpan -= value - 1;\n                    }\n                    idx++;\n                }\n            }\n            return result;\n        }\n        function columnParent(column, columns) {\n            var parents = [];\n            columnParents(column, columns, parents);\n            return parents[parents.length - 1];\n        }\n        function columnParents(column, columns, parents) {\n            parents = parents || [];\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (column === columns[idx]) {\n                    return true;\n                } else if (columns[idx].columns) {\n                    var inserted = parents.length;\n                    parents.push(columns[idx]);\n                    if (!columnParents(column, columns[idx].columns, parents)) {\n                        parents.splice(inserted, parents.length - inserted);\n                    } else {\n                        return true;\n                    }\n                }\n            }\n            return false;\n        }\n        function flatColumns(columns) {\n            var result = [];\n            var children = [];\n            for (var idx = 0; idx < columns.length; idx++) {\n                result.push(columns[idx]);\n                if (columns[idx].columns) {\n                    children = children.concat(columns[idx].columns);\n                }\n            }\n            if (children.length) {\n                result = result.concat(flatColumns(children));\n            }\n            return result;\n        }\n        function columnPosition(column, columns, row, cellCounts) {\n            var result;\n            var idx;\n            row = row || 0;\n            cellCounts = cellCounts || {};\n            cellCounts[row] = cellCounts[row] || 0;\n            for (idx = 0; idx < columns.length; idx++) {\n                if (columns[idx] == column) {\n                    result = {\n                        cell: cellCounts[row],\n                        row: row\n                    };\n                    break;\n                } else if (columns[idx].columns) {\n                    result = columnPosition(column, columns[idx].columns, row + 1, cellCounts);\n                    if (result) {\n                        break;\n                    }\n                }\n                cellCounts[row]++;\n            }\n            return result;\n        }\n        function updateCellIndex(thead, columns, offset) {\n            offset = offset || 0;\n            var position;\n            var cell;\n            var allColumns = columns;\n            columns = leafColumns(columns);\n            var cells = {};\n            var rows = thead.find('>tr:not(.k-filter-row)');\n            var filter = function () {\n                var el = $(this);\n                return !el.hasClass('k-group-cell') && !el.hasClass('k-hierarchy-cell');\n            };\n            for (var idx = 0, length = columns.length; idx < length; idx++) {\n                position = columnPosition(columns[idx], allColumns);\n                if (!cells[position.row]) {\n                    cells[position.row] = rows.eq(position.row).find('.k-header').filter(filter);\n                }\n                cell = cells[position.row].eq(position.cell);\n                cell.attr(kendo.attr('index'), offset + idx);\n            }\n            return columns.length;\n        }\n        function depth(columns) {\n            var result = 1;\n            var max = 0;\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (columns[idx].columns) {\n                    var temp = depth(columns[idx].columns);\n                    if (temp > max) {\n                        max = temp;\n                    }\n                }\n            }\n            return result + max;\n        }\n        function lockedColumns(columns) {\n            return grep(columns, is('locked'));\n        }\n        function nonLockedColumns(columns) {\n            return grep(columns, not(is('locked')));\n        }\n        function updateRowSpans(container, containerDOMtree) {\n            var rows = container.find('tr');\n            var length = rows.length;\n            rows.each(function (idx) {\n                var cells = this.cells;\n                for (var i = 0; i < cells.length; i++) {\n                    if (cells[i].colSpan <= 1 && cells[i].attributes.rowspan) {\n                        containerDOMtree.children[idx].children[i].attr.rowSpan = length - idx;\n                        cells[i].rowSpan = length - idx;\n                    }\n                }\n            });\n        }\n        function removeEmptyRows(container, containerDOMtree) {\n            var rows = container.find('tr');\n            var emptyRows = [];\n            rows.filter(function (idx) {\n                var shouldRemove = !$(this).children().length;\n                if (shouldRemove) {\n                    emptyRows.push(idx);\n                }\n                return shouldRemove;\n            }).remove();\n            for (var i = emptyRows.length - 1; i >= 0; i--) {\n                containerDOMtree.children.splice(emptyRows[i], 1);\n            }\n            updateRowSpans(container, containerDOMtree);\n        }\n        function focusTable(table, direct) {\n            if (direct === true) {\n                table = $(table);\n                var scrollTop, scrollLeft;\n                scrollTop = table.parent().scrollTop();\n                scrollLeft = table.parent().scrollLeft();\n                kendo.focusElement(table);\n                table.parent().scrollTop(scrollTop).scrollLeft(scrollLeft);\n            } else {\n                $(table).one('focusin', function (e) {\n                    e.preventDefault();\n                }).focus();\n            }\n        }\n        function adjustRowHeight(row1, row2) {\n            var height;\n            var offsetHeight1 = row1.offsetHeight;\n            var offsetHeight2 = row2.offsetHeight;\n            if (offsetHeight1 > offsetHeight2) {\n                height = offsetHeight1 + 'px';\n            } else if (offsetHeight1 < offsetHeight2) {\n                height = offsetHeight2 + 'px';\n            }\n            if (height) {\n                row1.style.height = row2.style.height = height;\n            }\n        }\n        function isColumnEditable(column, model) {\n            if (!column || !model || !column.field || column.selectable || column.command || column.editable && !column.editable(model)) {\n                return false;\n            }\n            return column.field && model.editable && model.editable(column.field);\n        }\n        function isDirtyColumn(column, model) {\n            var field = (column || {}).field || '';\n            return model.dirty && model.dirtyFields && model.dirtyFields[field] && isColumnEditable(column, model);\n        }\n        function isUndefined(value) {\n            return typeof value === 'undefined';\n        }\n        function isNumber(value) {\n            return typeof value === 'number' && !isNaN(value);\n        }\n        if (kendo.ExcelMixin) {\n            kendo.ExcelMixin.extend(TreeList.prototype);\n        }\n        if (kendo.PDFMixin) {\n            kendo.PDFMixin.extend(TreeList.prototype);\n            TreeList.prototype._drawPDF = function (progress) {\n                var treeList = this;\n                if (treeList.options.pdf.paperSize && treeList.options.pdf.paperSize != 'auto') {\n                    return treeList._drawPDF_autoPageBreak(progress);\n                }\n                var result = new $.Deferred();\n                var dataSource = treeList.dataSource;\n                var allPages = treeList.options.pdf.allPages;\n                this._initPDFProgress(progress);\n                var doc = new kendo.drawing.Group();\n                var startingPage = dataSource.page();\n                function resolve() {\n                    if (allPages && startingPage !== undefined) {\n                        dataSource.unbind('change', exportPage);\n                        dataSource.one('change', function () {\n                            result.resolve(doc);\n                        });\n                        dataSource.page(startingPage);\n                    } else {\n                        result.resolve(doc);\n                    }\n                }\n                function exportPage() {\n                    treeList._drawPDFShadow({ width: treeList.wrapper.width() }, { avoidLinks: treeList.options.pdf.avoidLinks }).done(function (group) {\n                        var pageNum = dataSource.page();\n                        var totalPages = allPages ? dataSource.totalPages() : 1;\n                        var args = {\n                            page: group,\n                            pageNumber: pageNum,\n                            progress: pageNum / totalPages,\n                            totalPages: totalPages\n                        };\n                        progress.notify(args);\n                        doc.append(args.page);\n                        if (pageNum < totalPages) {\n                            dataSource.page(pageNum + 1);\n                        } else {\n                            resolve();\n                        }\n                    }).fail(function (err) {\n                        result.reject(err);\n                    });\n                }\n                if (allPages) {\n                    dataSource.bind('change', exportPage);\n                    dataSource.page(1);\n                } else {\n                    exportPage();\n                }\n                return result.promise();\n            };\n            TreeList.prototype._initPDFProgress = function (deferred) {\n                var loading = $('<div class=\\'k-loading-pdf-mask\\'><div class=\\'k-loading-color\\'/></div>');\n                loading.prepend(this.wrapper.clone().css({\n                    position: 'absolute',\n                    top: 0,\n                    left: 0\n                }));\n                this.wrapper.append(loading);\n                var progressBar = $('<div class=\\'k-loading-pdf-progress\\'>').appendTo(loading).kendoProgressBar({\n                    type: 'chunk',\n                    chunkCount: 10,\n                    min: 0,\n                    max: 1,\n                    value: 0\n                }).data('kendoProgressBar');\n                deferred.progress(function (e) {\n                    progressBar.value(e.progress);\n                }).always(function () {\n                    kendo.destroy(loading);\n                    loading.remove();\n                });\n            };\n            TreeList.prototype._drawPDF_autoPageBreak = function (progress) {\n                var treeList = this;\n                var result = new $.Deferred();\n                var dataSource = treeList.dataSource;\n                var allPages = treeList.options.pdf.allPages;\n                var origBody = treeList.wrapper.find('table[role=\"treeList\"] > tbody');\n                var cont = $('<div>').css({\n                    position: 'absolute',\n                    left: -10000,\n                    top: -10000\n                });\n                var clone = treeList.wrapper.clone().css({\n                    height: 'auto',\n                    width: 'auto'\n                }).appendTo(cont);\n                clone.find('.k-grid-content').css({\n                    height: 'auto',\n                    width: 'auto',\n                    overflow: 'visible'\n                });\n                clone.find('table[role=\"treeList\"], .k-grid-footer table').css({\n                    height: 'auto',\n                    width: '100%',\n                    overflow: 'visible'\n                });\n                clone.find('.k-grid-pager, .k-grid-toolbar, .k-grouping-header').remove();\n                clone.find('.k-grid-header, .k-grid-footer').css({ paddingRight: 0 });\n                this._initPDFProgress(progress);\n                var body = clone.find('table[role=\"treeList\"] > tbody').empty();\n                var startingPage = dataSource.page();\n                function resolve() {\n                    if (allPages && startingPage !== undefined) {\n                        dataSource.one('change', draw);\n                        dataSource.page(startingPage);\n                    } else {\n                        treeList.refresh();\n                        draw();\n                    }\n                }\n                function draw() {\n                    cont.appendTo(document.body);\n                    var options = $.extend({}, treeList.options.pdf, {\n                        _destructive: true,\n                        progress: function (p) {\n                            progress.notify({\n                                page: p.page,\n                                pageNumber: p.pageNum,\n                                progress: 0.5 + p.pageNum / p.totalPages / 2,\n                                totalPages: p.totalPages\n                            });\n                        }\n                    });\n                    kendo.drawing.drawDOM(clone, options).always(function () {\n                        cont.remove();\n                    }).then(function (group) {\n                        result.resolve(group);\n                    }).fail(function (err) {\n                        result.reject(err);\n                    });\n                }\n                function renderPage() {\n                    var pageNum = dataSource.page();\n                    var totalPages = allPages ? dataSource.totalPages() : 1;\n                    body.append(origBody.find('tr'));\n                    if (pageNum < totalPages) {\n                        dataSource.page(pageNum + 1);\n                    } else {\n                        dataSource.unbind('change', renderPage);\n                        resolve();\n                    }\n                }\n                if (allPages) {\n                    dataSource.bind('change', renderPage);\n                    dataSource.page(1);\n                } else {\n                    renderPage();\n                }\n                return result.promise();\n            };\n        }\n        extend(true, kendo.data, {\n            TreeListDataSource: TreeListDataSource,\n            TreeListModel: TreeListModel\n        });\n        ui.plugin(TreeList);\n        ui.plugin(TreeListPager);\n    }(window.kendo.jQuery));\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));"]}